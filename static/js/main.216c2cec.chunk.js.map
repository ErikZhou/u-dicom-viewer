{"version":3,"sources":["actions/index.js","constants/uids.js","constants/settings.js","components/OpenUrlDlg.js","components/CinePlayer.js","functions.js","db/db.js","components/dicomviewer.js","components/DicomHeader.js","components/MeasureItem.js","components/Measurements.js","components/Settings.js","components/AboutDlg.js","components/Histogram.js","components/LayoutTool.js","App.js","serviceWorker.js","store/index.js","reducers/index.js","index.js"],"names":["CLEAR_STORE","DCM_IS_OPEN","DCM_TOOL","ACTIVE_DCM_INDEX","ACTIVE_DCM","DCM_IMAGE","ACTIVE_MEASUREMENTS","LAYOUT","dcmIsOpen","value","type","dcmTool","tool","activeDcm","dcm","activeMeasurements","measurements","uids","SETTINGS_SAVEAS","SETTINGS_DCMHEADER","SETTINGS_OVERLAY","OpenUrlDlg","hide","props","onClose","cancel","window","stop","Dialog","open","this","aria-labelledby","DialogTitle","id","DialogContent","LinearProgress","variant","progress","color","DialogActions","Button","onClick","PureComponent","CinePlayer","firstframe","runCinePlayer","previousframe","play","pause","nextframe","lastframe","inPlay","IconButton","path","mdiPause","size","mdiPlay","style","width","margin","mdiSkipBackward","mdiSkipPrevious","mdiSkipNext","mdiSkipForward","isUrlImage","url","match","isFileImage","file","includes","getSettingsOverlay","overlay","localStorage","getItem","setItem","toCsvValue","theValue","t","replace","String","db","Dexie","version","stores","measurement","scrollToIndex","csTools","getBlobUrl","baseUrl","URL","webkitURL","blob","Blob","createObjectURL","config","maxWebWorkers","webWorkerPath","taskConfiguration","decodeTask","codecsPath","cornerstoneTools","cornerstone","cornerstoneMath","cornerstoneFileImageLoader","cornerstoneWebImageLoader","cornerstoneWADOImageLoader","initialize","dicomParser","Hammer","DicomViewer","state","visibleOpenUrlDlg","visibleCinePlayer","errorOnOpenImage","errorOnCors","frame","viewport","onOpenUrl","e","eventData","detail","setState","percentComplete","showOpenUrlDlg","addEventListener","loadImage","undefined","hideOpenUrlDlg","measurementSave","measure","push","measurementClear","splice","length","measurementRemove","index","getTransferSyntax","image","data","string","getSopClass","getSopInstanceUID","getPixelRepresentation","uint16","getPlanarConfiguration","onImageLoaded","onImageRendered","target","isDicom","document","getElementById","textContent","PatientsName","displayedArea","brhc","x","y","Math","round","voi","windowWidth","windowCenter","scale","toFixed","numberOfFrames","onMeasurementModified","onMeasurementCompleted","note","measurementData","setActiveMeasurements","onErrorOpenImageClose","onErrorCorsClose","localfile","localurl","element","dicomImage","onNewImage","onMeasurementAdded","imageId","then","console","log","enableTool","setActiveDcm","isOpenStore","add","fileManager","sopInstanceUid","stack","currentImageIdIndex","imageIds","intString","i","where","equals","each","runTool","error","toString","pos","indexOf","substring","toolName","mouseButtonNumber","WwwcTool","LengthTool","PanTool","ZoomTouchPinchTool","ZoomTool","ProbeTool","EllipticalRoiTool","RectangleRoiTool","FreehandRoiTool","AngleTool","MagnifyTool","StackScrollMouseWheelTool","disableAllTools","opt","clearingStore","mouseButtonMask","isMobile","isTouchActive","invert","name","reset","forEach","delete","sopinstanceuid","changeTool","cmdName","defaultViewport","dicomImageRef","el","onImageClick","dcmRef","previousProps","isOpen","layout","styleContainer","height","border","activeDcmIndex","position","className","aria-describedby","DialogContentText","autoFocus","Typography","gutterBottom","Link","href","textShadow","onContextMenu","ref","top","left","display","right","bottom","textAlign","backgroundColor","marginTop","React","Component","connect","dispatch","toolStore","DicomHeader","dcmViewer","classes","header","minPixelValue","maxPixelValue","listItems","map","item","ListItem","dense","key","ListItemText","primary","secondary","Toolbar","title","grow","exportAs","fileData","objArray","cDelimiter","l","obj","row","n","nl","names","output","sDelimiter","hasOwnProperty","join","toCsv","reduce","o","JSON","stringify","createElement","download","body","appendChild","click","mdiContentSaveOutline","List","component","MeasureItem","visibleDlgNote","visibleDlgDelete","showDlgNote","hideDlgNote","showDlgDelete","hideDlgDelete","handleOnChangeNote","event","confirmNote","noteField","confirmDelete","toolRemove","onEdit","onDelete","createRef","pText","sText","unit","rAngle","cachedStats","area","mean","stdDev","meanStdDev","edge","TextField","fullWidth","defaultValue","inputRef","input","Measurements","visibleClearMeasureDlg","showClearMeasureDlg","hideClearMeasureDlg","confirmClearMeasureDlg","dicomViewersRefs","useStyles","makeStyles","theme","appBar","formControl","spacing","marginLeft","flex","Transition","forwardRef","Slide","direction","Settings","saveAs","getSettingsSaveAs","getSettingsDcmHeader","useState","fullScreen","TransitionComponent","AppBar","aria-label","FormControl","FormControlLabel","control","Checkbox","checked","onChange","label","Divider","FormLabel","RadioGroup","Radio","AboutDlg","linkRepository","packageJson","disableTypography","getRGBPixels","padding","styleSlider","styleCanvasGradient","styleTable","borderCollapse","fontFamily","fontSize","styleTableTd","tableLayout","Histogram","activeDrags","deltaPosition","controlledPosition","histCount","valueScale","minHist","maxHist","handleChangeValue","newValue","binSize","hist256","onDrag","ui","deltaX","deltaY","onStart","onStop","canvasHistogram","canvasGradient","pixelData","getPixelData","updateCanvas","canvas","evt","rect","getBoundingClientRect","clientX","clientY","storedPixelData","spIndex","column","rows","red","green","blue","alpha","getRGBPixelsImage","intercept","lenHist","zero256","floor","abs","stepWW","stepWC","m","hist","Array","fill","columns","mo","getPixel","slope","s","pow","sqrt","step","max","j","canvasH","current","ctxH","getContext","translate","mousePos","getMousePos","p","beginPath","fillStyle","fillRect","strokeStyle","h","moveTo","lineTo","stroke","lineWidth","lowX","highX","ctxG","grd","createLinearGradient","addColorStop","cursor","Slider","min","parseFloat","LayoutTool","initTable","col","tableRef","cells","bgColor","cellClick","parentNode","rowIndex","cellIndex","renderTable","iconTool","App","anchorElLayout","openImageEdit","visibleMainMenu","visibleHeader","visibleSettings","visibleToolbar","visibleOpenUrl","visibleToolbox","visibleMeasure","visibleAbout","toolState","setDcmViewer","getDcmViewerRef","getDcmViewer","dicomViewers","getActiveDcmViewer","handleOpenFile","filesSelected","hideMainMenu","showAppBar","scrollTo","toggleMainMenu","showMainMenu","handleVisibility","toggleHeader","visible","toggleToolbox","saveMeasure","toggleMeasure","hideMeasure","handleVisibilityMeasure","clearMeasure","showAbout","showSettings","hideSettings","handleVisibilitySettings","showOpenUrl","hideOpenUrl","openDlg","openUrlField","downloadOpenUrl","resetImage","saveShot","cinePlayer","clear","handleLayout","currentTarget","closeLayout","changeLayout","layoutGridClick","setLayoutStore","toolExecute","mdiArrowAll","mdiCursorPointer","mdiMagnify","mdiRuler","mdiEyedropper","mdiAngleAcute","mdiEllipse","mdiRectangle","mdiGesture","toolChange","toggleImageEdit","setActiveDcmIndex","layoutGridTouch","buildLayoutGrid","dicomviewers","styleLayoutGrid","onTouchStart","gridTemplateRows","gridTemplateColumns","getFileName","lastIndexOf","appBarTitle","isTablet","fileOpen","showFileOpen","bind","visibleLayout","Boolean","iconToolColor","elevation","menuButton","mdiInformationOutline","mdiVideo","mdiRefresh","mdiToolbox","mdiFileCad","mdiFileDocument","Drawer","zIndex","toolbar","button","ListItemIcon","mdiFolder","mdiWeb","mdiDelete","mdiViewGridPlusOutline","mdiSettings","disabled","mdiCursorDefault","mdiCheckboxIntermediate","mdiChartHistogram","mdiImageEdit","Collapse","in","timeout","unmountOnExit","paddingLeft","mdiInvertColors","anchor","mdiTrashCanOutline","Popover","anchorEl","anchorOrigin","vertical","horizontal","transformOrigin","files","setLayout","withStyles","palette","common","black","flexGrow","root","marginRight","drawer","transition","transitions","create","easing","sharp","duration","leavingScreen","appBarShift","enteringScreen","flexShrink","whiteSpace","drawerOpen","drawerClose","overflowX","breakpoints","up","mixins","content","location","hostname","initialState","images","store","createStore","action","__REDUX_DEVTOOLS_EXTENSION__","WebFontLoader","load","google","families","subscribe","getState","createMuiTheme","main","ReactDOM","render","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.216c2cec.chunk.js","sourcesContent":["export const CLEAR_STORE = 'CLEAR_STORE'\r\nexport const DCM_IS_OPEN = 'DCM_IS_OPEN'\r\nexport const DCM_TOOL = 'DCM_TOOL'\r\nexport const ACTIVE_DCM_INDEX = 'ACTIVE_DCM_INDEX'\r\nexport const ACTIVE_DCM = 'ACTIVE_DCM'\r\nexport const DCM_IMAGE = 'DCM_IMAGE'\r\nexport const ACTIVE_MEASUREMENTS = 'ACTIVE_MEASUREMENTS'\r\nexport const LAYOUT = 'LAYOUT'\r\n\r\nexport const clearStore = () => {\r\n    return { \r\n        type: CLEAR_STORE, \r\n    }\r\n}\r\n\r\nexport const dcmIsOpen = (value) => {\r\n    return { \r\n        type: DCM_IS_OPEN, \r\n        value: value\r\n    }\r\n}\r\n\r\nexport const dcmTool = (tool) => {\r\n    return { \r\n        type: DCM_TOOL, \r\n        tool: tool \r\n    }\r\n}\r\n\r\nexport const activeDcmIndex = (index) => {\r\n    return { \r\n        type: ACTIVE_DCM_INDEX, \r\n        activeDcmIndex: index \r\n    }\r\n}\r\n\r\nexport const activeDcm = (dcm) => {\r\n    return { \r\n        type: ACTIVE_DCM, \r\n        activeDcm: dcm \r\n    }\r\n}\r\n\r\nexport const dcmImage = (image) => {\r\n    return { \r\n        type: DCM_IMAGE, \r\n        images: image \r\n    }\r\n}\r\n\r\nexport const activeMeasurements = (measurements) => {\r\n    return { \r\n        type: ACTIVE_MEASUREMENTS, \r\n        measurements: measurements \r\n    }\r\n}\r\n\r\nexport const setLayout = (row, col) => {\r\n    return { \r\n        type: LAYOUT, \r\n        layout: [row, col]\r\n    }\r\n}","// The table below was generated by running the following javascript in the console window while\n// viewing the HTML version of the standard here:\n// DICOM Standard here: http://dicom.nema.org/medical/dicom/current/output/html/part06.html\n// see the blog post about it here: http://chafey.blogspot.com/2015/08/parsing-dicom-standard-with-javascript.html\n\n/*\n (function () {\n var elements = document.querySelectorAll('#table_A-1 ~ div tbody tr');\n var result = \"\";for(var i=0; i < elements.length; i++) {\n result += \"'\" + elements[i].childNodes[1].childNodes[1].innerText.replace(/[^\\x20-\\x7E]+/g, '')  + \"':'\" +\n elements[i].childNodes[3].childNodes[1].innerText.replace(/[^\\x20-\\x7E]+/g, '') + \"',\\n\";\n }\n return result;\n })();\n */\n\nexport const uids = {\n  '1.2.840.10008.1.1':'Verification SOP Class',\n  '1.2.840.10008.1.2':'Implicit VR Little Endian: Default Transfer Syntax for DICOM',\n  '1.2.840.10008.1.2.1':'Explicit VR Little Endian',\n  '1.2.840.10008.1.2.1.99':'Deflated Explicit VR Little Endian',\n  '1.2.840.10008.1.2.2':'Explicit VR Big Endian (Retired)',\n  '1.2.840.10008.1.2.4.50':'JPEG Baseline (Process 1): Default Transfer Syntax for Lossy JPEG 8 Bit Image Compression',\n  '1.2.840.10008.1.2.4.51':'JPEG Extended (Process 2 & 4): Default Transfer Syntax for Lossy JPEG 12 Bit Image Compression (Process 4 only)',\n  '1.2.840.10008.1.2.4.52':'JPEG Extended (Process 3 & 5) (Retired)',\n  '1.2.840.10008.1.2.4.53':'JPEG Spectral Selection, Non-Hierarchical (Process 6 & 8) (Retired)',\n  '1.2.840.10008.1.2.4.54':'JPEG Spectral Selection, Non-Hierarchical (Process 7 & 9) (Retired)',\n  '1.2.840.10008.1.2.4.55':'JPEG Full Progression, Non-Hierarchical (Process 10 & 12) (Retired)',\n  '1.2.840.10008.1.2.4.56':'JPEG Full Progression, Non-Hierarchical (Process 11 & 13) (Retired)',\n  '1.2.840.10008.1.2.4.57':'JPEG Lossless, Non-Hierarchical (Process 14)',\n  '1.2.840.10008.1.2.4.58':'JPEG Lossless, Non-Hierarchical (Process 15) (Retired)',\n  '1.2.840.10008.1.2.4.59':'JPEG Extended, Hierarchical (Process 16 & 18) (Retired)',\n  '1.2.840.10008.1.2.4.60':'JPEG Extended, Hierarchical (Process 17 & 19) (Retired)',\n  '1.2.840.10008.1.2.4.61':'JPEG Spectral Selection, Hierarchical (Process 20 & 22) (Retired)',\n  '1.2.840.10008.1.2.4.62':'JPEG Spectral Selection, Hierarchical (Process 21 & 23) (Retired)',\n  '1.2.840.10008.1.2.4.63':'JPEG Full Progression, Hierarchical (Process 24 & 26) (Retired)',\n  '1.2.840.10008.1.2.4.64':'JPEG Full Progression, Hierarchical (Process 25 & 27) (Retired)',\n  '1.2.840.10008.1.2.4.65':'JPEG Lossless, Hierarchical (Process 28) (Retired)',\n  '1.2.840.10008.1.2.4.66':'JPEG Lossless, Hierarchical (Process 29) (Retired)',\n  '1.2.840.10008.1.2.4.70':'JPEG Lossless, Non-Hierarchical, First-Order Prediction (Process 14 [Selection Value 1]): Default Transfer Syntax for Lossless JPEG Image Compression',\n  '1.2.840.10008.1.2.4.80':'JPEG-LS Lossless Image Compression',\n  '1.2.840.10008.1.2.4.81':'JPEG-LS Lossy (Near-Lossless) Image Compression',\n  '1.2.840.10008.1.2.4.90':'JPEG 2000 Image Compression (Lossless Only)',\n  '1.2.840.10008.1.2.4.91':'JPEG 2000 Image Compression',\n  '1.2.840.10008.1.2.4.92':'JPEG 2000 Part 2 Multi-component Image Compression (Lossless Only)',\n  '1.2.840.10008.1.2.4.93':'JPEG 2000 Part 2 Multi-component Image Compression',\n  '1.2.840.10008.1.2.4.94':'JPIP Referenced',\n  '1.2.840.10008.1.2.4.95':'JPIP Referenced Deflate',\n  '1.2.840.10008.1.2.4.100':'MPEG2 Main Profile @ Main Level',\n  '1.2.840.10008.1.2.4.101':'MPEG2 Main Profile @ High Level',\n  '1.2.840.10008.1.2.4.102':'MPEG-4 AVC/H.264 High Profile / Level 4.1',\n  '1.2.840.10008.1.2.4.103':'MPEG-4 AVC/H.264 BD-compatible High Profile / Level 4.1',\n  '1.2.840.10008.1.2.4.104':'MPEG-4 AVC/H.264 High Profile / Level 4.2 For 2D Video',\n  '1.2.840.10008.1.2.4.105':'MPEG-4 AVC/H.264 High Profile / Level 4.2 For 3D Video',\n  '1.2.840.10008.1.2.4.106':'MPEG-4 AVC/H.264 Stereo High Profile / Level 4.2',\n  '1.2.840.10008.1.2.5':'RLE Lossless',\n  '1.2.840.10008.1.2.6.1':'RFC 2557 MIME encapsulation',\n  '1.2.840.10008.1.2.6.2':'XML Encoding',\n  '1.2.840.10008.1.3.10':'Media Storage Directory Storage',\n  '1.2.840.10008.1.4.1.1':'Talairach Brain Atlas Frame of Reference',\n  '1.2.840.10008.1.4.1.2':'SPM2 T1 Frame of Reference',\n  '1.2.840.10008.1.4.1.3':'SPM2 T2 Frame of Reference',\n  '1.2.840.10008.1.4.1.4':'SPM2 PD Frame of Reference',\n  '1.2.840.10008.1.4.1.5':'SPM2 EPI Frame of Reference',\n  '1.2.840.10008.1.4.1.6':'SPM2 FIL T1 Frame of Reference',\n  '1.2.840.10008.1.4.1.7':'SPM2 PET Frame of Reference',\n  '1.2.840.10008.1.4.1.8':'SPM2 TRANSM Frame of Reference',\n  '1.2.840.10008.1.4.1.9':'SPM2 SPECT Frame of Reference',\n  '1.2.840.10008.1.4.1.10':'SPM2 GRAY Frame of Reference',\n  '1.2.840.10008.1.4.1.11':'SPM2 WHITE Frame of Reference',\n  '1.2.840.10008.1.4.1.12':'SPM2 CSF Frame of Reference',\n  '1.2.840.10008.1.4.1.13':'SPM2 BRAINMASK Frame of Reference',\n  '1.2.840.10008.1.4.1.14':'SPM2 AVG305T1 Frame of Reference',\n  '1.2.840.10008.1.4.1.15':'SPM2 AVG152T1 Frame of Reference',\n  '1.2.840.10008.1.4.1.16':'SPM2 AVG152T2 Frame of Reference',\n  '1.2.840.10008.1.4.1.17':'SPM2 AVG152PD Frame of Reference',\n  '1.2.840.10008.1.4.1.18':'SPM2 SINGLESUBJT1 Frame of Reference',\n  '1.2.840.10008.1.4.2.1':'ICBM 452 T1 Frame of Reference',\n  '1.2.840.10008.1.4.2.2':'ICBM Single Subject MRI Frame of Reference',\n  '1.2.840.10008.1.5.1':'Hot Iron Color Palette SOP Instance',\n  '1.2.840.10008.1.5.2':'PET Color Palette SOP Instance',\n  '1.2.840.10008.1.5.3':'Hot Metal Blue Color Palette SOP Instance',\n  '1.2.840.10008.1.5.4':'PET 20 Step Color Palette SOP Instance',\n  '1.2.840.10008.1.9':'Basic Study Content Notification SOP Class (Retired)',\n  '1.2.840.10008.1.20.1':'Storage Commitment Push Model SOP Class',\n  '1.2.840.10008.1.20.1.1':'Storage Commitment Push Model SOP Instance',\n  '1.2.840.10008.1.20.2':'Storage Commitment Pull Model SOP Class (Retired)',\n  '1.2.840.10008.1.20.2.1':'Storage Commitment Pull Model SOP Instance (Retired)',\n  '1.2.840.10008.1.40':'Procedural Event Logging SOP Class',\n  '1.2.840.10008.1.40.1':'Procedural Event Logging SOP Instance',\n  '1.2.840.10008.1.42':'Substance Administration Logging SOP Class',\n  '1.2.840.10008.1.42.1':'Substance Administration Logging SOP Instance',\n  '1.2.840.10008.2.6.1':'DICOM UID Registry',\n  '1.2.840.10008.2.16.4':'DICOM Controlled Terminology',\n  '1.2.840.10008.3.1.1.1':'DICOM Application Context Name',\n  '1.2.840.10008.3.1.2.1.1':'Detached Patient Management SOP Class (Retired)',\n  '1.2.840.10008.3.1.2.1.4':'Detached Patient Management Meta SOP Class (Retired)',\n  '1.2.840.10008.3.1.2.2.1':'Detached Visit Management SOP Class (Retired)',\n  '1.2.840.10008.3.1.2.3.1':'Detached Study Management SOP Class (Retired)',\n  '1.2.840.10008.3.1.2.3.2':'Study Component Management SOP Class (Retired)',\n  '1.2.840.10008.3.1.2.3.3':'Modality Performed Procedure Step SOP Class',\n  '1.2.840.10008.3.1.2.3.4':'Modality Performed Procedure Step Retrieve SOP Class',\n  '1.2.840.10008.3.1.2.3.5':'Modality Performed Procedure Step Notification SOP Class',\n  '1.2.840.10008.3.1.2.5.1':'Detached Results Management SOP Class (Retired)',\n  '1.2.840.10008.3.1.2.5.4':'Detached Results Management Meta SOP Class (Retired)',\n  '1.2.840.10008.3.1.2.5.5':'Detached Study Management Meta SOP Class (Retired)',\n  '1.2.840.10008.3.1.2.6.1':'Detached Interpretation Management SOP Class (Retired)',\n  '1.2.840.10008.4.2':'Storage Service Class',\n  '1.2.840.10008.5.1.1.1':'Basic Film Session SOP Class',\n  '1.2.840.10008.5.1.1.2':'Basic Film Box SOP Class',\n  '1.2.840.10008.5.1.1.4':'Basic Grayscale Image Box SOP Class',\n  '1.2.840.10008.5.1.1.4.1':'Basic Color Image Box SOP Class',\n  '1.2.840.10008.5.1.1.4.2':'Referenced Image Box SOP Class (Retired)',\n  '1.2.840.10008.5.1.1.9':'Basic Grayscale Print Management Meta SOP Class',\n  '1.2.840.10008.5.1.1.9.1':'Referenced Grayscale Print Management Meta SOP Class (Retired)',\n  '1.2.840.10008.5.1.1.14':'Print Job SOP Class',\n  '1.2.840.10008.5.1.1.15':'Basic Annotation Box SOP Class',\n  '1.2.840.10008.5.1.1.16':'Printer SOP Class',\n  '1.2.840.10008.5.1.1.16.376':'Printer Configuration Retrieval SOP Class',\n  '1.2.840.10008.5.1.1.17':'Printer SOP Instance',\n  '1.2.840.10008.5.1.1.17.376':'Printer Configuration Retrieval SOP Instance',\n  '1.2.840.10008.5.1.1.18':'Basic Color Print Management Meta SOP Class',\n  '1.2.840.10008.5.1.1.18.1':'Referenced Color Print Management Meta SOP Class (Retired)',\n  '1.2.840.10008.5.1.1.22':'VOI LUT Box SOP Class',\n  '1.2.840.10008.5.1.1.23':'Presentation LUT SOP Class',\n  '1.2.840.10008.5.1.1.24':'Image Overlay Box SOP Class (Retired)',\n  '1.2.840.10008.5.1.1.24.1':'Basic Print Image Overlay Box SOP Class (Retired)',\n  '1.2.840.10008.5.1.1.25':'Print Queue SOP Instance (Retired)',\n  '1.2.840.10008.5.1.1.26':'Print Queue Management SOP Class (Retired)',\n  '1.2.840.10008.5.1.1.27':'Stored Print Storage SOP Class (Retired)',\n  '1.2.840.10008.5.1.1.29':'Hardcopy Grayscale Image Storage SOP Class (Retired)',\n  '1.2.840.10008.5.1.1.30':'Hardcopy Color Image Storage SOP Class (Retired)',\n  '1.2.840.10008.5.1.1.31':'Pull Print Request SOP Class (Retired)',\n  '1.2.840.10008.5.1.1.32':'Pull Stored Print Management Meta SOP Class (Retired)',\n  '1.2.840.10008.5.1.1.33':'Media Creation Management SOP Class UID',\n  '1.2.840.10008.5.1.1.40':'Display System SOP Class',\n  '1.2.840.10008.5.1.1.40.1':'Display System SOP Instance',\n  '1.2.840.10008.5.1.4.1.1.1':'Computed Radiography Image Storage',\n  '1.2.840.10008.5.1.4.1.1.1.1':'Digital X-Ray Image Storage - For Presentation',\n  '1.2.840.10008.5.1.4.1.1.1.1.1':'Digital X-Ray Image Storage - For Processing',\n  '1.2.840.10008.5.1.4.1.1.1.2':'Digital Mammography X-Ray Image Storage - For Presentation',\n  '1.2.840.10008.5.1.4.1.1.1.2.1':'Digital Mammography X-Ray Image Storage - For Processing',\n  '1.2.840.10008.5.1.4.1.1.1.3':'Digital Intra-Oral X-Ray Image Storage - For Presentation',\n  '1.2.840.10008.5.1.4.1.1.1.3.1':'Digital Intra-Oral X-Ray Image Storage - For Processing',\n  '1.2.840.10008.5.1.4.1.1.2':'CT Image Storage',\n  '1.2.840.10008.5.1.4.1.1.2.1':'Enhanced CT Image Storage',\n  '1.2.840.10008.5.1.4.1.1.2.2':'Legacy Converted Enhanced CT Image Storage',\n  '1.2.840.10008.5.1.4.1.1.3':'Ultrasound Multi-frame Image Storage (Retired)',\n  '1.2.840.10008.5.1.4.1.1.3.1':'Ultrasound Multi-frame Image Storage',\n  '1.2.840.10008.5.1.4.1.1.4':'MR Image Storage',\n  '1.2.840.10008.5.1.4.1.1.4.1':'Enhanced MR Image Storage',\n  '1.2.840.10008.5.1.4.1.1.4.2':'MR Spectroscopy Storage',\n  '1.2.840.10008.5.1.4.1.1.4.3':'Enhanced MR Color Image Storage',\n  '1.2.840.10008.5.1.4.1.1.4.4':'Legacy Converted Enhanced MR Image Storage',\n  '1.2.840.10008.5.1.4.1.1.5':'Nuclear Medicine Image Storage (Retired)',\n  '1.2.840.10008.5.1.4.1.1.6':'Ultrasound Image Storage (Retired)',\n  '1.2.840.10008.5.1.4.1.1.6.1':'Ultrasound Image Storage',\n  '1.2.840.10008.5.1.4.1.1.6.2':'Enhanced US Volume Storage',\n  '1.2.840.10008.5.1.4.1.1.7':'Secondary Capture Image Storage',\n  '1.2.840.10008.5.1.4.1.1.7.1':'Multi-frame Single Bit Secondary Capture Image Storage',\n  '1.2.840.10008.5.1.4.1.1.7.2':'Multi-frame Grayscale Byte Secondary Capture Image Storage',\n  '1.2.840.10008.5.1.4.1.1.7.3':'Multi-frame Grayscale Word Secondary Capture Image Storage',\n  '1.2.840.10008.5.1.4.1.1.7.4':'Multi-frame True Color Secondary Capture Image Storage',\n  '1.2.840.10008.5.1.4.1.1.8':'Standalone Overlay Storage (Retired)',\n  '1.2.840.10008.5.1.4.1.1.9':'Standalone Curve Storage (Retired)',\n  '1.2.840.10008.5.1.4.1.1.9.1':'Waveform Storage - Trial (Retired)',\n  '1.2.840.10008.5.1.4.1.1.9.1.1':'12-lead ECG Waveform Storage',\n  '1.2.840.10008.5.1.4.1.1.9.1.2':'General ECG Waveform Storage',\n  '1.2.840.10008.5.1.4.1.1.9.1.3':'Ambulatory ECG Waveform Storage',\n  '1.2.840.10008.5.1.4.1.1.9.2.1':'Hemodynamic Waveform Storage',\n  '1.2.840.10008.5.1.4.1.1.9.3.1':'Cardiac Electrophysiology Waveform Storage',\n  '1.2.840.10008.5.1.4.1.1.9.4.1':'Basic Voice Audio Waveform Storage',\n  '1.2.840.10008.5.1.4.1.1.9.4.2':'General Audio Waveform Storage',\n  '1.2.840.10008.5.1.4.1.1.9.5.1':'Arterial Pulse Waveform Storage',\n  '1.2.840.10008.5.1.4.1.1.9.6.1':'Respiratory Waveform Storage',\n  '1.2.840.10008.5.1.4.1.1.10':'Standalone Modality LUT Storage (Retired)',\n  '1.2.840.10008.5.1.4.1.1.11':'Standalone VOI LUT Storage (Retired)',\n  '1.2.840.10008.5.1.4.1.1.11.1':'Grayscale Softcopy Presentation State Storage SOP Class',\n  '1.2.840.10008.5.1.4.1.1.11.2':'Color Softcopy Presentation State Storage SOP Class',\n  '1.2.840.10008.5.1.4.1.1.11.3':'Pseudo-Color Softcopy Presentation State Storage SOP Class',\n  '1.2.840.10008.5.1.4.1.1.11.4':'Blending Softcopy Presentation State Storage SOP Class',\n  '1.2.840.10008.5.1.4.1.1.11.5':'XA/XRF Grayscale Softcopy Presentation State Storage',\n  '1.2.840.10008.5.1.4.1.1.12.1':'X-Ray Angiographic Image Storage',\n  '1.2.840.10008.5.1.4.1.1.12.1.1':'Enhanced XA Image Storage',\n  '1.2.840.10008.5.1.4.1.1.12.2':'X-Ray Radiofluoroscopic Image Storage',\n  '1.2.840.10008.5.1.4.1.1.12.2.1':'Enhanced XRF Image Storage',\n  '1.2.840.10008.5.1.4.1.1.12.3':'X-Ray Angiographic Bi-Plane Image Storage (Retired)',\n  '1.2.840.10008.5.1.4.1.1.13.1.1':'X-Ray 3D Angiographic Image Storage',\n  '1.2.840.10008.5.1.4.1.1.13.1.2':'X-Ray 3D Craniofacial Image Storage',\n  '1.2.840.10008.5.1.4.1.1.13.1.3':'Breast Tomosynthesis Image Storage',\n  '1.2.840.10008.5.1.4.1.1.13.1.4':'Breast Projection X-Ray Image Storage - For Presentation',\n  '1.2.840.10008.5.1.4.1.1.13.1.5':'Breast Projection X-Ray Image Storage - For Processing',\n  '1.2.840.10008.5.1.4.1.1.14.1':'Intravascular Optical Coherence Tomography Image Storage - For Presentation',\n  '1.2.840.10008.5.1.4.1.1.14.2':'Intravascular Optical Coherence Tomography Image Storage - For Processing',\n  '1.2.840.10008.5.1.4.1.1.20':'Nuclear Medicine Image Storage',\n  '1.2.840.10008.5.1.4.1.1.30':'Parametric Map Storage',\n  '1.2.840.10008.5.1.4.1.1.66':'Raw Data Storage',\n  '1.2.840.10008.5.1.4.1.1.66.1':'Spatial Registration Storage',\n  '1.2.840.10008.5.1.4.1.1.66.2':'Spatial Fiducials Storage',\n  '1.2.840.10008.5.1.4.1.1.66.3':'Deformable Spatial Registration Storage',\n  '1.2.840.10008.5.1.4.1.1.66.4':'Segmentation Storage',\n  '1.2.840.10008.5.1.4.1.1.66.5':'Surface Segmentation Storage',\n  '1.2.840.10008.5.1.4.1.1.67':'Real World Value Mapping Storage',\n  '1.2.840.10008.5.1.4.1.1.68.1':'Surface Scan Mesh Storage',\n  '1.2.840.10008.5.1.4.1.1.68.2':'Surface Scan Point Cloud Storage',\n  '1.2.840.10008.5.1.4.1.1.77.1':'VL Image Storage - Trial (Retired)',\n  '1.2.840.10008.5.1.4.1.1.77.2':'VL Multi-frame Image Storage - Trial (Retired)',\n  '1.2.840.10008.5.1.4.1.1.77.1.1':'VL Endoscopic Image Storage',\n  '1.2.840.10008.5.1.4.1.1.77.1.1.1':'Video Endoscopic Image Storage',\n  '1.2.840.10008.5.1.4.1.1.77.1.2':'VL Microscopic Image Storage',\n  '1.2.840.10008.5.1.4.1.1.77.1.2.1':'Video Microscopic Image Storage',\n  '1.2.840.10008.5.1.4.1.1.77.1.3':'VL Slide-Coordinates Microscopic Image Storage',\n  '1.2.840.10008.5.1.4.1.1.77.1.4':'VL Photographic Image Storage',\n  '1.2.840.10008.5.1.4.1.1.77.1.4.1':'Video Photographic Image Storage',\n  '1.2.840.10008.5.1.4.1.1.77.1.5.1':'Ophthalmic Photography 8 Bit Image Storage',\n  '1.2.840.10008.5.1.4.1.1.77.1.5.2':'Ophthalmic Photography 16 Bit Image Storage',\n  '1.2.840.10008.5.1.4.1.1.77.1.5.3':'Stereometric Relationship Storage',\n  '1.2.840.10008.5.1.4.1.1.77.1.5.4':'Ophthalmic Tomography Image Storage',\n  '1.2.840.10008.5.1.4.1.1.77.1.5.5':'Wide Field Ophthalmic Photography Stereographic Projection Image Storage',\n  '1.2.840.10008.5.1.4.1.1.77.1.5.6':'Wide Field Ophthalmic Photography 3D Coordinates Image Storage',\n  '1.2.840.10008.5.1.4.1.1.77.1.6':'VL Whole Slide Microscopy Image Storage',\n  '1.2.840.10008.5.1.4.1.1.78.1':'Lensometry Measurements Storage',\n  '1.2.840.10008.5.1.4.1.1.78.2':'Autorefraction Measurements Storage',\n  '1.2.840.10008.5.1.4.1.1.78.3':'Keratometry Measurements Storage',\n  '1.2.840.10008.5.1.4.1.1.78.4':'Subjective Refraction Measurements Storage',\n  '1.2.840.10008.5.1.4.1.1.78.5':'Visual Acuity Measurements Storage',\n  '1.2.840.10008.5.1.4.1.1.78.6':'Spectacle Prescription Report Storage',\n  '1.2.840.10008.5.1.4.1.1.78.7':'Ophthalmic Axial Measurements Storage',\n  '1.2.840.10008.5.1.4.1.1.78.8':'Intraocular Lens Calculations Storage',\n  '1.2.840.10008.5.1.4.1.1.79.1':'Macular Grid Thickness and Volume Report Storage',\n  '1.2.840.10008.5.1.4.1.1.80.1':'Ophthalmic Visual Field Static Perimetry Measurements Storage',\n  '1.2.840.10008.5.1.4.1.1.81.1':'Ophthalmic Thickness Map Storage',\n  '1.2.840.10008.5.1.4.1.1.82.1':'Corneal Topography Map Storage',\n  '1.2.840.10008.5.1.4.1.1.88.1':'Text SR Storage - Trial (Retired)',\n  '1.2.840.10008.5.1.4.1.1.88.2':'Audio SR Storage - Trial (Retired)',\n  '1.2.840.10008.5.1.4.1.1.88.3':'Detail SR Storage - Trial (Retired)',\n  '1.2.840.10008.5.1.4.1.1.88.4':'Comprehensive SR Storage - Trial (Retired)',\n  '1.2.840.10008.5.1.4.1.1.88.11':'Basic Text SR Storage',\n  '1.2.840.10008.5.1.4.1.1.88.22':'Enhanced SR Storage',\n  '1.2.840.10008.5.1.4.1.1.88.33':'Comprehensive SR Storage',\n  '1.2.840.10008.5.1.4.1.1.88.34':'Comprehensive 3D SR Storage',\n  '1.2.840.10008.5.1.4.1.1.88.35':'Extensible SR Storage',\n  '1.2.840.10008.5.1.4.1.1.88.40':'Procedure Log Storage',\n  '1.2.840.10008.5.1.4.1.1.88.50':'Mammography CAD SR Storage',\n  '1.2.840.10008.5.1.4.1.1.88.59':'Key Object Selection Document Storage',\n  '1.2.840.10008.5.1.4.1.1.88.65':'Chest CAD SR Storage',\n  '1.2.840.10008.5.1.4.1.1.88.67':'X-Ray Radiation Dose SR Storage',\n  '1.2.840.10008.5.1.4.1.1.88.68':'Radiopharmaceutical Radiation Dose SR Storage',\n  '1.2.840.10008.5.1.4.1.1.88.69':'Colon CAD SR Storage',\n  '1.2.840.10008.5.1.4.1.1.88.70':'Implantation Plan SR Storage',\n  '1.2.840.10008.5.1.4.1.1.104.1':'Encapsulated PDF Storage',\n  '1.2.840.10008.5.1.4.1.1.104.2':'Encapsulated CDA Storage',\n  '1.2.840.10008.5.1.4.1.1.128':'Positron Emission Tomography Image Storage',\n  '1.2.840.10008.5.1.4.1.1.128.1':'Legacy Converted Enhanced PET Image Storage',\n  '1.2.840.10008.5.1.4.1.1.129':'Standalone PET Curve Storage (Retired)',\n  '1.2.840.10008.5.1.4.1.1.130':'Enhanced PET Image Storage',\n  '1.2.840.10008.5.1.4.1.1.131':'Basic Structured Display Storage',\n  '1.2.840.10008.5.1.4.1.1.481.1':'RT Image Storage',\n  '1.2.840.10008.5.1.4.1.1.481.2':'RT Dose Storage',\n  '1.2.840.10008.5.1.4.1.1.481.3':'RT Structure Set Storage',\n  '1.2.840.10008.5.1.4.1.1.481.4':'RT Beams Treatment Record Storage',\n  '1.2.840.10008.5.1.4.1.1.481.5':'RT Plan Storage',\n  '1.2.840.10008.5.1.4.1.1.481.6':'RT Brachy Treatment Record Storage',\n  '1.2.840.10008.5.1.4.1.1.481.7':'RT Treatment Summary Record Storage',\n  '1.2.840.10008.5.1.4.1.1.481.8':'RT Ion Plan Storage',\n  '1.2.840.10008.5.1.4.1.1.481.9':'RT Ion Beams Treatment Record Storage',\n  '1.2.840.10008.5.1.4.1.1.501.1':'DICOS CT Image Storage',\n  '1.2.840.10008.5.1.4.1.1.501.2.1':'DICOS Digital X-Ray Image Storage - For Presentation',\n  '1.2.840.10008.5.1.4.1.1.501.2.2':'DICOS Digital X-Ray Image Storage - For Processing',\n  '1.2.840.10008.5.1.4.1.1.501.3':'DICOS Threat Detection Report Storage',\n  '1.2.840.10008.5.1.4.1.1.501.4':'DICOS 2D AIT Storage',\n  '1.2.840.10008.5.1.4.1.1.501.5':'DICOS 3D AIT Storage',\n  '1.2.840.10008.5.1.4.1.1.501.6':'DICOS Quadrupole Resonance (QR) Storage',\n  '1.2.840.10008.5.1.4.1.1.601.1':'Eddy Current Image Storage',\n  '1.2.840.10008.5.1.4.1.1.601.2':'Eddy Current Multi-frame Image Storage',\n  '1.2.840.10008.5.1.4.1.2.1.1':'Patient Root Query/Retrieve Information Model - FIND',\n  '1.2.840.10008.5.1.4.1.2.1.2':'Patient Root Query/Retrieve Information Model - MOVE',\n  '1.2.840.10008.5.1.4.1.2.1.3':'Patient Root Query/Retrieve Information Model - GET',\n  '1.2.840.10008.5.1.4.1.2.2.1':'Study Root Query/Retrieve Information Model - FIND',\n  '1.2.840.10008.5.1.4.1.2.2.2':'Study Root Query/Retrieve Information Model - MOVE',\n  '1.2.840.10008.5.1.4.1.2.2.3':'Study Root Query/Retrieve Information Model - GET',\n  '1.2.840.10008.5.1.4.1.2.3.1':'Patient/Study Only Query/Retrieve Information Model - FIND (Retired)',\n  '1.2.840.10008.5.1.4.1.2.3.2':'Patient/Study Only Query/Retrieve Information Model - MOVE (Retired)',\n  '1.2.840.10008.5.1.4.1.2.3.3':'Patient/Study Only Query/Retrieve Information Model - GET (Retired)',\n  '1.2.840.10008.5.1.4.1.2.4.2':'Composite Instance Root Retrieve - MOVE',\n  '1.2.840.10008.5.1.4.1.2.4.3':'Composite Instance Root Retrieve - GET',\n  '1.2.840.10008.5.1.4.1.2.5.3':'Composite Instance Retrieve Without Bulk Data - GET',\n  '1.2.840.10008.5.1.4.31':'Modality Worklist Information Model - FIND',\n  '1.2.840.10008.5.1.4.32':'General Purpose Worklist Management Meta SOP Class (Retired)',\n  '1.2.840.10008.5.1.4.32.1':'General Purpose Worklist Information Model - FIND (Retired)',\n  '1.2.840.10008.5.1.4.32.2':'General Purpose Scheduled Procedure Step SOP Class (Retired)',\n  '1.2.840.10008.5.1.4.32.3':'General Purpose Performed Procedure Step SOP Class (Retired)',\n  '1.2.840.10008.5.1.4.33':'Instance Availability Notification SOP Class',\n  '1.2.840.10008.5.1.4.34.1':'RT Beams Delivery Instruction Storage - Trial (Retired)',\n  '1.2.840.10008.5.1.4.34.2':'RT Conventional Machine Verification - Trial (Retired)',\n  '1.2.840.10008.5.1.4.34.3':'RT Ion Machine Verification - Trial (Retired)',\n  '1.2.840.10008.5.1.4.34.4':'Unified Worklist and Procedure Step Service Class - Trial (Retired)',\n  '1.2.840.10008.5.1.4.34.4.1':'Unified Procedure Step - Push SOP Class - Trial (Retired)',\n  '1.2.840.10008.5.1.4.34.4.2':'Unified Procedure Step - Watch SOP Class - Trial (Retired)',\n  '1.2.840.10008.5.1.4.34.4.3':'Unified Procedure Step - Pull SOP Class - Trial (Retired)',\n  '1.2.840.10008.5.1.4.34.4.4':'Unified Procedure Step - Event SOP Class - Trial (Retired)',\n  '1.2.840.10008.5.1.4.34.5':'UPS Global Subscription SOP Instance',\n  '1.2.840.10008.5.1.4.34.5.1':'UPS Filtered Global Subscription SOP Instance',\n  '1.2.840.10008.5.1.4.34.6':'Unified Worklist and Procedure Step Service Class',\n  '1.2.840.10008.5.1.4.34.6.1':'Unified Procedure Step - Push SOP Class',\n  '1.2.840.10008.5.1.4.34.6.2':'Unified Procedure Step - Watch SOP Class',\n  '1.2.840.10008.5.1.4.34.6.3':'Unified Procedure Step - Pull SOP Class',\n  '1.2.840.10008.5.1.4.34.6.4':'Unified Procedure Step - Event SOP Class',\n  '1.2.840.10008.5.1.4.34.7':'RT Beams Delivery Instruction Storage',\n  '1.2.840.10008.5.1.4.34.8':'RT Conventional Machine Verification',\n  '1.2.840.10008.5.1.4.34.9':'RT Ion Machine Verification',\n  '1.2.840.10008.5.1.4.37.1':'General Relevant Patient Information Query',\n  '1.2.840.10008.5.1.4.37.2':'Breast Imaging Relevant Patient Information Query',\n  '1.2.840.10008.5.1.4.37.3':'Cardiac Relevant Patient Information Query',\n  '1.2.840.10008.5.1.4.38.1':'Hanging Protocol Storage',\n  '1.2.840.10008.5.1.4.38.2':'Hanging Protocol Information Model - FIND',\n  '1.2.840.10008.5.1.4.38.3':'Hanging Protocol Information Model - MOVE',\n  '1.2.840.10008.5.1.4.38.4':'Hanging Protocol Information Model - GET',\n  '1.2.840.10008.5.1.4.39.1':'Color Palette Storage',\n  '1.2.840.10008.5.1.4.39.2':'Color Palette Information Model - FIND',\n  '1.2.840.10008.5.1.4.39.3':'Color Palette Information Model - MOVE',\n  '1.2.840.10008.5.1.4.39.4':'Color Palette Information Model - GET',\n  '1.2.840.10008.5.1.4.41':'Product Characteristics Query SOP Class',\n  '1.2.840.10008.5.1.4.42':'Substance Approval Query SOP Class',\n  '1.2.840.10008.5.1.4.43.1':'Generic Implant Template Storage',\n  '1.2.840.10008.5.1.4.43.2':'Generic Implant Template Information Model - FIND',\n  '1.2.840.10008.5.1.4.43.3':'Generic Implant Template Information Model - MOVE',\n  '1.2.840.10008.5.1.4.43.4':'Generic Implant Template Information Model - GET',\n  '1.2.840.10008.5.1.4.44.1':'Implant Assembly Template Storage',\n  '1.2.840.10008.5.1.4.44.2':'Implant Assembly Template Information Model - FIND',\n  '1.2.840.10008.5.1.4.44.3':'Implant Assembly Template Information Model - MOVE',\n  '1.2.840.10008.5.1.4.44.4':'Implant Assembly Template Information Model - GET',\n  '1.2.840.10008.5.1.4.45.1':'Implant Template Group Storage',\n  '1.2.840.10008.5.1.4.45.2':'Implant Template Group Information Model - FIND',\n  '1.2.840.10008.5.1.4.45.3':'Implant Template Group Information Model - MOVE',\n  '1.2.840.10008.5.1.4.45.4':'Implant Template Group Information Model - GET',\n  '1.2.840.10008.7.1.1':'Native DICOM Model',\n  '1.2.840.10008.7.1.2':'Abstract Multi-Dimensional Image Model',\n  '1.2.840.10008.8.1.1':'DICOM Content Mapping Resource',\n  '1.2.840.10008.15.0.3.1':'dicomDeviceName',\n  '1.2.840.10008.15.0.3.2':'dicomDescription',\n  '1.2.840.10008.15.0.3.3':'dicomManufacturer',\n  '1.2.840.10008.15.0.3.4':'dicomManufacturerModelName',\n  '1.2.840.10008.15.0.3.5':'dicomSoftwareVersion',\n  '1.2.840.10008.15.0.3.6':'dicomVendorData',\n  '1.2.840.10008.15.0.3.7':'dicomAETitle',\n  '1.2.840.10008.15.0.3.8':'dicomNetworkConnectionReference',\n  '1.2.840.10008.15.0.3.9':'dicomApplicationCluster',\n  '1.2.840.10008.15.0.3.10':'dicomAssociationInitiator',\n  '1.2.840.10008.15.0.3.11':'dicomAssociationAcceptor',\n  '1.2.840.10008.15.0.3.12':'dicomHostname',\n  '1.2.840.10008.15.0.3.13':'dicomPort',\n  '1.2.840.10008.15.0.3.14':'dicomSOPClass',\n  '1.2.840.10008.15.0.3.15':'dicomTransferRole',\n  '1.2.840.10008.15.0.3.16':'dicomTransferSyntax',\n  '1.2.840.10008.15.0.3.17':'dicomPrimaryDeviceType',\n  '1.2.840.10008.15.0.3.18':'dicomRelatedDeviceReference',\n  '1.2.840.10008.15.0.3.19':'dicomPreferredCalledAETitle',\n  '1.2.840.10008.15.0.3.20':'dicomTLSCyphersuite',\n  '1.2.840.10008.15.0.3.21':'dicomAuthorizedNodeCertificateReference',\n  '1.2.840.10008.15.0.3.22':'dicomThisNodeCertificateReference',\n  '1.2.840.10008.15.0.3.23':'dicomInstalled',\n  '1.2.840.10008.15.0.3.24':'dicomStationName',\n  '1.2.840.10008.15.0.3.25':'dicomDeviceSerialNumber',\n  '1.2.840.10008.15.0.3.26':'dicomInstitutionName',\n  '1.2.840.10008.15.0.3.27':'dicomInstitutionAddress',\n  '1.2.840.10008.15.0.3.28':'dicomInstitutionDepartmentName',\n  '1.2.840.10008.15.0.3.29':'dicomIssuerOfPatientID',\n  '1.2.840.10008.15.0.3.30':'dicomPreferredCallingAETitle',\n  '1.2.840.10008.15.0.3.31':'dicomSupportedCharacterSet',\n  '1.2.840.10008.15.0.4.1':'dicomConfigurationRoot',\n  '1.2.840.10008.15.0.4.2':'dicomDevicesRoot',\n  '1.2.840.10008.15.0.4.3':'dicomUniqueAETitlesRegistryRoot',\n  '1.2.840.10008.15.0.4.4':'dicomDevice',\n  '1.2.840.10008.15.0.4.5':'dicomNetworkAE',\n  '1.2.840.10008.15.0.4.6':'dicomNetworkConnection',\n  '1.2.840.10008.15.0.4.7':'dicomUniqueAETitle',\n  '1.2.840.10008.15.0.4.8':'dicomTransferCapability',\n  '1.2.840.10008.15.1.1':'Universal Coordinated Time',\n};\n","\r\nexport const SETTINGS_SAVEAS = 'saveAs'\r\nexport const SETTINGS_DCMHEADER = 'exportAs'\r\nexport const SETTINGS_OVERLAY = 'overlay'\r\nexport const SETTINGS_MEASUREMENT = 'measurement'","import React, { PureComponent } from 'react'\r\nimport Button from '@material-ui/core/Button'\r\nimport Dialog from '@material-ui/core/Dialog'\r\nimport DialogActions from '@material-ui/core/DialogActions'\r\nimport DialogContent from '@material-ui/core/DialogContent'\r\nimport DialogTitle from '@material-ui/core/DialogTitle'\r\nimport LinearProgress from '@material-ui/core/LinearProgress'\r\n\r\nclass OpenUrlDlg extends PureComponent {\r\n\r\n  hide = () => {\r\n    this.props.onClose()\r\n  }\r\n\r\n  cancel = () => {\r\n    window.stop()\r\n    this.hide()\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <Dialog\r\n            open={true}\r\n            onClose={this.hide}\r\n            aria-labelledby=\"alert-dialog-title\"\r\n        >\r\n            <DialogTitle id=\"alert-dialog-title\">{\"Downloading file ...\"}</DialogTitle>\r\n            <DialogContent>\r\n              <LinearProgress variant=\"determinate\" value={this.props.progress} color='secondary' />\r\n            </DialogContent>\r\n            <DialogActions>\r\n                <Button onClick={this.cancel}>\r\n                    Cancel\r\n                </Button>\r\n            </DialogActions>\r\n        </Dialog>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default OpenUrlDlg\r\n","import React, { PureComponent } from 'react'\r\nimport Icon from '@mdi/react'\r\nimport IconButton from '@material-ui/core/IconButton'\r\n\r\nimport { \r\n    mdiPlay,\r\n    mdiPause,\r\n    mdiSkipBackward,\r\n    mdiSkipForward,\r\n    mdiSkipNext,\r\n    mdiSkipPrevious,\r\n  } from '@mdi/js'\r\n\r\nconst iconColor = '#FFFFFF'\r\n\r\nclass CinePlayer extends PureComponent {\r\n    firstframe = () => {\r\n        this.props.runCinePlayer('firstframe') \r\n    }\r\n\r\n    previousframe = () => {\r\n        this.props.runCinePlayer('previousframe') \r\n    }\r\n\r\n    play = () => {\r\n        this.props.runCinePlayer('play') \r\n    }\r\n\r\n    pause = () => {\r\n        this.props.runCinePlayer('pause') \r\n    }\r\n\r\n    nextframe = () => {\r\n        this.props.runCinePlayer('nextframe') \r\n    }\r\n\r\n    lastframe = () => {\r\n        this.props.runCinePlayer('lastframe') \r\n    }\r\n\r\n    render() {\r\n        let play = null\r\n        if (!this.props.inPlay) {\r\n            play = <IconButton onClick={this.play}>\r\n                        <Icon path={mdiPlay} size={'1.5rem'} color={iconColor} />\r\n                   </IconButton>          \r\n        } else {\r\n            play = <IconButton onClick={this.pause}>\r\n                        <Icon path={mdiPause} size={'1.5rem'} color={iconColor} />\r\n                   </IconButton>  \r\n        }\r\n        return (\r\n            <div style={{ width:240, margin:'0 auto' }}>\r\n                <IconButton onClick={this.firstframe}>\r\n                    <Icon path={mdiSkipBackward} size={'1.5rem'} color={iconColor} />\r\n                </IconButton>\r\n                <IconButton onClick={this.previousframe}>\r\n                    <Icon path={mdiSkipPrevious} size={'1.5rem'} color={iconColor} />\r\n                </IconButton>\r\n                {play}\r\n                <IconButton onClick={this.nextframe}>\r\n                    <Icon path={mdiSkipNext} size={'1.5rem'} color={iconColor} />\r\n                </IconButton>\r\n                <IconButton onClick={this.lastframe}>\r\n                    <Icon path={mdiSkipForward} size={'1.5rem'} color={iconColor} />\r\n                </IconButton>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default CinePlayer\r\n","import { \r\n    SETTINGS_SAVEAS, \r\n    SETTINGS_DCMHEADER, \r\n    SETTINGS_OVERLAY, \r\n    SETTINGS_MEASUREMENT\r\n} from './constants/settings'\r\n\r\n// To see the console output set the key 'debug-u-dicom-viewer' in \r\n// 'Storage->Local Storage' panel of your browser Develop Tool\r\nexport function log() {\r\n    let log = localStorage.getItem('debug-u-dicom-viewer')\r\n    if (log === null) {\r\n        console.log = function(){}\r\n    }\r\n}\r\n\r\nexport function isUrlImage(url) {\r\n    return(url.match(/\\.(jpeg|jpg|png)$/) != null)\r\n}\r\n\r\nexport function isFileImage(file) {\r\n    const acceptedImageTypes = ['image/jpeg', 'image/png'] // 'image/gif', \r\n    return file && acceptedImageTypes.includes(file['type'])\r\n}\r\n\r\nexport function getSettingsSaveAs() {\r\n    let saveAs = localStorage.getItem(SETTINGS_SAVEAS)\r\n    if (saveAs === null) {\r\n      saveAs = \"png\"\r\n      localStorage.setItem(SETTINGS_SAVEAS, saveAs)\r\n    }\r\n    return saveAs\r\n}\r\n\r\nexport function setSettingsSaveAs(value) {\r\n    localStorage.setItem(SETTINGS_SAVEAS, value)  \r\n}\r\n\r\nexport function getSettingsDcmHeader() {\r\n    let exportAs = localStorage.getItem(SETTINGS_DCMHEADER)\r\n    if (exportAs === null) {\r\n      exportAs = \"json\"\r\n      localStorage.setItem(SETTINGS_DCMHEADER, exportAs)\r\n    }  \r\n    return exportAs\r\n}\r\n\r\nexport function setSettingsDcmHeader(value) {\r\n    localStorage.setItem(SETTINGS_DCMHEADER, value)  \r\n}\r\n\r\nexport function getSettingsOverlay() {\r\n    let overlay = localStorage.getItem(SETTINGS_OVERLAY)\r\n    if (overlay === null) {\r\n      overlay = \"1\"\r\n      localStorage.setItem(SETTINGS_OVERLAY, overlay)\r\n    }\r\n    return overlay === '1'\r\n}\r\n\r\nexport function setSettingsOverlay(value) {\r\n    localStorage.setItem(SETTINGS_OVERLAY, value ? '1' : '0')  \r\n}\r\n\r\nexport function getSettingsMeasurement() {\r\n    let measurement = localStorage.getItem(SETTINGS_MEASUREMENT)\r\n    if (measurement === null) {\r\n        measurement = \"1\"\r\n      localStorage.setItem(SETTINGS_MEASUREMENT, measurement)\r\n    }\r\n    return measurement\r\n}\r\n\r\nexport function setSettingsMeasurement(value) {\r\n    localStorage.setItem(SETTINGS_MEASUREMENT, value)  \r\n}\r\n\r\n\r\n/**\r\n * Converts a value to a string appropriate for entry into a CSV table.  E.g., a string value will be surrounded by quotes.\r\n * @param {string|number|object} theValue\r\n */\r\nfunction toCsvValue(theValue) {\r\n    let t = typeof theValue,\r\n        output\r\n\r\n    let sDelimiter = '\"'\r\n\r\n    if (t === 'undefined' || t === null) {\r\n        output = ''\r\n    } else if (t === 'string') {\r\n        output = sDelimiter + theValue.replace(/\"/g, '\"\"') + sDelimiter\r\n    } else {\r\n        output = sDelimiter + String(theValue).replace(/\"/g, '\"\"') + sDelimiter\r\n    }\r\n\r\n    return output\r\n}\r\n\r\n/**\r\n * Converts an array of objects (with identical schemas) into a CSV table.\r\n * @param {Array} objArray An array of objects.  Each object in the array must have the same property list.\r\n * @param {string} cDelimiter The column delimiter.  Defaults to a comma (,) if omitted.\r\n * @return {string} The CSV equivalent of objArray.\r\n */\r\nexport function toCsv(objArray, cDelimiter) {\r\n    var i,\r\n        l,\r\n        names = [],\r\n        name,\r\n        value,\r\n        obj,\r\n        row,\r\n        output = '',\r\n        n,\r\n        nl\r\n\r\n    // Initialize default parameters.\r\n\r\n    let sDelimiter = '\"'\r\n    if (typeof cDelimiter === 'undefined' || cDelimiter === null) {\r\n        cDelimiter = ','\r\n    }\r\n\r\n    for (i = 0, l = objArray.length; i < l; i += 1) {\r\n        // Get the names of the properties.\r\n        obj = objArray[i]\r\n        row = ''\r\n        if (i === 0) {\r\n            // Loop through the names\r\n            for (name in obj) {\r\n                if (obj.hasOwnProperty(name)) {\r\n                    names.push(name)\r\n                    row += [\r\n                        sDelimiter,\r\n                        name.replace(/\"/g, '\"\"'),\r\n                        sDelimiter,\r\n                        cDelimiter,\r\n                    ].join('')\r\n                }\r\n            }\r\n            row = row.substring(0, row.length - 1)\r\n            output += row\r\n        }\r\n\r\n        output += '\\n'\r\n        row = ''\r\n        for (n = 0, nl = names.length; n < nl; n += 1) {\r\n            name = names[n]\r\n            value = obj[name]\r\n            if (n > 0) {\r\n                row += cDelimiter\r\n            }\r\n            row += toCsvValue(value)\r\n        }\r\n        output += row\r\n    }\r\n\r\n    return output\r\n}\r\n\r\n","import Dexie from 'dexie'\r\n\r\nconst db = new Dexie('udvDB')\r\n\r\ndb.version(1).stores({ \r\n    measurement: '++id, sopinstanceuid, tool' \r\n})\r\n\r\ndb.open()\r\n\r\nexport default db\r\n","import React from \"react\"\r\nimport Button from '@material-ui/core/Button'\r\nimport Dialog from '@material-ui/core/Dialog'\r\nimport DialogActions from '@material-ui/core/DialogActions'\r\nimport DialogContent from '@material-ui/core/DialogContent'\r\nimport DialogContentText from '@material-ui/core/DialogContentText'\r\nimport DialogTitle from '@material-ui/core/DialogTitle'\r\nimport Link from '@material-ui/core/Link'\r\nimport Typography from '@material-ui/core/Typography'\r\nimport Hammer from \"hammerjs\"\r\nimport * as cornerstone from \"cornerstone-core\"\r\nimport * as cornerstoneTools from \"cornerstone-tools\"\r\nimport * as cornerstoneMath from \"cornerstone-math\"\r\nimport * as cornerstoneFileImageLoader from \"cornerstone-file-image-loader\"\r\nimport * as cornerstoneWebImageLoader from \"cornerstone-web-image-loader\"\r\nimport * as cornerstoneWADOImageLoader from \"cornerstone-wado-image-loader\"\r\nimport * as dicomParser from 'dicom-parser'\r\nimport {connect} from 'react-redux'\r\nimport {clearStore, dcmIsOpen, activeDcm, dcmTool, activeMeasurements} from '../actions'\r\nimport {uids} from '../constants/uids'\r\nimport { SETTINGS_SAVEAS } from '../constants/settings'\r\nimport OpenUrlDlg from './OpenUrlDlg'\r\nimport CinePlayer from './CinePlayer'\r\nimport { getSettingsOverlay } from '../functions'\r\nimport { isMobile } from 'react-device-detect'\r\nimport { import as csTools } from 'cornerstone-tools'\r\nimport db from '../db/db'\r\nimport { isFileImage } from '../functions'\r\nimport { isUrlImage } from '../functions'\r\nconst scrollToIndex = csTools('util/scrollToIndex')\r\n\r\n\r\nfunction getBlobUrl(url) {\r\n  const baseUrl = window.URL || window.webkitURL;\r\n  const blob = new Blob([`importScripts('${url}')`], {type: \"application/javascript\"});\r\n  return baseUrl.createObjectURL(blob);\r\n}\r\n\r\nlet webWorkerUrl = getBlobUrl(\r\n  \"https://unpkg.com/cornerstone-wado-image-loader@3.0.0/dist/cornerstoneWADOImageLoaderWebWorker.min.js\"\r\n)\r\nlet codecsUrl = getBlobUrl(\r\n  \"https://unpkg.com/cornerstone-wado-image-loader@3.0.0/dist/cornerstoneWADOImageLoaderCodecs.js\"\r\n  // \"https://unpkg.com/cornerstone-wado-image-loader/dist/cornerstoneWADOImageLoaderCodecs.js\"\r\n)\r\n// See componentDidMount line 110 for initialization, registration\r\nconst config = {\r\n  maxWebWorkers: 4, //\r\n  //startWebWorkersOnDemand: true, //\r\n  webWorkerPath: webWorkerUrl,\r\n  //webWorkerTaskPaths: [], //\r\n  taskConfiguration: {\r\n    decodeTask: {\r\n      //loadCodecsOnStartup: true, //\r\n      //initializeCodecsOnStartup: false, //\r\n      codecsPath: codecsUrl,\r\n      //usePDFJS: false, //\r\n      //strict: true //\r\n    }\r\n  }\r\n}\r\ncornerstoneTools.external.cornerstone = cornerstone\r\ncornerstoneTools.external.cornerstoneMath = cornerstoneMath\r\ncornerstoneFileImageLoader.external.cornerstone = cornerstone\r\ncornerstoneWebImageLoader.external.cornerstone = cornerstone\r\ncornerstoneWADOImageLoader.external.cornerstone = cornerstone\r\ncornerstoneWADOImageLoader.webWorkerManager.initialize(config)\r\ncornerstoneWADOImageLoader.external.dicomParser = dicomParser\r\ncornerstoneTools.external.Hammer = Hammer\r\ncornerstoneTools.init()\r\n\r\n//console.log({ cornerstone })\r\n//console.log({ cornerstoneWADOImageLoader })\r\n//console.log({ dicomParser })\r\n\r\nclass DicomViewer extends React.Component {\r\n    constructor(props) {\r\n      super(props)\r\n      this.localfile = null\r\n      this.localurl = null\r\n      this.dicomImage = null\r\n      this.imageId = null\r\n      this.image = null\r\n      this.isDicom = false\r\n      this.numberOfFrames = 1\r\n      this.measurements = []\r\n    }\r\n\r\n    state = { \r\n      file: null,\r\n      visibleOpenUrlDlg: false,\r\n      progress: null,\r\n      visibleCinePlayer: false,\r\n      errorOnOpenImage: null,\r\n      errorOnCors: false,\r\n      frame: 1,\r\n      inPlay: false,\r\n      viewport: null,\r\n    }\r\n  \r\n    componentDidMount() {\r\n      this.props.runTool(this)\r\n      this.props.changeTool(this)\r\n      cornerstone.events.addEventListener('cornerstoneimageloaded', this.onImageLoaded)\r\n      const { dcmRef } = this.props\r\n      dcmRef(this)          \r\n    }\r\n\r\n    componentWillUnmount() {\r\n      this.props.runTool(undefined)\r\n      this.props.changeTool(undefined)\r\n      const { dcmRef } = this.props\r\n      dcmRef(undefined)            \r\n    }\r\n\r\n    componentDidUpdate(previousProps) {\r\n      const isOpen = this.props.isOpen[this.props.index]\r\n      if (this.props.layout !== previousProps.layout && isOpen) {\r\n        //console.log('dicomImage: ', this.dicomImage)\r\n        cornerstone.resize(this.dicomImage)        \r\n      }\r\n    }\r\n  \r\n    onOpenUrl = (e) => {\r\n      const eventData = e.detail\r\n      this.setState({ progress: eventData.percentComplete })\r\n    }\r\n\r\n    showOpenUrlDlg = (url) => {\r\n      this.setState({ visibleOpenUrlDlg: true }, () => {\r\n        cornerstone.events.addEventListener('cornerstoneimageloadprogress', this.onOpenUrl)\r\n        this.loadImage(undefined, url)\r\n      })\r\n    }\r\n  \r\n    hideOpenUrlDlg = () => {\r\n      this.setState({ visibleOpenUrlDlg: false, progress: null })\r\n    }\r\n\r\n    measurementSave = (measure) => {\r\n      this.measurements.push(measure) \r\n    }\r\n\r\n    measurementClear = () => {\r\n      this.measurements.splice(0, this.measurements.length)\r\n    }\r\n\r\n    measurementRemove = (index) => {\r\n      //console.log('this.measurements: ', this.measurements)\r\n      this.measurements.splice(index, 1)\r\n    }    \r\n\r\n    getTransferSyntax = () => {\r\n      const value = this.image.data.string('x00020010')\r\n      return value + ' [' + uids[value] + ']'\r\n    }\r\n\r\n    getSopClass = () => {\r\n      const value = this.image.data.string('x00080016')\r\n      return value + ' [' + uids[value] + ']'\r\n    }\r\n\r\n    getSopInstanceUID = () => {\r\n      const value = this.image.data.string('x00080018')\r\n      return value\r\n    }\r\n\r\n    getPixelRepresentation = () => {\r\n      const value = this.image.data.uint16('x00280103')\r\n      if (value === undefined) return\r\n      return value + (value === 0 ? ' (unsigned)' : ' (signed)')\r\n    }\r\n\r\n    getPlanarConfiguration = () => {\r\n      const value = this.image.data.uint16('x00280006')\r\n      if (value === undefined) return \r\n      return value + (value === 0 ? ' (pixel)' : ' (plane)')\r\n    }\r\n\r\n    \r\n    onImageLoaded = (e) => {\r\n      //console.log('cornerstoneimageloaded: ')\r\n\r\n    }\r\n\r\n    // Listen for changes to the viewport so we can update the text overlays in the corner\r\n    onImageRendered = (e) => {\r\n      //console.log('cornerstoneimagerendered: ')\r\n\r\n      const viewport = cornerstone.getViewport(e.target)\r\n\r\n      //console.log('viewport: ', viewport)\r\n\r\n      if (this.isDicom) document.getElementById(\r\n        `mrtopleft-${this.props.index}`\r\n      ).textContent = `${this.PatientsName}`\r\n\r\n      document.getElementById(\r\n        `mrtopright-${this.props.index}`\r\n      ).textContent = `${viewport.displayedArea.brhc.x}x${viewport.displayedArea.brhc.y}`\r\n\r\n      document.getElementById(\r\n        `mrbottomleft-${this.props.index}`\r\n      ).textContent = `WW/WC: ${Math.round(viewport.voi.windowWidth)}/${Math.round(viewport.voi.windowCenter)}`\r\n\r\n      document.getElementById(\r\n        `mrbottomright-${this.props.index}`\r\n      ).textContent = `Zoom: ${Math.round(viewport.scale.toFixed(2)*100)}%`\r\n\r\n      if (this.isDicom && this.state.visibleCinePlayer && this.numberOfFrames > 1) {\r\n        document.getElementById(\r\n          `frameLabel-${this.props.index}`\r\n        ).textContent = `${this.state.frame} / ${this.numberOfFrames}`\r\n        if (this.state.inPlay) {\r\n          let frame = this.state.frame === this.numberOfFrames ? 1 : this.state.frame+1\r\n          this.setState({frame: frame})\r\n        }\r\n      }\r\n      \r\n    }\r\n\r\n    onMeasurementModified = (e) => {\r\n      //console.log('cornerstonetoolsmeasurementmodified: ', e.detail.measurementData)\r\n    }\r\n\r\n    onMeasurementCompleted = (e) => {\r\n      //console.log('cornerstonetoolsmeasurementcompleted: ', e.detail.measurementData)\r\n      \r\n      const measure = {\r\n        tool: this.props.tool,\r\n        note: '',\r\n        data: e.detail.measurementData\r\n      }\r\n      //this.props.measurementStore(measure)\r\n      this.measurementSave(measure)\r\n      this.props.setActiveMeasurements(this.measurements)\r\n      //console.log('this.measurements: ', this.measurements)\r\n    }\r\n    \r\n    onErrorOpenImageClose = () => {\r\n      this.setState({errorOnOpenImage: null})\r\n    }\r\n\r\n    onErrorCorsClose = () => {\r\n      this.setState({errorOnCors: false})\r\n    }    \r\n\r\n    loadImage = (localfile, url=undefined) => {\r\n      //console.log('loadImage, localfile: ', localfile)\r\n      //console.log('loadImage, url: ', url)\r\n\r\n      if (localfile === undefined && url === undefined) return\r\n      \r\n      if (localfile !== undefined) {\r\n        //this.props.localfileStore(localfile)\r\n        this.localfile = localfile\r\n      } else {\r\n        //this.props.urlStore(url)\r\n        this.localurl = url\r\n      }\r\n \r\n      const element = this.dicomImage\r\n\r\n      element.addEventListener(\"cornerstonenewimage\", this.onNewImage)\r\n      element.addEventListener(\"cornerstoneimagerendered\", this.onImageRendered)\r\n      element.addEventListener(\"cornerstonetoolsmeasurementadded\", this.onMeasurementAdded)\r\n      element.addEventListener(\"cornerstonetoolsmeasurementmodified\", this.onMeasurementModified)\r\n      element.addEventListener(\"cornerstonetoolsmeasurementcompleted\", this.onMeasurementCompleted)\r\n\r\n      let imageId = undefined\r\n\r\n      cornerstone.enable(element)\r\n\r\n      if (localfile === undefined && isUrlImage(url)) { // check if it's a simple image [jpeg or png] from url\r\n        //const file = \"file:///C:/GARBAGE/_DCM/\"+localfile.name\r\n        //console.log('image: ', file)\r\n        cornerstone.loadImage(url).then(image => {\r\n          console.log('loadImage, image from url: ', image)\r\n\r\n          this.hideOpenUrlDlg()\r\n\r\n          this.image = image\r\n\r\n          //this.setState({isDicom: false})\r\n          this.isDicom = false\r\n\r\n          cornerstone.displayImage(element, image)\r\n          \r\n          this.enableTool()\r\n\r\n          this.props.setActiveDcm({image: this.image, element: this.dicomImage, isDicom: this.isDicom})\r\n          this.props.isOpenStore(true)\r\n\r\n        }, (e) => {\r\n          console.log('error', e)\r\n          this.setState({errorOnOpenImage: \"This is not a valid JPG or PNG file.\"})\r\n        })\r\n\r\n      } else if (localfile !== undefined && isFileImage(localfile)) { // otherwise try to open as local image file (JPEG, PNG) \r\n        imageId = cornerstoneFileImageLoader.fileManager.add(localfile)\r\n        cornerstone.loadImage(imageId).then(image => {\r\n          //console.log('loadImage, image from local: ', image)\r\n\r\n          this.image = image\r\n\r\n          this.isDicom = false\r\n\r\n          cornerstone.displayImage(element, image)\r\n          \r\n          this.enableTool()\r\n\r\n          this.props.setActiveDcm({image: this.image, element: this.dicomImage, isDicom: this.isDicom})\r\n          this.props.isOpenStore(true)\r\n\r\n        }, (e) => {\r\n          console.log('error', e)\r\n          this.setState({errorOnOpenImage: \"This is not a valid JPG or PNG file.\"})\r\n        })\r\n\r\n      } else { // otherwise try to open as Dicom file\r\n\r\n        if (localfile !== undefined) {\r\n          imageId = cornerstoneWADOImageLoader.wadouri.fileManager.add(localfile)\r\n        } else { // it's a web dicom image\r\n          imageId = \"wadouri:\"+url\r\n        }\r\n  \r\n        console.log('loadImage, imageId: ', imageId)\r\n\r\n        cornerstone.loadAndCacheImage(imageId).then(image => {\r\n          //console.log('loadImage, image: ', image)\r\n\r\n          this.hideOpenUrlDlg()\r\n\r\n          this.image = image\r\n\r\n          this.isDicom = true\r\n          \r\n          this.PatientsName = image.data.string('x00100010')\r\n          this.sopInstanceUid = this.getSopInstanceUID()\r\n\r\n          let stack = { currentImageIdIndex: 0, imageIds: \"\" }\r\n          this.numberOfFrames = image.data.intString('x00280008')\r\n          if (this.numberOfFrames > 0) {\r\n            //console.log('nFrames: ', nFrames)\r\n            //this.props.numberOfFramesStore(nFrames)\r\n            let imageIds = []\t\r\n            for(var i=0; i < this.numberOfFrames; ++i) {\r\n              imageIds.push(imageId + \"?frame=\"+i)\r\n            }\t\r\n            stack.imageIds = imageIds;\r\n            //console.log(stack.imageIds)\r\n          }\r\n\r\n          console.log('displayImage: ')\r\n          cornerstone.displayImage(element, image)\r\n          //cornerstoneTools.mouseInput.enable(element);\r\n          //cornerstoneTools.mouseWheelInput.enable(element);\r\n\r\n          this.enableTool()\r\n\r\n          if (this.numberOfFrames > 1) {\r\n            cornerstoneTools.addStackStateManager(element, ['stack', 'playClip']);    \r\n            cornerstoneTools.addToolState(element, 'stack', stack)\r\n            //cornerstoneTools.setToolActive('StackScrollMouseWheel', { })\r\n            this.setState({frame: 1})\r\n          }\r\n  \r\n          // Load the possible measurements from DB and save in the store \r\n          db.measurement.where('sopinstanceuid').equals(this.sopInstanceUid).each(measure => {\r\n            console.log('load measure from db: ', measure)\r\n            //this.props.measurementStore(measure)\r\n            this.measurementSave(measure)\r\n            cornerstoneTools.addToolState(element, measure.tool, measure.data)\r\n            this.runTool(measure.tool)\r\n            cornerstone.updateImage(element)\r\n            cornerstoneTools.setToolEnabled(measure.tool)\r\n          }).then(() => {\r\n            //console.log('this.measurements: ', this.measurements)\r\n            this.props.setActiveMeasurements(this.measurements)\r\n            this.props.setActiveDcm({image: this.image, element: this.dicomImage, isDicom: this.isDicom})\r\n            this.props.isOpenStore(true)            \r\n          })       \r\n\r\n        }, (e) => {\r\n          console.log('error', e)   \r\n          this.hideOpenUrlDlg()      \r\n          //console.log('toString: ', e.error.toString())\r\n          if (e.error.toString() === '[object XMLHttpRequest]') {\r\n            this.setState({errorOnCors: true})\r\n          } else {\r\n            let pos = e.error.indexOf(\":\")\r\n            this.setState({errorOnOpenImage: pos < 0 ? e.error : e.error.substring(pos+1)})            \r\n          }\r\n \r\n        })\r\n\r\n      }\r\n\r\n    }\r\n  \r\n    enableTool = (toolName, mouseButtonNumber) => {\r\n      // Enable all tools we want to use with this element\r\n      const WwwcTool = cornerstoneTools.WwwcTool;\r\n      const LengthTool = cornerstoneTools['LengthTool']\r\n      const PanTool = cornerstoneTools.PanTool\r\n      const ZoomTouchPinchTool = cornerstoneTools.ZoomTouchPinchTool\r\n      const ZoomTool = cornerstoneTools.ZoomTool\r\n      const ProbeTool = cornerstoneTools.ProbeTool\r\n      const EllipticalRoiTool = cornerstoneTools.EllipticalRoiTool\r\n      const RectangleRoiTool = cornerstoneTools.RectangleRoiTool\r\n      const FreehandRoiTool = cornerstoneTools.FreehandRoiTool\r\n      const AngleTool = cornerstoneTools.AngleTool\r\n      const MagnifyTool = cornerstoneTools.MagnifyTool\r\n      const StackScrollMouseWheelTool = cornerstoneTools.StackScrollMouseWheelTool\r\n\r\n      cornerstoneTools.addTool(MagnifyTool)\r\n      cornerstoneTools.addTool(AngleTool)    \r\n      cornerstoneTools.addTool(WwwcTool)\r\n      cornerstoneTools.addTool(LengthTool)\r\n      cornerstoneTools.addTool(PanTool)\r\n      cornerstoneTools.addTool(ZoomTouchPinchTool)\r\n      cornerstoneTools.addTool(ZoomTool)\r\n      cornerstoneTools.addTool(ProbeTool)\r\n      cornerstoneTools.addTool(EllipticalRoiTool)\r\n      cornerstoneTools.addTool(RectangleRoiTool)\r\n      cornerstoneTools.addTool(FreehandRoiTool)\r\n      cornerstoneTools.addTool(StackScrollMouseWheelTool)      \r\n    }\r\n  \r\n    // helper function used by the tool button handlers to disable the active tool\r\n    // before making a new tool active\r\n    disableAllTools = () => {\r\n      cornerstoneTools.setToolEnabled('Length')\r\n      cornerstoneTools.setToolEnabled('Pan')\r\n      cornerstoneTools.setToolEnabled('Magnify')\r\n      cornerstoneTools.setToolEnabled('Angle')\r\n      cornerstoneTools.setToolEnabled('RectangleRoi')\r\n      cornerstoneTools.setToolEnabled('Wwwc')\r\n      cornerstoneTools.setToolEnabled('ZoomTouchPinch')\r\n      cornerstoneTools.setToolEnabled('Probe')\r\n      cornerstoneTools.setToolEnabled('EllipticalRoi')\r\n      cornerstoneTools.setToolEnabled('StackScrollMouseWheel')\r\n    }\r\n  \r\n    runTool = (toolName, opt) => {\r\n      console.log('run tool: ', toolName)\r\n//      this.disableAllTools()\r\n      switch (toolName) {\r\n        case 'openfile': {\r\n          cornerstone.disable(this.dicomImage)\r\n          this.setState({ file: opt })\r\n          this.loadImage(opt)\r\n          break   \r\n        } \r\n        case 'openurl': {\r\n          console.log('run tool opt: ', opt)  \r\n          this.showOpenUrlDlg(opt)\r\n          break                 \r\n        }\r\n        case 'clear': {\r\n          //if (this.state.visibleHistogram) this.runTool('Histogram')\r\n          //console.log('this.dicomImage: ', this.dicomImage)\r\n          this.setState({ visibleCinePlayer: false })\r\n          this.props.clearingStore()\r\n          cornerstone.disable(this.dicomImage)\r\n          break\r\n        }  \r\n        case 'notool': {\r\n          this.disableAllTools()\r\n\r\n          //const element = this.dicomImage\r\n\r\n          //cornerstoneTools.clearToolState(element, 'Length')\r\n          \r\n          //const toolStateManager = cornerstoneTools.getElementToolStateManager(element)\r\n          //console.log('toolStateManager.toolState: ', toolStateManager.toolState)\r\n          /*\r\n          const toolState = toolStateManager.toolState\r\n          // const allTools = Object.keys(toolState).map(key => toolState[key])\r\n          let key = Object.keys(toolState)[0]\r\n          let allTools = toolState[key]\r\n          //console.log('allTools: ', allTools)\r\n\r\n          for (let [tool, data] of Object.entries(allTools)) {\r\n            //console.log(`${tool}: `, data)\r\n            let key = Object.keys(data)[0]\r\n            let tools = data[key]\r\n            //console.log('tools: ', tools)\r\n            tools.forEach(item => {\r\n              //console.log('tool: ', tool)\r\n              //console.log(item)\r\n              const measure = {\r\n                tool: tool,\r\n                note: '',\r\n                data: item\r\n              }\r\n              console.log('measure: ', measure)\r\n              this.props.measurementStore(measure)\r\n            })\r\n          }\r\n          */\r\n          //const toolState = toolStateManager.get(element, 'Length')\r\n          //console.log('toolState: ', toolState)\r\n\r\n          /*\r\n          const measurementData = {\r\n            visible: true,\r\n            active: true,\r\n            invalidated: true,\r\n            handles: {\r\n                start: {\r\n                    x: 100,\r\n                    y: 100,\r\n                    highlight: true,\r\n                    active: false\r\n                },\r\n                end: {\r\n                    x: 200,\r\n                    y: 200,\r\n                    highlight: true,\r\n                    active: true\r\n                },\r\n                textBox: {\r\n                    active: false,\r\n                    hasMoved: false,\r\n                    movesIndependently: false,\r\n                    drawnIndependently: true,\r\n                    allowedOutsideImage: true,\r\n                    hasBoundingBox: true\r\n                }\r\n              }\r\n          }\r\n          cornerstoneTools.addToolState(element, 'RectangleRoi', measurementData)    \r\n          cornerstoneTools.setToolActive('RectangleRoi', { mouseButtonMask: 1 })\r\n          */  \r\n          //cornerstone.updateImage(element)   \r\n          break\r\n        }\r\n        case 'Wwwc': {\r\n          cornerstoneTools.setToolActive('Wwwc', { mouseButtonMask: 1 })\r\n          break\r\n        }  \r\n        case 'Pan': {\r\n          cornerstoneTools.setToolActive('Pan', { mouseButtonMask: 1 })\r\n          break   \r\n        }  \r\n        case 'Zoom': {\r\n          cornerstoneTools.setToolActive(isMobile ? 'ZoomTouchPinch' : 'Zoom', { mouseButtonMask: 1 })\r\n          break\r\n        }\r\n        case 'Length': {\r\n          cornerstoneTools.setToolActive('Length', isMobile ? { isTouchActive: true } : { mouseButtonMask: 1 })\r\n          break  \r\n        }\r\n        case 'Probe': {\r\n            cornerstoneTools.setToolActive('Probe', { mouseButtonMask: 1 })\r\n          break\r\n        }\r\n        case 'EllipticalRoi': {\r\n          cornerstoneTools.setToolActive('EllipticalRoi', { mouseButtonMask: 1 })\r\n          break   \r\n        }\r\n        case 'RectangleRoi': {\r\n          cornerstoneTools.setToolActive('RectangleRoi', { mouseButtonMask: 1 })\r\n          break  \r\n        }\r\n        case 'Angle': {\r\n          cornerstoneTools.setToolActive('Angle', { mouseButtonMask: 1 })\r\n          break \r\n        }\r\n        case 'Magnify': {\r\n          cornerstoneTools.setToolActive('Magnify', { mouseButtonMask: 1 })\r\n          break  \r\n        }\r\n        case 'FreehandRoi': {\r\n          cornerstoneTools.setToolActive('FreehandRoi', { mouseButtonMask: 1 })\r\n          break \r\n        }\r\n        case 'Invert': {\r\n          const element = this.dicomImage\r\n\r\n          const viewport = cornerstone.getViewport(element)\r\n\r\n          viewport.invert = !viewport.invert\r\n          \r\n          cornerstone.setViewport(element, viewport)\r\n\r\n          console.log('viewport: ', viewport)\r\n\r\n          break \r\n        }         \r\n        case 'saveas': {\r\n            let type = localStorage.getItem(SETTINGS_SAVEAS)\r\n            cornerstoneTools.SaveAs(this.dicomImage, `${this.state.file.name}.${type}`, `image/${type}`)      \r\n          break\r\n        }\r\n        case 'cine': {\r\n          this.setState({ visibleCinePlayer: !this.state.visibleCinePlayer })\r\n          break\r\n        }\r\n        case 'reset': {\r\n          this.reset()\r\n          break\r\n        }\r\n        case 'removetool': {\r\n          console.log('removetool index: ', opt)\r\n          const element = this.dicomImage\r\n          cornerstoneTools.removeToolState(element, this.measurements[opt].tool, this.measurements[opt].data)\r\n          cornerstone.updateImage(element)\r\n          //this.props.measurementRemoveStore(opt)\r\n          this.measurementRemove(opt)\r\n          this.props.setActiveMeasurements(this.measurements)\r\n          break\r\n        }  \r\n        case 'removetools': {   \r\n          const element = this.dicomImage\r\n          // for each measurement remove it \r\n          this.measurements.forEach(measure => {\r\n            cornerstoneTools.clearToolState(element, measure.tool)         \r\n          })\r\n          cornerstone.updateImage(element)\r\n          this.measurementClear()\r\n          // also remove all measurements from db\r\n          db.measurement.where('sopinstanceuid').equals(this.sopInstanceUid).delete()\r\n          this.props.setActiveMeasurements(this.measurements)\r\n          break\r\n        }  \r\n        case 'savetools': {\r\n          // first, remove eventually previous measurements from db\r\n          db.measurement.where('sopinstanceuid').equals(this.sopInstanceUid).delete()\r\n          // then save all the current measurements\r\n          this.measurements.forEach(measure => {\r\n            try {\r\n              db.measurement.add({\r\n                sopinstanceuid: this.sopInstanceUid, \r\n                tool: measure.tool,\r\n                note: measure.note,\r\n                data: measure.data\r\n              })\r\n            } catch(error) {\r\n              console.error(error)\r\n            }                       \r\n          })\r\n          break\r\n        }\r\n        default: {\r\n          break\r\n        }\r\n      }\r\n    } \r\n\r\n    changeTool = (toolName, value) => {\r\n      console.log('change tool, value: ', toolName, value)\r\n\r\n      switch (toolName) {\r\n        case 'Wwwc':\r\n          if (value === 1) {\r\n            cornerstoneTools.setToolActive('Wwwc', { mouseButtonMask: 1 })\r\n          } else if (value === 0) {\r\n            cornerstoneTools.setToolPassive('Wwwc')\r\n          }\r\n          break  \r\n        case 'Pan':\r\n          if (value === 1) {\r\n            cornerstoneTools.setToolActive('Pan', { mouseButtonMask: 1 })\r\n          } else if (value === 0) {\r\n            cornerstoneTools.setToolPassive('Pan')\r\n          }\r\n          break    \r\n        case 'Zoom':\r\n          if (value === 1) {\r\n            cornerstoneTools.setToolActive(isMobile ? 'ZoomTouchPinch' : 'Zoom', { mouseButtonMask: 1 })\r\n          } else if (value === 0) {\r\n            cornerstoneTools.setToolPassive(isMobile ? 'ZoomTouchPinch' : 'Zoom')\r\n          }\r\n          break                             \r\n        case 'Length':\r\n          if (value === 1) {\r\n            cornerstoneTools.setToolActive('Length', isMobile ? { isTouchActive: true } : { mouseButtonMask: 1 })\r\n          } else if (value === 0) {\r\n            cornerstoneTools.setToolPassive('Length')\r\n          }\r\n          break   \r\n        case 'Probe':\r\n          if (value === 1) {\r\n            cornerstoneTools.setToolActive('Probe', { mouseButtonMask: 1 })\r\n          } else if (value === 0) {\r\n            cornerstoneTools.setToolPassive('Probe')\r\n          }\r\n          break        \r\n        case 'Angle':\r\n          if (value === 1) {\r\n            cornerstoneTools.setToolActive('Angle', { mouseButtonMask: 1 })\r\n          } else if (value === 0) {\r\n            cornerstoneTools.setToolPassive('Angle')\r\n          }          \r\n          break   \r\n        case 'Magnify':\r\n          if (value === 1) {\r\n            cornerstoneTools.setToolActive('Magnify', { mouseButtonMask: 1 })\r\n          } else if (value === 0) {\r\n            cornerstoneTools.setToolPassive('Magnify')\r\n          }          \r\n          break        \r\n        case 'EllipticalRoi':\r\n          if (value === 1) {\r\n            cornerstoneTools.setToolActive('EllipticalRoi', { mouseButtonMask: 1 })\r\n          } else if (value === 0) {\r\n            cornerstoneTools.setToolPassive('EllipticalRoi')\r\n          }\r\n          break   \r\n        case 'RectangleRoi':\r\n          if (value === 1) {\r\n            cornerstoneTools.setToolActive('RectangleRoi', { mouseButtonMask: 1 })\r\n          } else if (value === 0) {\r\n            cornerstoneTools.setToolPassive('RectangleRoi')\r\n          }\r\n          break\r\n        case 'FreehandRoi':\r\n          if (value === 1) {\r\n            cornerstoneTools.setToolActive('FreehandRoi', { mouseButtonMask: 1 })\r\n          } else if (value === 0) {\r\n            cornerstoneTools.setToolPassive('FreehandRoi')\r\n          }\r\n          break     \r\n        default:\r\n            break\r\n        }  \r\n    }\r\n\r\n    runCinePlayer = (cmdName) => {\r\n      //console.log('this.state.frame: ', this.state.frame)\r\n      const element = this.dicomImage\r\n      switch (cmdName) {\r\n        case 'firstframe': {\r\n          let frame = 1\r\n          this.setState({frame: frame})\r\n          scrollToIndex(element, 0)\r\n          break\r\n        }\r\n        case 'previousframe': {\r\n          if (this.state.frame > 1) {\r\n            let frame = this.state.frame-1\r\n            this.setState({frame: frame})     \r\n            scrollToIndex(element, frame-1)       \r\n          }\r\n          break\r\n        }\r\n        case 'play': {\r\n          cornerstoneTools.playClip(element, 30)\r\n          this.setState({inPlay: true})\r\n          break\r\n        }\r\n        case 'pause': {\r\n            cornerstoneTools.stopClip(element)\r\n            this.setState({inPlay: false})\r\n          break\r\n        }\r\n        case 'nextframe': {\r\n          if (this.state.frame < this.numberOfFrames) {\r\n            let frame = this.state.frame+1\r\n            this.setState({frame: frame})            \r\n            scrollToIndex(element, frame-1)\r\n          }\r\n          break  \r\n        }\r\n        case 'lastframe': {\r\n          let frame = this.numberOfFrames\r\n          this.setState({frame: frame})   \r\n          scrollToIndex(element, frame-1)      \r\n          break    \r\n        }                       \r\n        default:\r\n          break\r\n      }\r\n    }\r\n\r\n    reset = () => {\r\n      const element = this.dicomImage\r\n      const defaultViewport = cornerstone.getDefaultViewportForImage(element, this.image)\r\n      let viewport = cornerstone.getViewport(element)\r\n      viewport.voi.windowWidth = defaultViewport.voi.windowWidth\r\n      viewport.voi.windowCenter = defaultViewport.voi.windowCenter\r\n      viewport.invert = false\r\n      cornerstone.setViewport(element, viewport)\r\n    }\r\n\r\n    dicomImageRef = el => {\r\n      this.dicomImage = el\r\n    }\r\n\r\n    onImageClick = () => {\r\n      console.log('onImageClick: ')\r\n    }\r\n    \r\n    render() {\r\n      //console.log('DicomViewer render: ')\r\n\r\n      //this.props.visible ? document.body.style = 'background: #000000;' : document.body.style = 'background: $md-grey-700;'\r\n\r\n      const isOpen = this.props.isOpen[this.props.index]\r\n      //const visibleHistogram = this.state.visibleHistogram\r\n      const visibleOpenUrlDlg = this.state.visibleOpenUrlDlg\r\n      const errorOnOpenImage = this.state.errorOnOpenImage\r\n      const progress = this.state.progress\r\n\r\n      const styleContainer = {\r\n        width: '100%', \r\n        height: '100%', \r\n        border: this.props.activeDcmIndex === this.props.index && (this.props.layout[0] > 1 || this.props.layout[1] > 1) ? 'solid 1px #AAAAAA' : 'solid 1px #000000',\r\n        position: 'relative',\r\n      }\r\n\r\n      const styleDicomImage = {\r\n        width: '100%', \r\n        height: '100%', \r\n        position: 'relative',\r\n      }\r\n\r\n      const overlay = getSettingsOverlay() \r\n\r\n      return ( \r\n        <div className=\"container\" style={styleContainer} >\r\n\r\n          {visibleOpenUrlDlg ? <OpenUrlDlg progress={progress} onClose={this.hideOpenUrlDlg} /> : null}\r\n\r\n          <Dialog\r\n            open={errorOnOpenImage !== null}\r\n            onClose={this.onErrorOpenImageClose}\r\n            aria-labelledby=\"alert-dialog-title\"\r\n            aria-describedby=\"alert-dialog-description\"\r\n          >\r\n            <DialogTitle id=\"alert-dialog-title\">{\"Error on opening image\"}</DialogTitle>\r\n            <DialogContent>\r\n              <DialogContentText id=\"alert-dialog-description\">\r\n                {this.state.errorOnOpenImage}\r\n              </DialogContentText>\r\n            </DialogContent>\r\n            <DialogActions>\r\n              <Button onClick={this.onErrorOpenImageClose} autoFocus>\r\n                Ok\r\n              </Button>\r\n            </DialogActions>\r\n          </Dialog>\r\n\r\n          <Dialog\r\n            open={this.state.errorOnCors}\r\n            onClose={this.onErrorCorsClose}\r\n            aria-labelledby=\"alert-dialog-title\"\r\n            aria-describedby=\"alert-dialog-description\"\r\n          >\r\n            <DialogTitle id=\"alert-dialog-title\">{\"Error on loading image\"}</DialogTitle>\r\n            <DialogContent>\r\n              <DialogContentText id=\"alert-dialog-description\">\r\n                <Typography gutterBottom>\r\n                  CORS or Cross Origin Resource Sharing is a browser security policy \r\n                  that prevents javascript from loading data from a server with a different base URL \r\n                  than the server that served up the javascript file. \r\n                </Typography> \r\n                <Typography gutterBottom>\r\n                  See the &nbsp; \r\n                  <Link href=\"http://enable-cors.org/\" target='_blank' color='textPrimary'>\r\n                    Enable CORS site\r\n                  </Link>\r\n                  &nbsp; for information about CORS.                     \r\n                </Typography>                                \r\n              </DialogContentText>\r\n            </DialogContent>\r\n            <DialogActions>\r\n              <Button onClick={this.onErrorCorsClose} autoFocus>\r\n                Ok\r\n              </Button>\r\n            </DialogActions>\r\n          </Dialog>\r\n\r\n          <div\r\n            //tabIndex=\"0\"\r\n            style={{\r\n              width: '100%', \r\n              height: '100%', \r\n              position: \"relative\",\r\n              //display: \"inline-block\",\r\n              color: '#FFFFFF',\r\n              textShadow: '1px 1px #000000'\r\n            }}\r\n            onContextMenu={() => false}\r\n            className=\"cornerstone-enabled-image\"\r\n            //unselectable=\"on\"\r\n            //onMouseDown={() => false}\r\n          >\r\n            <div \r\n              ref={this.dicomImageRef} style={styleDicomImage}\r\n            >\r\n            </div>\r\n            <div\r\n              id={`mrtopleft-${this.props.index}`}\r\n              style={{ position: \"absolute\", top: 0, left: 3, display: isOpen && overlay ? \"\" : \"none\" }}\r\n            >\r\n              Patient Name\r\n            </div>\r\n            <div\r\n              id={`mrtopright-${this.props.index}`}\r\n              style={{ position: \"absolute\", top: 0, right: 3, display: isOpen && overlay ? \"\" : \"none\" }}\r\n            >\r\n              Size\r\n            </div>\r\n            <div\r\n              id={`mrbottomright-${this.props.index}`}\r\n              style={{ position: \"absolute\", bottom: 0, right: 3, display: isOpen && overlay ? \"\" : \"none\" }}\r\n            >\r\n              Zoom:\r\n            </div>\r\n            <div\r\n              id={`mrbottomleft-${this.props.index}`}\r\n              style={{ position: \"absolute\", bottom: 0, left: 3, display: isOpen && overlay ? \"\" : \"none\" }}\r\n            >\r\n              WW/WC:\r\n            </div>    \r\n            { this.state.visibleCinePlayer && this.numberOfFrames > 1 ? (\r\n              <div style={{position:\"absolute\", width:'100%', bottom:0, textAlign:'center'}}>\r\n                <div style={{margin:'0 auto', width:'240px', backgroundColor:'rgba(136, 136, 136, 0.5)'}}>\r\n                  <CinePlayer runCinePlayer={this.runCinePlayer} inPlay={this.state.inPlay} />  \r\n                  <div \r\n                    id={`frameLabel-${this.props.index}`}\r\n                    style={{ width:230, margin:'0 auto', marginTop:-10, textAlign:\"center\" }}\r\n                  >\r\n                    {this.state.frame} / {this.numberOfFrames}\r\n                  </div> \r\n                </div>               \r\n              </div> \r\n              ) : null\r\n            }  \r\n            {/*<div style={{position:\"absolute\", width:'100%', height:'100%', top:0, left:0}}></div>*/}\r\n          </div>\r\n        </div>\r\n      )\r\n    }\r\n  }\r\n  \r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    url: state.url,\r\n    isOpen: state.isOpen,\r\n    tool: state.tool,\r\n    activeDcmIndex: state.activeDcmIndex,\r\n    measurements: state.measurements,\r\n    layout: state.layout\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n  return {\r\n    clearingStore: () => dispatch(clearStore()),\r\n    isOpenStore: (value) => dispatch(dcmIsOpen(value)),\r\n    toolStore: (tool) => dispatch(dcmTool(tool)),\r\n    setActiveDcm: (dcm) => dispatch(activeDcm(dcm)),\r\n    setActiveMeasurements: (measurements) => dispatch(activeMeasurements(measurements)),\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(DicomViewer)\r\n","import React from 'react'\r\nimport List from '@material-ui/core/List'\r\nimport ListItem from '@material-ui/core/ListItem'\r\nimport ListItemText from '@material-ui/core/ListItemText'\r\nimport Toolbar from '@material-ui/core/Toolbar'\r\nimport Typography from '@material-ui/core/Typography'\r\nimport Icon from '@mdi/react'\r\nimport IconButton from '@material-ui/core/IconButton'\r\nimport { SETTINGS_DCMHEADER } from '../constants/settings'\r\nimport { toCsv } from '../functions'\r\nimport {\r\n    mdiContentSaveOutline\r\n} from '@mdi/js'\r\n\r\nconst DicomHeader = ({dcmViewer, classes, color}) => {\r\n    let header = []\r\n    header.push({name: 'Transfer Syntax', value: dcmViewer.getTransferSyntax()})\r\n    header.push({name: 'SOP Class', value: dcmViewer.getSopClass()})\r\n    header.push({name: 'SOP Instance UID', value: dcmViewer.getSopInstanceUID()})\r\n    header.push({name: 'Patient Name', value: dcmViewer.image.data.string('x00100010')})\r\n    header.push({name: 'Frame Rate', value: dcmViewer.image.data.string('x00082144')})\r\n    header.push({name: 'Samples per Pixel', value: dcmViewer.image.data.uint16('x00280002')})\r\n    header.push({name: 'Photometric Interpretation', value: dcmViewer.image.data.string('x00280004')})\r\n    header.push({name: 'Number of Frames', value: dcmViewer.image.data.string('x00280008')})\r\n    header.push({name: 'Planar Configuration', value: dcmViewer.getPlanarConfiguration()})\r\n    header.push({name: 'Rows', value: dcmViewer.image.data.uint16('x00280010')})\r\n    header.push({name: 'Columns', value: dcmViewer.image.data.uint16('x00280011')})\r\n    header.push({name: 'Pixel Spacing', value: dcmViewer.image.data.string('x00280030')})\r\n    header.push({name: 'Bits Allocated', value: dcmViewer.image.data.uint16('x00280100')})\r\n    header.push({name: 'Bits Stored', value: dcmViewer.image.data.uint16('x00280101')})\r\n    header.push({name: 'High Bit', value: dcmViewer.image.data.uint16('x00280102')})\r\n    header.push({name: 'Pixel Representation', value: dcmViewer.getPixelRepresentation()})\r\n    header.push({name: 'Window Center', value: dcmViewer.image.data.string('x00281050')})\r\n    header.push({name: 'Window Width', value: dcmViewer.image.data.string('x00281051')})\r\n    header.push({name: 'Rescale Intercept', value: dcmViewer.image.data.string('x00281052')})\r\n    header.push({name: 'Rescale Slope', value: dcmViewer.image.data.string('x00281053')})\r\n    header.push({name: 'Min Stored Pixel Value', value: dcmViewer.image.minPixelValue})\r\n    header.push({name: 'Max Stored Pixel Value', value: dcmViewer.image.maxPixelValue})\r\n\r\n    const listItems = header.map((item, index) => {\r\n        if (item.value !== undefined) \r\n            return (\r\n                <ListItem dense={true} key={index}>\r\n                    <ListItemText primary={item.name} secondary={item.value} />\r\n                </ListItem>\r\n            ) \r\n        else return null\r\n    })\r\n\r\n    const saveHeader = () => {\r\n        let exportAs = localStorage.getItem(SETTINGS_DCMHEADER)\r\n        if (exportAs === null) {\r\n          exportAs = \"json\"\r\n          localStorage.setItem(SETTINGS_DCMHEADER, exportAs)\r\n        }  \r\n    \r\n        let fileData = ''\r\n        \r\n        if (exportAs === 'csv') {\r\n          fileData = toCsv(header)\r\n        } else {\r\n          const obj = header.reduce((o, item) => ({ ...o, [item.name]: item.value}), {})\r\n          fileData = JSON.stringify(obj)\r\n        }\r\n        \r\n        const element = document.createElement(\"a\")\r\n        const file = new Blob([fileData], {type: 'text/plain'})\r\n        element.href = URL.createObjectURL(file)\r\n        element.download = `${dcmViewer.localfile.name}.${exportAs}`\r\n        document.body.appendChild(element) // Required for this to work in FireFox\r\n        element.click()\r\n    }\r\n\r\n    console.log('dcmViewer', dcmViewer)\r\n\r\n    return (\r\n        <div style={{marginTop: '48px'}}>\r\n        <Toolbar variant=\"dense\">\r\n          <Typography variant=\"subtitle1\" className={classes.title}>\r\n            Dicom Header\r\n          </Typography>\r\n          <div className={classes.grow} />\r\n          <IconButton color=\"inherit\" onClick={saveHeader}>\r\n            <Icon path={mdiContentSaveOutline} size={'1.5rem'} color={color} />\r\n          </IconButton>\r\n        </Toolbar>\r\n        <div>\r\n            <List dense={true} component=\"div\">\r\n                {listItems}             \r\n            </List>\r\n        </div>      \r\n      </div>\r\n\r\n    )\r\n}\r\n  \r\nexport default DicomHeader\r\n","import React, { PureComponent } from 'react'\r\nimport {connect} from 'react-redux'\r\nimport Button from '@material-ui/core/Button'\r\nimport CreateIcon from '@material-ui/icons/Create'\r\nimport DeleteIcon from '@material-ui/icons/Delete'\r\nimport Dialog from '@material-ui/core/Dialog'\r\nimport DialogActions from '@material-ui/core/DialogActions'\r\nimport DialogContent from '@material-ui/core/DialogContent'\r\nimport DialogTitle from '@material-ui/core/DialogTitle'\r\nimport IconButton from '@material-ui/core/IconButton'\r\nimport ListItem from '@material-ui/core/ListItem'\r\nimport ListItemText from '@material-ui/core/ListItemText'\r\nimport TextField from '@material-ui/core/TextField'\r\nimport Toolbar from '@material-ui/core/Toolbar'\r\n\r\nclass MeasureItem extends PureComponent {\r\n\r\n    constructor(props) {\r\n        super(props)\r\n        this.noteField = React.createRef()\r\n    \r\n      }\r\n\r\n    state = { \r\n        visibleDlgNote: false,\r\n        visibleDlgDelete: false,\r\n    }\r\n\r\n    showDlgNote = () => {\r\n        this.setState({ visibleDlgNote: true })\r\n    }\r\n    \r\n    hideDlgNote = () => {\r\n        this.setState({ visibleDlgNote: false })\r\n    }\r\n\r\n    showDlgDelete = () => {\r\n        this.setState({ visibleDlgDelete: true })\r\n    }\r\n    \r\n    hideDlgDelete = () => {\r\n        this.setState({ visibleDlgDelete: false })\r\n    }\r\n\r\n    handleOnChangeNote = event => {\r\n        this.setState({ note: event.target.value })\r\n    }\r\n\r\n    confirmNote = (index) => {\r\n        this.hideDlgNote()\r\n        this.props.measurements[index].note = this.noteField.value\r\n    }   \r\n\r\n    confirmDelete = (index) => {\r\n        this.hideDlgDelete()\r\n        this.props.toolRemove(index)\r\n    }\r\n\r\n    onEdit = () => {\r\n        this.showDlgNote()\r\n    }\r\n    \r\n    onDelete = () => {\r\n        this.showDlgDelete()\r\n    }\r\n    \r\n    render() {    \r\n        let item = this.props.item\r\n        let index = this.props.index\r\n        let pText = ''\r\n        let sText = ''\r\n        \r\n        switch (item.tool) {\r\n            case 'Length':\r\n                pText = `${item.data.length.toFixed(2)} ${item.data.unit}`\r\n                sText = item.note\r\n                break\r\n            case 'Angle':\r\n                pText = `${item.data.rAngle} °`\r\n                sText = item.note\r\n                break\r\n            case 'EllipticalRoi':\r\n                pText = <div>\r\n                            <div> A: {item.data.cachedStats.area.toFixed(2)} mm² </div>\r\n                            <div> M: {item.data.cachedStats.mean.toFixed(2)} {item.data.unit} </div>\r\n                            <div> SD: {item.data.cachedStats.stdDev.toFixed(2)} {item.data.unit} </div>\r\n                        </div>\r\n                sText = item.note            \r\n                break    \r\n            case 'RectangleRoi':\r\n                pText = <div>\r\n                            <div> A: {item.data.cachedStats.area.toFixed(2)} mm² </div>\r\n                            <div> M: {item.data.cachedStats.mean.toFixed(2)} {item.data.unit} </div>\r\n                    <       div> SD: {item.data.cachedStats.stdDev.toFixed(2)} {item.data.unit} </div>\r\n                        </div>\r\n                sText = item.note\r\n                break          \r\n            case 'FreehandRoi':\r\n                pText = <div>\r\n                            <div> A: {item.data.area.toFixed(2)} mm² </div>\r\n                            <div> M: {item.data.meanStdDev.mean.toFixed(2)} {item.data.unit} </div>\r\n                    <       div> SD: {item.data.meanStdDev.stdDev.toFixed(2)} {item.data.unit} </div>\r\n                        </div>\r\n                sText = item.note\r\n                break                                  \r\n            default:\r\n                break    \r\n        }\r\n\r\n        return (\r\n            <div>\r\n                <ListItem>\r\n                    <ListItemText primary={pText} secondary={sText} />\r\n                    <Toolbar>\r\n                        <IconButton edge=\"end\" onClick={() => this.onEdit(index)}>\r\n                            <CreateIcon />\r\n                        </IconButton>\r\n                        <IconButton edge=\"end\" onClick={() => this.onDelete(index)}>\r\n                            <DeleteIcon />\r\n                        </IconButton>\r\n                    </Toolbar>\r\n                </ListItem>\r\n                \r\n                { this.state.visibleDlgNote ?\r\n                    <Dialog\r\n                        open={this.state.visibleDlgNote}\r\n                        onClose={this.hideDlgNote}\r\n                        aria-labelledby=\"form-dialog-title\"\r\n                    >\r\n                        <DialogTitle id=\"form-dialog-title\">{\"Note for measurement:\"}</DialogTitle>\r\n                        <DialogContent>\r\n                            <TextField\r\n                                ref=\"noteField\"\r\n                                autoFocus\r\n                                margin=\"dense\"\r\n                                id=\"note\"\r\n                                fullWidth\r\n                                defaultValue={this.props.measurements[index].note}\r\n                                inputRef={input => (this.noteField = input)}\r\n                            />\r\n                        </DialogContent>\r\n                        <DialogActions>\r\n                            <Button onClick={this.hideDlgNote} >\r\n                                Cancel\r\n                            </Button>\r\n                            <Button onClick={() => this.confirmNote(index)} autoFocus>\r\n                                Ok\r\n                            </Button>\r\n                        </DialogActions>\r\n                    </Dialog>\r\n                : null }\r\n\r\n                <Dialog\r\n                    open={this.state.visibleDlgDelete}\r\n                    onClose={this.hideDlgNote}\r\n                    aria-labelledby=\"alert-dialog-title\"\r\n                >\r\n                    <DialogTitle id=\"alert-dialog-title\">{\"Are you sure to delete the measurement?\"}</DialogTitle>\r\n                    <DialogActions>\r\n                        <Button onClick={this.hideDlgDelete}>\r\n                            Cancel\r\n                        </Button>\r\n                        <Button onClick={() => this.confirmDelete(index)} autoFocus>\r\n                            Ok\r\n                        </Button>\r\n                    </DialogActions>\r\n                </Dialog>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        measurements: state.measurements,\r\n    }\r\n}\r\n\r\n//export default connect(mapStateToProps, )(MeasureItem)\r\nexport default connect(mapStateToProps)(MeasureItem)\r\n","import React, { PureComponent } from 'react'\r\nimport {connect} from 'react-redux'\r\nimport Button from '@material-ui/core/Button'\r\nimport Dialog from '@material-ui/core/Dialog'\r\nimport DialogActions from '@material-ui/core/DialogActions'\r\nimport DialogTitle from '@material-ui/core/DialogTitle'\r\nimport MeasureItem from './MeasureItem'\r\n\r\nclass Measurements extends PureComponent {\r\n\r\n  state = { \r\n    visibleClearMeasureDlg: false,\r\n  }\r\n\r\n  showClearMeasureDlg = () => {\r\n    this.setState({ visibleClearMeasureDlg: true })\r\n  }\r\n\r\n  hideClearMeasureDlg = () => {\r\n      this.setState({ visibleClearMeasureDlg: false })\r\n  }\r\n\r\n  confirmClearMeasureDlg = () => {\r\n    this.hideClearMeasureDlg()\r\n    this.dicomViewersRefs[this.props.activeDcmIndex].runTool('removetools')\r\n  }\r\n\r\n  render() {   \r\n    const classes = this.props.classes\r\n\r\n    return (\r\n      <div>\r\n\r\n        <div>\r\n          { this.props.measurements !== null ?\r\n              this.props.measurements.map((item, index) => {\r\n                  return <MeasureItem item={item} index={index} toolRemove={this.props.toolRemove} key={index} classes={classes} />\r\n              }) \r\n            : null }\r\n        </div>\r\n        \r\n        <Dialog\r\n            open={this.state.visibleClearMeasureDlg}\r\n            onClose={this.hideClearMeasureDlg}\r\n            aria-labelledby=\"alert-dialog-title\"\r\n        >\r\n            <DialogTitle id=\"alert-dialog-title\">{\"Are you sure to remove all the measurements?\"}</DialogTitle>\r\n            <DialogActions>\r\n                <Button onClick={this.hideClearMeasureDlg}>\r\n                    Cancel\r\n                </Button>\r\n                <Button onClick={this.confirmClearMeasureDlg} autoFocus>\r\n                    Ok\r\n                </Button>\r\n            </DialogActions>\r\n        </Dialog>\r\n\r\n      </div>\r\n    )\r\n  }\r\n\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    measurements: state.measurements,\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps)(Measurements)\r\n","import React from 'react'\r\n//import { Button, Card, CardText, Checkbox, SelectionControlGroup, Toolbar } from 'react-md'\r\nimport { getSettingsSaveAs, setSettingsSaveAs, \r\n         getSettingsDcmHeader, setSettingsDcmHeader, \r\n         getSettingsOverlay, setSettingsOverlay } from '../functions'\r\n\r\nimport { makeStyles } from '@material-ui/core/styles'\r\nimport AppBar from '@material-ui/core/AppBar'\r\n//import Button from '@material-ui/core/Button'\r\nimport Checkbox from '@material-ui/core/Checkbox'\r\nimport CloseIcon from '@material-ui/icons/Close'\r\nimport Dialog from '@material-ui/core/Dialog'\r\nimport Divider from '@material-ui/core/Divider'\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel'\r\nimport FormControl from '@material-ui/core/FormControl'\r\nimport FormLabel from '@material-ui/core/FormLabel'\r\nimport IconButton from '@material-ui/core/IconButton'\r\nimport Radio from '@material-ui/core/Radio'\r\nimport RadioGroup from '@material-ui/core/RadioGroup'\r\nimport Slide from '@material-ui/core/Slide'\r\nimport Toolbar from '@material-ui/core/Toolbar'\r\nimport Typography from '@material-ui/core/Typography'\r\n\r\n//const style = { maxWidth: window.innerWidth-40 }\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  appBar: {\r\n    position: 'relative',\r\n  },\r\n  formControl: {\r\n    margin: theme.spacing(3),\r\n  },\r\n  title: {\r\n    marginLeft: theme.spacing(2),\r\n    flex: 1,\r\n  },\r\n}))\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n})\r\n\r\nconst Settings = ({ onClose }) => {\r\n  \r\n  let saveAs = getSettingsSaveAs()\r\n  let exportAs = getSettingsDcmHeader()\r\n  let overlay = getSettingsOverlay()\r\n\r\n  //const isIndexedDB = false // 'indexedDB' in window\r\n  \r\n  const handleChangeSaveAs = event => {\r\n    setState({ ...state, 'saveAs': event.target.value })\r\n    setSettingsSaveAs(event.target.value)\r\n  }\r\n\r\n  const handleChangeExportAs = event => {\r\n    setState({ ...state, 'exportAs': event.target.value })\r\n    setSettingsDcmHeader(event.target.value)\r\n  }\r\n\r\n  const handleChangeOverlay = event => {\r\n    setState({ ...state, 'overlay': event.target.checked })\r\n    setSettingsOverlay(event.target.checked)\r\n  }\r\n\r\n  const classes = useStyles()\r\n\r\n  const [state, setState] = React.useState({\r\n    saveAs: saveAs,\r\n    exportAs: exportAs,\r\n    overlay: overlay,\r\n  })\r\n\r\n  return (\r\n    <div>\r\n      <Dialog fullScreen open={true} onClose={onClose} TransitionComponent={Transition}>\r\n        <AppBar className={classes.appBar}>\r\n          <Toolbar variant=\"dense\">\r\n            <IconButton edge=\"start\" color=\"inherit\" onClick={onClose} aria-label=\"close\">\r\n              <CloseIcon />\r\n            </IconButton>\r\n            <Typography variant=\"h6\" className={classes.title}>\r\n              Settings\r\n            </Typography>\r\n          </Toolbar>\r\n        </AppBar>\r\n        <div>\r\n        <FormControl component=\"fieldset\" className={classes.formControl}>\r\n            <FormControlLabel\r\n              control={\r\n                <Checkbox \r\n                  checked={state.overlay} \r\n                  onChange={handleChangeOverlay}\r\n                  value=\"overlay\" \r\n                />\r\n              }\r\n              label=\"Show overlay Information\"\r\n            />\r\n          </FormControl>\r\n          <Divider />\r\n          <FormControl component=\"fieldset\" className={classes.formControl}>\r\n            <FormLabel component=\"legend\">Save screenshot as:</FormLabel>\r\n            <RadioGroup aria-label=\"saveas\" name=\"saveas\" value={state.saveAs} onChange={handleChangeSaveAs}>\r\n              <FormControlLabel value=\"jpeg\" control={<Radio />} label=\"JPEG\" />\r\n              <FormControlLabel value=\"png\" control={<Radio />} label=\"PNG\" />\r\n            </RadioGroup>\r\n          </FormControl>\r\n          <Divider />\r\n          <FormControl component=\"fieldset\" className={classes.formControl}>\r\n            <FormLabel component=\"legend\">Export Dicom header as:</FormLabel>\r\n            <RadioGroup aria-label=\"exportas\" name=\"exportas\" value={exportAs} onChange={handleChangeExportAs}>\r\n              <FormControlLabel value=\"json\" control={<Radio />} label=\"JSON\" />\r\n              <FormControlLabel value=\"csv\" control={<Radio />} label=\"CSV\" />\r\n            </RadioGroup>\r\n          </FormControl>   \r\n        </div>\r\n      </Dialog>\r\n    </div>\r\n  )\r\n\r\n}\r\n\r\nexport default Settings\r\n","import React from 'react'\r\nimport Button from '@material-ui/core/Button'\r\nimport Dialog from '@material-ui/core/Dialog'\r\nimport DialogActions from '@material-ui/core/DialogActions'\r\nimport DialogContent from '@material-ui/core/DialogContent'\r\nimport DialogTitle from '@material-ui/core/DialogTitle'\r\nimport Link from '@material-ui/core/Link'\r\nimport List from '@material-ui/core/List'\r\nimport ListItem from '@material-ui/core/ListItem'\r\nimport ListItemText from '@material-ui/core/ListItemText'\r\nimport Typography from '@material-ui/core/Typography'\r\nimport packageJson from '../../package.json'\r\n\r\nconst AboutDlg = ({ onClose }) => {\r\n\r\n    const urlRepository = \"https://github.com/webnamics/u-dicom-viewer/\"\r\n\r\n    const linkRepository = (\r\n        <Typography variant='body2'>\r\n            <Link \r\n                href={urlRepository} \r\n                target='_blank'\r\n                style={{ color: '#999999' }}\r\n            >\r\n                https://github.com/webnamics/u-dicom-viewer\r\n            </Link>\r\n        </Typography>\r\n    )\r\n\r\n    const version = (\r\n        <Typography variant='body2' style={{ color: '#999999' }}>\r\n            {packageJson.version}\r\n        </Typography>        \r\n    )\r\n\r\n    return (\r\n      <div>\r\n        <Dialog onClose={onClose} open={true}>\r\n            <DialogTitle onClose={onClose} disableTypography={true}>\r\n                <Typography variant='h6'>\r\n                    About <strong>U</strong>niversal <strong>D</strong>icom <strong>V</strong>iewer\r\n                </Typography>\r\n            </DialogTitle>\r\n            <DialogContent>\r\n                <List>\r\n                    <ListItem>\r\n                        <ListItemText \r\n                            primary='Repository URL:' \r\n                            secondary={linkRepository} \r\n                        />\r\n                    </ListItem>    \r\n                    <ListItem>\r\n                        <ListItemText \r\n                            primary='Version Number:' \r\n                            secondary={version} \r\n                        />\r\n                    </ListItem>                        \r\n                </List>        \r\n            </DialogContent>\r\n            <DialogActions>\r\n                <Button autoFocus onClick={onClose}>\r\n                    Close\r\n                </Button>\r\n            </DialogActions>\r\n        </Dialog>\r\n      </div>\r\n    )\r\n}\r\n\r\nexport default AboutDlg\r\n","import React, { PureComponent } from 'react'\r\n//import Draggable from 'react-draggable'\r\n//import IconButton from '@material-ui/core/IconButton'\r\nimport Slider from '@material-ui/core/Slider'\r\n//import HighlightOffIcon from '@material-ui/icons/HighlightOff'\r\nimport {connect} from 'react-redux'\r\nimport * as cornerstone from 'cornerstone-core'\r\nimport { import as csTools } from 'cornerstone-tools'\r\n\r\nconst getRGBPixels = csTools('util/getRGBPixels')\r\n\r\nconst HIST_WIDTH = 256\r\nconst HIST_HEIGHT = 128\r\nconst N_BINS = 256\r\n\r\nconst style = {\r\n  width: '273px', \r\n  padding: '8px 8px 8px 8px', \r\n  backgroundColor: '#444444',\r\n}\r\n\r\nconst styleSlider = {\r\n  width: '255px',\r\n  marginTop: '-9px',\r\n}\r\n\r\nconst styleCanvasGradient = {\r\n  marginTop: '-9px',\r\n}\r\n\r\nconst styleTable = {\r\n  borderCollapse: 'collapse',\r\n  fontFamily: 'Courier, monospace',\r\n  fontSize: '67%',\r\n  width: '100%',\r\n}\r\n\r\nconst styleTableTd = {\r\n  tableLayout: 'fixed',\r\n  width: '25%',\r\n}\r\n\r\nclass Histogram extends PureComponent {\r\n    constructor(props) {\r\n      super(props)\r\n      this.canvasHistogram = React.createRef()\r\n      this.canvasGradient = React.createRef()\r\n    }\r\n\r\n    state = {\r\n      activeDrags: 0,\r\n      deltaPosition: {\r\n        x: 0, y: 0\r\n      },\r\n      controlledPosition: {\r\n        x: -400, y: 200\r\n      },\r\n      value: 128,\r\n      histCount: 0,\r\n      valueScale: 0,\r\n      minHist: 0,\r\n      maxHist: 0,\r\n      mean: 0,\r\n      stdDev: 0,\r\n    }\r\n\r\n    componentDidMount() {\r\n      //console.log('componentDidMount: ', this.props.activeDcmIndex)\r\n      this.image = this.props.activeDcm.image\r\n      this.element = this.props.activeDcm.element\r\n      this.isDicom = this.props.activeDcm.isDicom\r\n      this.pixelData = this.props.activeDcm.image.getPixelData()\r\n      this.updateCanvas()  \r\n    }\r\n    \r\n    componentDidUpdate() {\r\n      //console.log('componentDidUpdate: ')\r\n      //this.updateCanvas() \r\n    }\r\n\r\n    getMousePos(canvas, evt) {\r\n      const rect = canvas.getBoundingClientRect()\r\n      return {\r\n        x: evt.clientX - rect.left,\r\n        y: evt.clientY - rect.top\r\n      }\r\n    }\r\n\r\n    getRGBPixelsImage(x, y, width, height) {\r\n      //const image = this.props.image\r\n      const storedPixelData = []\r\n      x = Math.round(x)\r\n      y = Math.round(y)   \r\n      let index = 0\r\n      let spIndex, row, column\r\n    \r\n      for (row = 0; row < height; row++) {\r\n        for (column = 0; column < width; column++) {\r\n          spIndex = ((row + y) * this.image.rows + (column + x)) * 4\r\n          const red = this.pixelData[spIndex]\r\n          const green = this.pixelData[spIndex + 1]\r\n          const blue = this.pixelData[spIndex + 2]\r\n          const alpha = this.pixelData[spIndex + 3]\r\n  \r\n          storedPixelData[index++] = red\r\n          storedPixelData[index++] = green\r\n          storedPixelData[index++] = blue\r\n          storedPixelData[index++] = alpha\r\n        }\r\n      }\r\n    \r\n      return storedPixelData\r\n    }\r\n\r\n    getPixel(x, y) {\r\n      //const image = this.props.image\r\n      //const element = this.props.element\r\n      //const isDicom = this.props.isDicom\r\n      let sp = []\r\n      if (this.isDicom) {\r\n        if (this.image.color) {\r\n          sp = getRGBPixels(this.element, x, y, 1, 1)\r\n        } else {\r\n          sp = cornerstone.getStoredPixels(this.element, x, y, 1, 1)\r\n        }\r\n      } else {\r\n        sp = this.getRGBPixelsImage(x, y, 1, 1)\r\n      }\r\n      return sp[0]\r\n    }\r\n\r\n    updateCanvas() {\r\n      const image = this.image\r\n      //const element = this.props.element\r\n      const maxPixelValue = image.maxPixelValue\r\n      const minPixelValue = image.minPixelValue\r\n      //const k = Math.pow(2, this.props.bitsStored)\r\n      const minHist = minPixelValue+image.intercept\r\n      const maxHist = maxPixelValue+image.intercept\r\n      const lenHist = maxHist-minHist+1\r\n      const binSize = lenHist / N_BINS\r\n      let zero256 = Math.floor(Math.abs(minHist) / binSize)\r\n      let stepWW = Math.round(image.windowWidth / binSize / 2)\r\n      let stepWC = Math.round(image.windowCenter / binSize)\r\n\r\n      this.setState({minHist: minHist})\r\n      this.setState({maxHist: maxHist})\r\n      this.binSize = binSize\r\n\r\n      //console.log('bitsStored: ', k)\r\n      //console.log('minHist: ', minHist)\r\n      //console.log('maxHist: ', maxHist)\r\n      //console.log('lenHist: ', lenHist)\r\n      //console.log('binSize: ', binSize)\r\n      //console.log('zeroHist: ', zero256)\r\n      //console.log('stepWW: ', stepWW)\r\n      //console.log('stepWC: ', stepWC)\r\n      //console.log('zero256-stepWW: ', zero256-stepWW)\r\n      //console.log('zero256+stepWW: ', zero256+stepWW)   \r\n      //console.log('image.color: ', image.color)  \r\n      //console.log('isDicom: ', this.isDicom)  \r\n      //console.log('pixelData: ', this.pixelData)\r\n      //console.log('image.columns: ', image.columns)\r\n      //console.log('image.rows: ', image.rows)\r\n\r\n      let m = 0 // the mean\r\n\r\n      // build histogram\r\n      let hist = Array(lenHist).fill(0) \r\n\r\n      for (let y = 0; y < image.columns; y++) {\r\n        for (let x = 0; x < image.rows; x++) {\r\n          let sp = this.getPixel(x, y)\r\n          let mo = sp * image.slope + image.intercept\r\n          hist[mo-minHist] += 1\r\n          m += mo\r\n        } \r\n      }  \r\n\r\n      m = m / (image.columns * image.rows)\r\n      this.setState({mean: m})  \r\n\r\n      console.log('hist: ', hist)\r\n\r\n      // calculate standard deviation\r\n      let s = 0\r\n      for (let y = 0; y < image.columns; y++)\r\n        for (let x = 0; x < image.rows; x++) {\r\n          let sp = this.getPixel(x, y)\r\n          let mo = sp * image.slope + image.intercept\r\n          s += Math.pow(mo-m, 2)\r\n        }  \r\n      s = Math.sqrt(s / (image.columns * image.rows))\r\n      this.setState({stdDev: s})\r\n\r\n      // binning the histogram \r\n      let hist256 = Array(N_BINS).fill(0) \r\n      let step = 0\r\n      let max = 0\r\n      for (let i=0; i < N_BINS; i++) {\r\n        for (let j=step; j < Math.round(step+binSize); j++) {\r\n          if (j >= lenHist) break\r\n          hist256[i] += hist[j]\r\n        }\r\n        if (max < hist256[i]) { max = hist256[i] }\r\n        step = Math.round(step+binSize)\r\n      }\r\n      this.hist256 = hist256\r\n\r\n      console.log('hist256: ', hist256)\r\n      console.log('max: ', max)\r\n      \r\n      const canvasH = this.canvasHistogram.current\r\n      const ctxH = this.canvasHistogram.current.getContext(\"2d\")\r\n      ctxH.translate(0, canvasH.height)\r\n      ctxH.scale(1, -1)\r\n\r\n      canvasH.addEventListener('pointermove', (evt) => {\r\n        const mousePos = this.getMousePos(canvasH, evt)\r\n        this.setState({histCount: hist256[mousePos.x]})\r\n        let p = Math.round(mousePos.x * this.binSize)\r\n        this.setState({valueScale: p+minHist})\r\n      }, true)\r\n\r\n      console.log('value: ', (m-minHist)/binSize)\r\n      let value = Math.round((m-minHist)/binSize)\r\n      this.setState({value: value})\r\n      this.setState({valueScale: m})\r\n      this.setState({histCount: hist256[value]})\r\n\r\n      // draw WindowWidth area\r\n      ctxH.beginPath()\r\n      ctxH.fillStyle = 'rgba(210, 210, 210, 0.5)'\r\n      ctxH.fillRect(zero256-stepWW+stepWC, 0, stepWW*2, HIST_HEIGHT)\r\n\r\n      // draw histogram\r\n      ctxH.beginPath()\r\n      ctxH.strokeStyle = 'rgba(0, 0, 0, 1.0)'\r\n      for (let i = 0; i < N_BINS; i++) {\r\n        let h = Math.round((hist256[i]/max)*HIST_HEIGHT)\r\n        ctxH.moveTo(i, 0)\r\n        ctxH.lineTo(i, h)\r\n        ctxH.stroke()\r\n      }\r\n      \r\n      // draw WindowCenter cursor\r\n      ctxH.beginPath()\r\n      ctxH.strokeStyle = 'rgba(140, 140, 140, 0.5)'\r\n      ctxH.moveTo(zero256+stepWC, 0)\r\n      ctxH.lineTo(zero256+stepWC, HIST_HEIGHT)\r\n      ctxH.lineWidth = 1\r\n      ctxH.stroke()\r\n          \r\n      let lowX = zero256-stepWW+stepWC\r\n      let highX = zero256+stepWW+stepWC\r\n\r\n      // draw gradient scale\r\n      const canvasG = this.canvasGradient.current\r\n      const ctxG = canvasG.getContext(\"2d\")\r\n\r\n      ctxG.fillStyle = \"#000000\"\r\n      ctxG.fillRect(0, 0, lowX, 10)\r\n\r\n      let grd = ctxG.createLinearGradient(lowX, 0, highX+(lowX < 0 ? lowX : 0), 0)\r\n      grd.addColorStop(0, \"black\")\r\n      grd.addColorStop(1, \"white\")\r\n      ctxG.fillStyle = grd\r\n      ctxG.fillRect(lowX, 0, highX, 10)\r\n    }\r\n        \r\n    handleChangeValue = (event, newValue) => {\r\n      console.log('newValue: ', newValue)\r\n      console.log('(newValue*this.binSize)+this.state.minHist: ', (newValue*this.binSize)+this.state.minHist)\r\n      console.log('this.hist256[newValue]: ', this.hist256[newValue])\r\n      this.setState({value: newValue})\r\n      this.setState({valueScale: (newValue*this.binSize)+this.state.minHist})\r\n      this.setState({histCount: this.hist256[newValue]})\r\n    }\r\n      \r\n    hide = () => {\r\n      this.props.onClose()\r\n    }\r\n\r\n    onDrag = (e, ui) => {\r\n      const {x, y} = this.state.deltaPosition;\r\n      this.setState({\r\n        deltaPosition: {\r\n          x: x + ui.deltaX,\r\n          y: y + ui.deltaY,\r\n        }\r\n      })\r\n    }\r\n  \r\n    onStart = () => {\r\n      this.setState({activeDrags: this.state.activeDrags+1})\r\n    }\r\n  \r\n    onStop = () => {\r\n      this.setState({activeDrags: this.state.activeDrags-1})\r\n    }\r\n\r\n    render() {  \r\n      return (\r\n        <div style={style}>\r\n          <div>\r\n            <canvas \r\n              ref={this.canvasHistogram} \r\n              width={HIST_WIDTH} \r\n              height={HIST_HEIGHT} \r\n              style={{backgroundColor: \"#FFFFFF\", cursor:'crosshair'}} \r\n            />\r\n          </div>  \r\n          <div style={styleCanvasGradient}>\r\n            <canvas ref={this.canvasGradient} width={HIST_WIDTH} height={10} style={{backgroundColor: \"#FFFFFF\"}} />\r\n          </div>\r\n          <div style={styleSlider}>\r\n            <Slider\r\n              value={this.state.value}\r\n              onChange={this.handleChangeValue}\r\n              aria-labelledby=\"continuous-slider\"\r\n              color=\"secondary\"\r\n              min={0}\r\n              max={255}\r\n            />\r\n          </div>\r\n          <div>\r\n            <table style={styleTable}>\r\n              <tbody>\r\n                <tr>\r\n                  <td style={styleTableTd}>min:</td>\r\n                  <td style={styleTableTd}>{this.state.minHist}</td>\r\n                  <td style={styleTableTd}>max:</td>\r\n                  <td style={styleTableTd}>{this.state.maxHist}</td>\r\n                </tr>\r\n                <tr>\r\n                  <td>mean:</td>\r\n                  <td>{parseFloat(this.state.mean).toFixed(3)}</td>\r\n                  <td>std dev:</td>\r\n                  <td>{parseFloat(this.state.stdDev).toFixed(3)}</td>\r\n                </tr>\r\n                <tr>\r\n                  <td>count:</td>\r\n                  <td>{this.state.histCount}</td>\r\n                  <td>value:</td>\r\n                  <td>{parseFloat(this.state.valueScale).toFixed(3)}</td>\r\n                </tr>\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n      </div>\r\n      )\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    activeDcmIndex: state.activeDcmIndex,\r\n    activeDcm: state.activeDcm,\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps)(Histogram)\r\n","import React, { PureComponent } from 'react'\r\n\r\nconst styleTable = {\r\n  borderCollapse: 'collapse',\r\n  width: '100px',\r\n  height: '100px',\r\n}\r\n\r\nconst styleTableTd = {\r\n  width: '25px',\r\n  height: '25px',\r\n  border: 'solid 1px black',\r\n}\r\n\r\nclass LayoutTool extends PureComponent {\r\n    constructor(props) {\r\n      super(props)\r\n      this.tableRef = React.createRef()\r\n      this.state = {\r\n        row: this.props.row,\r\n        col: this.props.col,\r\n      }\r\n    }\r\n\r\n    componentDidMount() {\r\n      this.initTable()\r\n    }\r\n\r\n    initTable = () => {\r\n      let row = this.state.row\r\n      let col = this.state.col\r\n      let rows = this.tableRef.current.rows\r\n      for (let i=0; i <= row; i++) {\r\n        for(let j=0; j <= col; j++) {\r\n          rows[i].cells[j].bgColor = '#AAAAAA'\r\n        }\r\n      }\r\n    }\r\n\r\n    cellClick = (e) => {\r\n      let row = e.target.parentNode.rowIndex\r\n      let col = e.target.cellIndex\r\n\r\n      this.setState({row: row, col: col})\r\n\r\n      let rows = this.tableRef.current.rows\r\n      for (let i=0; i <= 3; i++) {\r\n        for(let j=0; j <= 3; j++) {\r\n          rows[i].cells[j].bgColor = '#444444'\r\n        }\r\n      }\r\n      for (let i=0; i <= row; i++) {\r\n        for(let j=0; j <= col; j++) {\r\n          rows[i].cells[j].bgColor = '#AAAAAA'\r\n        }\r\n      }\r\n      this.props.onChange(row+1, col+1)\r\n    }\r\n\r\n    renderTable() {\r\n      const rows = ['', '', '', '']\r\n      return (\r\n        rows.map((row, i) => {\r\n          return (\r\n            <tr key={`${i}`}>\r\n               <td style={styleTableTd} onClick={this.cellClick} />\r\n               <td style={styleTableTd} onClick={this.cellClick} />\r\n               <td style={styleTableTd} onClick={this.cellClick} />\r\n               <td style={styleTableTd} onClick={this.cellClick} />\r\n            </tr>\r\n          )\r\n        })\r\n      )\r\n   }\r\n\r\n    render() {  \r\n      return (\r\n          <div>            \r\n            <table style={styleTable} ref={this.tableRef}>\r\n              <tbody>\r\n                {this.renderTable()}                   \r\n              </tbody>\r\n            </table>\r\n          </div>     \r\n      )\r\n    }\r\n\r\n}\r\n\r\nexport default LayoutTool\r\n","import React, { PureComponent } from 'react'\nimport {connect} from 'react-redux'\nimport DicomViewer from './components/dicomviewer'\nimport DicomHeader from './components/DicomHeader'\nimport Measurements from './components/Measurements'\nimport Settings from './components/Settings'\nimport AboutDlg from './components/AboutDlg'\nimport { log } from './functions'\nimport {dcmTool} from './actions/index'\nimport {dcmIsOpen} from './actions/index'\nimport {activeDcm} from './actions/index'\nimport {activeDcmIndex} from './actions/index'\nimport {activeMeasurements} from './actions/index'\nimport {setLayout} from './actions/index'\nimport Histogram from './components/Histogram'\nimport Icon from '@mdi/react'\nimport LayoutTool from './components/LayoutTool'\nimport { withStyles } from '@material-ui/core/styles'\nimport AppBar from '@material-ui/core/AppBar'\nimport Collapse from '@material-ui/core/Collapse'\nimport Button from '@material-ui/core/Button'\nimport Dialog from '@material-ui/core/Dialog'\nimport DialogActions from '@material-ui/core/DialogActions'\nimport DialogContent from '@material-ui/core/DialogContent'\nimport DialogContentText from '@material-ui/core/DialogContentText'\nimport DialogTitle from '@material-ui/core/DialogTitle'\nimport Divider from '@material-ui/core/Divider'\nimport Drawer from '@material-ui/core/Drawer'\nimport ExpandLess from '@material-ui/icons/ExpandLess'\nimport ExpandMore from '@material-ui/icons/ExpandMore'\nimport IconButton from '@material-ui/core/IconButton'\nimport List from '@material-ui/core/List'\nimport ListItem from '@material-ui/core/ListItem'\nimport ListItemIcon from '@material-ui/core/ListItemIcon'\nimport ListItemText from '@material-ui/core/ListItemText'\nimport MenuIcon from '@material-ui/icons/Menu'\nimport PhotoCameraIcon from '@material-ui/icons/PhotoCamera'\nimport Popover from '@material-ui/core/Popover'\nimport TextField from '@material-ui/core/TextField'\nimport Toolbar from '@material-ui/core/Toolbar'\nimport Typography from '@material-ui/core/Typography'\nimport { isMobile, isTablet } from 'react-device-detect'\n\nimport { \n  mdiAngleAcute,\n  mdiArrowAll,\n  mdiChartHistogram,\n  mdiCheckboxIntermediate,\n  mdiContentSaveOutline,   \n  mdiCursorDefault, \n  mdiCursorPointer,\n  mdiDelete,\n  mdiEllipse,\n  mdiEyedropper,\n  mdiFileDocument, \n  mdiFileCad, \n  mdiFolder,\n  mdiGesture,\n  mdiViewGridPlusOutline,\n  mdiImageEdit,\n  mdiInformationOutline,\n  mdiInvertColors,\n  mdiMagnify,\n  mdiRefresh,\n  mdiRectangle,\n  mdiRuler,\n  mdiSettings,\n  mdiToolbox,\n  mdiTrashCanOutline, \n  mdiVideo,\n  mdiWeb,\n} from '@mdi/js'\n\nimport './App.css'\n\nlog()\n\nconst drawerWidth = 240\nconst iconColor = '#FFFFFF'\nlet iconTool = null\n\nconst styles = theme => ({\n  '@global': {\n    body: {\n        backgroundColor: theme.palette.common.black,\n    },\n  },\n  grow: {\n    flexGrow: 1,\n  },\n  root: {\n    display: 'flex',\n  },\n  menuButton: {\n    marginRight: theme.spacing(2),\n  },\n  title: {\n    flexGrow: 1,\n  },\n  appBar: {\n    position: 'relative',\n    zIndex: theme.zIndex.drawer + 1,\n    transition: theme.transitions.create(['width', 'margin'], {\n      easing: theme.transitions.easing.sharp,\n      duration: theme.transitions.duration.leavingScreen,\n    }),\n  },\n  appBarShift: {\n    marginLeft: drawerWidth,\n    width: `calc(100% - ${drawerWidth}px)`,\n    transition: theme.transitions.create(['width', 'margin'], {\n      easing: theme.transitions.easing.sharp,\n      duration: theme.transitions.duration.enteringScreen,\n    }),\n  },\n\n  hide: {\n    display: 'none',\n  },\n  drawer: {\n    width: drawerWidth,\n    flexShrink: 0,\n    whiteSpace: 'nowrap',\n  },\n  drawerOpen: {\n    width: drawerWidth,\n    transition: theme.transitions.create('width', {\n      easing: theme.transitions.easing.sharp,\n      duration: theme.transitions.duration.enteringScreen,\n    }),\n  },\n  drawerClose: {\n    transition: theme.transitions.create('width', {\n      easing: theme.transitions.easing.sharp,\n      duration: theme.transitions.duration.leavingScreen,\n    }),\n    overflowX: 'hidden',\n    width: theme.spacing(7) + 1,\n    [theme.breakpoints.up('sm')]: {\n      width: theme.spacing(9) + 1,\n    },\n  },\n\n  // Loads information about the app bar, including app bar height\n  toolbar: theme.mixins.toolbar,\n\n  content: {\n    flexGrow: 1,\n    padding: theme.spacing(3),\n  },\n\n})\n\nclass App extends PureComponent {\n\n  constructor(props) {\n    super(props)\n    this.file = null\n    this.fileOpen = React.createRef()\n    this.showFileOpen = this.showFileOpen.bind(this)\n    this.openUrlField = React.createRef()\n    \n    this.dicomViewersRefs = []\n    this.dicomViewers = []\n    for(let i=0; i < 16; i++) {\n      this.dicomViewers.push(this.setDcmViewer(i))\n    }\n  }\n\n  /*menuListSetting = [\n    {\n      key: 'overlay',\n      primaryText: 'Overlay information',\n      onClick: () => {\n        console.log('menu setting overlay ')\n      },\n    }, {\n      key: 'saveas',\n      primaryText: 'Save screenshot as ...',\n      onClick: () => {\n        console.log('menu setting saveas ')\n      },\n    },\n  ]*/\n\n  state = { \n    anchorElLayout: null,    \n    openImageEdit: false,\n    visibleMainMenu: true,\n    visibleHeader: false,\n    visibleSettings: false,\n    visibleToolbar: true,\n    visibleOpenUrl: false,\n    visibleToolbox: false,\n    visibleMeasure: false,\n    visibleClearMeasureDlg: false,\n    visibleAbout: false,\n    toolState: 1,\n  }\n\n  setDcmViewer = (index) => {\n    return (\n      <DicomViewer \n        dcmRef={(ref) => {this.dicomViewersRefs[index] = ref}}\n        index={index}\n        runTool={ref => (this.runTool = ref)} \n        changeTool={ref => (this.changeTool = ref)} \n      />   \n    )\n  }\n\n  getDcmViewerRef = (index) => {\n    return this.dicomViewersRefs[index]\n  }\n\n  getDcmViewer = (index) => {\n    return this.dicomViewers[index]\n  }\n\n  getActiveDcmViewer = () => {\n    return this.dicomViewersRefs[this.props.activeDcmIndex]\n  }  \n\n  showFileOpen() {\n    this.props.isOpenStore(false)\n    this.fileOpen.current.click()\n  }\n\n  handleOpenFile = (filesSelected) => {\n    this.hideMainMenu()\n    const file = filesSelected[0]\n    this.dicomViewersRefs[this.props.activeDcmIndex].runTool('clear')\n    this.dicomViewersRefs[this.props.activeDcmIndex].runTool('openfile', file)\n  }\n\n  componentDidMount() {\n    // Need to set the renderNode since the drawer uses an overlay\n    //this.dialog = document.getElementById('drawer-routing-example-dialog')\n    window.scrollTo(0, 0)\n  }\n\n\n  showAppBar = () => {\n    window.scrollTo(0, 0)\n  }\n  \n\n  toggleMainMenu = () => {\n    this.setState({ visibleMainMenu: !this.state.visibleMainMenu })\n  }\n  \n  showMainMenu = () => {\n    this.setState({ visibleMainMenu: true })\n  }\n\n  hideMainMenu = () => {\n    this.setState({ visibleMainMenu: false })\n  }\n\n  handleVisibility = (visibleMainMenu) => {\n    this.setState({ visibleMainMenu })\n  }\n\n\n  toggleHeader = () => {\n    const visible = !this.state.visibleHeader\n    this.setState({ visibleHeader: visible })\n    if (visible) \n      this.setState({ visibleMeasure: false, visibleToolbox: false })    \n  }\n\n\n  toggleToolbox = () => {\n    const visible = !this.state.visibleToolbox\n    this.setState({ visibleToolbox: visible })\n    if (visible) \n      this.setState({ visibleMeasure: false, visibleHeader: false })\n  }\n\n  saveMeasure = () => {\n    this.dicomViewersRefs[this.props.activeDcmIndex].runTool('savetools')\n  }\n  \n  toggleMeasure = () => {\n    const visible = !this.state.visibleMeasure\n    this.setState({ visibleMeasure: visible })\n    if (visible) \n      this.setState({ visibleToolbox: false, visibleHeader: false })\n  }\n\n  hideMeasure = () => {\n    this.setState({ visibleMeasure: false })\n  }\n\n  handleVisibilityMeasure = (visibleMeasure) => {\n    this.setState({ visibleMeasure })\n  }\n\n  clearMeasure = () => {\n    this.showClearMeasureDlg()\n  }\n\n  showClearMeasureDlg = () => {\n    this.setState({ visibleClearMeasureDlg: true })\n  }\n\n  hideClearMeasureDlg = () => {\n      this.setState({ visibleClearMeasureDlg: false })\n  }\n\n  confirmClearMeasureDlg = () => {\n    this.hideClearMeasureDlg()\n    this.dicomViewersRefs[this.props.activeDcmIndex].runTool('removetools')\n  }\n\n\n  showAbout = () => {\n    this.setState({ visibleAbout: !this.state.visibleAbout })\n  }\n\n  \n  showSettings = () => {\n    this.setState({ visibleMainMenu: false, visibleSettings: true, visibleToolbar: false, position: 'right' });\n  }\n\n  hideSettings = () => {\n    this.setState({ visibleMainMenu: true, visibleSettings: false, visibleToolbar: true })\n  }\n\n  handleVisibilitySettings = (visibleSettings) => {\n    this.setState({ visibleSettings });\n  }\n\n\n  showOpenUrl = () => {\n    this.setState({ visibleOpenUrl: true })\n  }\n\n  hideOpenUrl = (openDlg) => {\n    this.setState({ visibleOpenUrl: false },\n      () => {\n        if (openDlg) {\n          this.hideMainMenu()\n          return(this.dicomViewersRefs[this.props.activeDcmIndex].runTool('openurl', this.openUrlField.value))\n        } \n    })\n  }\n\n  downloadOpenUrl = () => {\n    this.setState({ visibleOpenUrl: false, visibleToolbar: true })\n  }\n  \n  resetImage = () => {\n    this.dicomViewersRefs[this.props.activeDcmIndex].runTool('reset')\n  }\n  \n  saveShot = () => {\n    this.dicomViewersRefs[this.props.activeDcmIndex].runTool('saveas')\n  }\n\n  cinePlayer = () => {\n    this.dicomViewersRefs[this.props.activeDcmIndex].runTool('cine')\n  }\n\n  clear = () => {  \n    this.setState({openImageEdit: false, visibleToolbox: false, visibleMeasure: false, visibleHeader: false})\n    this.dicomViewersRefs[this.props.activeDcmIndex].runTool('clear')\n  }\n\n  handleLayout = (event) => {\n    this.setState({anchorElLayout: event.currentTarget})\n  }\n  \n  closeLayout = () => {\n    this.setState({anchorElLayout: null})\n  }\n\n  changeLayout = (row, col) => {\n    //console.log('this.dicomViewersRefs: ', this.dicomViewersRefs)\n    // if reduce the grid clear the unused views\n    if (row < this.props.layout[0] || col < this.props.layout[1]) {\n      this.layoutGridClick(0)\n      for(let i=0; i < 4; i++) {\n        for(let j=0; j < 4; j++) {\n          if ((i+1 > row) || (j+1 > col)) {\n            const index = i*4+j\n            if (this.dicomViewersRefs[index] !== undefined) {  \n              //console.log(`clear view [${i},${j}], index: ${index}`)\n              this.dicomViewersRefs[index].runTool('clear')\n             }\n          }\n        }\n      }\n    }\n    //console.log('this.dicomViewersRefs: ', this.dicomViewersRefs)  \n    this.props.setLayoutStore(row, col)\n  }\n\n  toolExecute = (tool) => {\n    this.hideMainMenu()\n    switch (tool) {\n      case 'notool': \n        iconTool = null\n        this.setState({toolState: null})\n        break\n      case 'Wwwc':\n        iconTool = mdiArrowAll\n        break\n      case 'Pan':\n        iconTool = mdiCursorPointer\n        break        \n      case 'Zoom':\n        iconTool = mdiMagnify\n        break        \n      case 'Length':\n        iconTool = mdiRuler\n        break       \n      case 'Probe':\n        iconTool = mdiEyedropper\n        break    \n      case 'Angle':\n        iconTool = mdiAngleAcute\n        break   \n      case 'EllipticalRoi':\n        iconTool = mdiEllipse\n        break     \n      case 'RectangleRoi':\n        iconTool = mdiRectangle\n        break\n      case 'FreehandRoi':\n        iconTool = mdiGesture\n        break       \n\n      default:\n          break     \n    }\n    this.props.toolStore(tool)\n    this.dicomViewersRefs[this.props.activeDcmIndex].runTool(tool)\n  }\n\n  toolChange = () => {\n    const toolState = 1-this.state.toolState\n    this.setState({toolState: toolState}, () => {\n      this.changeTool.changeTool(this.props.tool, toolState)\n    })\n  }\n\n  toolRemove = (index) => {\n    this.dicomViewersRefs[this.props.activeDcmIndex].runTool('removetool', index)\n  }\n\n  toggleImageEdit = () => {\n    this.setState({openImageEdit: !this.state.openImageEdit})\n  }\n \n  layoutGridClick = (index) => {\n    if (isMobile && index === this.props.activeDcmIndex) return\n    //console.log('layoutGridClick: ', index)    \n    this.props.setActiveDcmIndex(index)\n    const dcmViewer = this.getDcmViewerRef(index)\n    this.props.setActiveMeasurements(dcmViewer.measurements)\n    this.props.setActiveDcm({image: dcmViewer.image, element: dcmViewer.dicomImage, isDicom: dcmViewer.isDicom})\n  }\n \n  layoutGridTouch = (index) => {\n    if (!isMobile && index === this.props.activeDcmIndex) return\n    //console.log('layoutGridTouch: ', index)\n    this.props.setActiveDcmIndex(index)\n    const dcmViewer = this.getDcmViewerRef(index)\n    this.props.setActiveMeasurements(dcmViewer.measurements)\n    this.props.setActiveDcm({image: dcmViewer.image, element: dcmViewer.dicomImage, isDicom: dcmViewer.isDicom})   \n  }\n\n  buildLayoutGrid = () => {\n    let dicomviewers = []\n    for(let i=0; i < this.props.layout[0]; i++) {\n      for(let j=0; j < this.props.layout[1]; j++) {\n        const styleLayoutGrid = {\n          border: this.props.layout[0] === 1 && this.props.layout[1] === 1 ? 'solid 1px #000000' : 'solid 1px #444444',\n        }\n        const index = i*4+j\n        dicomviewers.push(\n          <div \n            key={index} \n            style={styleLayoutGrid} \n            onClick={() => this.layoutGridClick(index)} \n            onTouchStart={() => this.layoutGridTouch(index)}\n          >\n            {this.getDcmViewer(index)}\n          </div>        \n        )\n      }\n    }\n\n    return (\n      <div\n        id=\"dicomviewer-grid\"\n        style={{\n          display: 'grid',\n          gridTemplateRows: `repeat(${this.props.layout[0]}, ${100 / this.props.layout[0]}%)`,\n          gridTemplateColumns: `repeat(${this.props.layout[1]}, ${100 / this.props.layout[1]}%)`,\n          height: '100%',\n          width: '100%',\n        }}\n      >\n        {dicomviewers}\n      </div>\n    )\n  }\n\n  getFileName = (dcmViewer) => {\n    if (dcmViewer.localfile !== null) {\n      return dcmViewer.localfile.name\n    } else {\n      return dcmViewer.localurl.substring(dcmViewer.localurl.lastIndexOf('/')+1)\n    }\n  }\n\n  appBarTitle = (classes, isOpen, dcmViewer) => {\n    if (isMobile && !isTablet) {\n      if (isOpen) \n        return null\n      else \n        return (\n          <Typography variant=\"overline\" className={classes.title}>\n            <strong>U</strong>niversal <strong>D</strong>icom <strong>V</strong>iewer\n          </Typography>          \n        )\n    } else {\n      if (isOpen) \n        return (\n          <Typography variant=\"overline\" className={classes.title}>\n            {this.getFileName(dcmViewer)}\n          </Typography>\n        )\n      else\n        return (\n          <Typography variant=\"overline\" className={classes.title}>\n            <strong>U</strong>niversal <strong>D</strong>icom <strong>V</strong>iewer\n          </Typography>\n        )\n    }\n  }\n\n  render() {\n    //console.log('App render: ')\n\n    const { classes } = this.props\n\n    const isOpen = this.props.isOpen[this.props.activeDcmIndex]\n\n    const openImageEdit = this.state.openImageEdit\n    const visibleMainMenu = this.state.visibleMainMenu\n    const visibleHeader = this.state.visibleHeader\n    const visibleSettings = this.state.visibleSettings\n    const visibleAbout = this.state.visibleAbout\n    const visibleMeasure = this.state.visibleMeasure\n    const visibleToolbox = this.state.visibleToolbox\n    const visibleLayout = Boolean(this.state.anchorElLayout)\n\n    let iconToolColor = this.state.toolState === 1 ? '#FFFFFF' : '#999999'\n\n    const dcmViewer = this.getActiveDcmViewer()\n\n    //console.log('this.dicomViewersRefs: ', this.dicomViewersRefs)\n\n    return (\n      <div>\n        <AppBar className={classes.appBar} position='static' elevation={0}>\n          <Toolbar variant=\"dense\">\n            <IconButton edge=\"start\" className={classes.menuButton} color=\"inherit\" aria-label=\"menu\" onClick={this.toggleMainMenu}>\n              <MenuIcon />\n            </IconButton>\n            { this.appBarTitle(classes, isOpen, dcmViewer) }\n            \n            <div className={classes.grow} />\n            { !isOpen ? (\n              <IconButton onClick={this.showAbout}>\n                <Icon path={mdiInformationOutline} size={'1.5rem'} color={iconColor} />\n              </IconButton> \n             ) : null\n            }            \n            { iconTool !== null && this.props.tool !== null &&  isOpen ? (\n                <IconButton onClick={this.toolChange}>\n                  <Icon path={iconTool} size={'1.5rem'} color={iconToolColor} />\n                </IconButton>\n              ) : null\n            }\n            { isOpen && dcmViewer.numberOfFrames > 1 &&  isOpen ? (\n                <IconButton onClick={this.cinePlayer}>\n                  <Icon path={mdiVideo} size={'1.5rem'} color={iconColor} />\n                </IconButton> \n              ): null\n            }\n            { isOpen ? (\n              <IconButton onClick={this.resetImage}>\n                <Icon path={mdiRefresh} size={'1.5rem'} color={iconColor} />\n              </IconButton>\n             ) : null\n            }\n            { isOpen ? (\n              <IconButton color=\"inherit\" onClick={this.saveShot}>\n                <PhotoCameraIcon />\n              </IconButton>\n             ) : null\n            }\n            { isOpen ? (\n              <IconButton color=\"inherit\" onClick={this.toggleToolbox}>\n                <Icon path={mdiToolbox} size={'1.5rem'} color={iconColor} />\n              </IconButton>\n              ) : null\n            }              \n            { isOpen ? (\n              <IconButton color=\"inherit\" onClick={this.toggleMeasure}>\n                <Icon path={mdiFileCad} size={'1.5rem'} color={iconColor} />\n              </IconButton>\n              ) : null\n            }  \n            { isOpen && dcmViewer.isDicom ? (\n              <IconButton color=\"inherit\" onClick={this.toggleHeader}>\n                <Icon path={mdiFileDocument} size={'1.5rem'} color={iconColor} />\n              </IconButton>\n              ) : null\n            }  \n          </Toolbar>\n        </AppBar>\n\n        <Drawer \n          variant=\"persistent\"\n          open={visibleMainMenu} \n          style={{position:'relative', zIndex: 1}}\n          onClose={this.toggleMainMenu}\n        >\n          <div className={classes.toolbar}>\n            <List dense={true}>\n              <ListItem button onClick={() => this.showAppBar()}>\n                <ListItemIcon><MenuIcon /></ListItemIcon>\n                <ListItemText primary='Tool Bar' />\n              </ListItem>              \n              <ListItem button onClick={() => this.showFileOpen()}>\n                <ListItemIcon><Icon path={mdiFolder} size={'1.5rem'} color={iconColor} /></ListItemIcon>\n                <ListItemText primary='Open File ...' />\n              </ListItem>\n              <ListItem button onClick={() => this.showOpenUrl()}>\n                <ListItemIcon><Icon path={mdiWeb} size={'1.5rem'} color={iconColor} /></ListItemIcon>\n                <ListItemText primary='Open URL ...' />\n              </ListItem>\n              <ListItem button onClick={() => this.clear()}>\n                <ListItemIcon><Icon path={mdiDelete} size={'1.5rem'} color={iconColor} /></ListItemIcon>\n                <ListItemText primary='Clear' />\n              </ListItem>  \n              <ListItem button onClick={this.handleLayout}>\n                <ListItemIcon><Icon path={mdiViewGridPlusOutline} size={'1.5rem'} color={iconColor} /></ListItemIcon>\n                <ListItemText primary='Layout' />              \n              </ListItem>   \n              <ListItem button onClick={() => this.showSettings()}>\n                <ListItemIcon><Icon path={mdiSettings} size={'1.5rem'} color={iconColor} /></ListItemIcon>\n                <ListItemText primary='Settings' />\n              </ListItem>                \n              <Divider />\n              <ListItem button onClick={() => this.toolExecute('notool')} disabled={!isOpen}>\n                <ListItemIcon><Icon path={mdiCursorDefault} size={'1.5rem'} color={iconColor} /></ListItemIcon>\n                <ListItemText primary='No tool' />\n              </ListItem>         \n              <ListItem button onClick={() => this.toolExecute('Wwwc')} disabled={!isOpen}>\n                <ListItemIcon><Icon path={mdiArrowAll} size={'1.5rem'} color={iconColor} /></ListItemIcon>\n                <ListItemText primary='WW/WC' />\n              </ListItem>  \n              <ListItem button onClick={() => this.toolExecute('Pan')} disabled={!isOpen}>\n                <ListItemIcon><Icon path={mdiCursorPointer} size={'1.5rem'} color={iconColor} /></ListItemIcon>\n                <ListItemText primary='Pan' />\n              </ListItem>  \n              <ListItem button onClick={() => this.toolExecute('Zoom')} disabled={!isOpen}>\n                <ListItemIcon><Icon path={mdiMagnify} size={'1.5rem'} color={iconColor} /></ListItemIcon>\n                <ListItemText primary='Zoom' />\n              </ListItem>      \n              <ListItem button onClick={() => this.toolExecute('Magnify')} disabled={!isOpen}>\n                <ListItemIcon><Icon path={mdiCheckboxIntermediate} size={'1.5rem'} color={iconColor} /></ListItemIcon>\n                <ListItemText primary='Magnify' />\n              </ListItem>       \n              <ListItem button onClick={() => this.toolExecute('Length')} disabled={!isOpen}>\n                <ListItemIcon><Icon path={mdiRuler} size={'1.5rem'} color={iconColor} /></ListItemIcon>\n                <ListItemText primary='Length' />\n              </ListItem>        \n              <ListItem button onClick={() => this.toolExecute('Probe')} disabled={!isOpen}>\n                <ListItemIcon><Icon path={mdiEyedropper} size={'1.5rem'} color={iconColor} /></ListItemIcon>\n                <ListItemText primary='Probe' />\n              </ListItem> \n              <ListItem button onClick={() => this.toolExecute('Angle')} disabled={!isOpen}>\n                <ListItemIcon><Icon path={mdiAngleAcute} size={'1.5rem'} color={iconColor} /></ListItemIcon>\n                <ListItemText primary='Angle' />\n              </ListItem>  \n              <ListItem button onClick={() => this.toolExecute('EllipticalRoi')} disabled={!isOpen}>\n                <ListItemIcon><Icon path={mdiEllipse} size={'1.5rem'} color={iconColor} /></ListItemIcon>\n                <ListItemText primary='Elliptical Roi' />\n              </ListItem>     \n              <ListItem button onClick={() => this.toolExecute('RectangleRoi')} disabled={!isOpen}>\n                <ListItemIcon><Icon path={mdiRectangle} size={'1.5rem'} color={iconColor} /></ListItemIcon>\n                <ListItemText primary='Rectangle Roi' />\n              </ListItem> \n              <ListItem button onClick={() => this.toolExecute('FreehandRoi')} disabled={!isOpen}>\n                <ListItemIcon><Icon path={mdiGesture} size={'1.5rem'} color={iconColor} /></ListItemIcon>\n                <ListItemText primary='Freehand Roi' />\n              </ListItem> \n              <ListItem button onClick={() => this.toolExecute('Histogram')} disabled={!isOpen}>\n                <ListItemIcon><Icon path={mdiChartHistogram} size={'1.5rem'} color={iconColor} /></ListItemIcon>\n                <ListItemText primary='Histogram' />\n              </ListItem>  \n              <ListItem button onClick={() => this.toggleImageEdit()} disabled={!isOpen}>\n                <ListItemIcon><Icon path={mdiImageEdit} size={'1.5rem'} color={iconColor} /></ListItemIcon>\n                <ListItemText primary='Edit' />\n                {openImageEdit ? <ExpandLess /> : <ExpandMore />}\n              </ListItem>          \n              <Collapse in={openImageEdit} timeout=\"auto\" unmountOnExit>\n                <List  dense={true} component=\"div\">\n                  <ListItem button style={{paddingLeft: 30}} onClick={() => this.toolExecute('Invert')}>\n                    <ListItemIcon><Icon path={mdiInvertColors} size={'1.5rem'} color={iconColor} /></ListItemIcon>\n                    <ListItemText primary=\"Invert\" />\n                  </ListItem>\n                </List>\n              </Collapse>\n            </List>\n          </div>\n        </Drawer>       \n\n        <Drawer\n          variant=\"persistent\"\n          anchor='right'\n          open={visibleHeader}\n          onClose={this.toggleHeader}\n        >\n          { visibleHeader ? <DicomHeader dcmViewer={dcmViewer} classes={classes} color={iconColor} /> : null } \n        </Drawer>\n\n        <Drawer\n          variant=\"persistent\"\n          anchor='right'\n          open={visibleMeasure}\n          onClose={this.toggleMeasure}\n        >\n          <div style={{marginTop: '48px'}}>\n            <Toolbar variant=\"dense\">\n              <Typography variant=\"subtitle1\" className={classes.title}>\n                Measurements&nbsp;&nbsp;\n              </Typography>\n              <div className={classes.grow} />\n              <IconButton color=\"inherit\" onClick={this.saveMeasure} edge=\"end\">\n                <Icon path={mdiContentSaveOutline} size={'1.5rem'} color={iconColor} />\n              </IconButton>\n              <IconButton color=\"inherit\" onClick={this.clearMeasure} edge=\"end\">\n                <Icon path={mdiTrashCanOutline} size={'1.5rem'} color={iconColor} />\n              </IconButton>\n            </Toolbar>\n            <div>  \n              { isOpen ? <Measurements dcmViewer={dcmViewer} toolRemove={this.toolRemove} classes={classes} /> : null } \n            </div>\n          </div>\n        </Drawer>  \n\n        <Drawer\n          variant=\"persistent\"\n          anchor='right'\n          open={visibleToolbox}\n          onClose={this.toggleToolbox}\n        >\n          <div style={{marginTop: '48px'}}>\n            <div>  \n              { isOpen ? <Histogram key={this.getFileName(dcmViewer)} /> : null } \n            </div>\n          </div>\n        </Drawer>          \n\n        {visibleSettings ? <Settings onClose={this.hideSettings}/>: null}\n\n        {visibleAbout ? <AboutDlg onClose={this.showAbout}/>: null}\n\n        <Dialog\n            open={this.state.visibleClearMeasureDlg}\n            onClose={this.hideClearMeasureDlg}\n            aria-labelledby=\"alert-dialog-title\"\n        >\n            <DialogTitle id=\"alert-dialog-title\">{\"Are you sure to remove all the measurements?\"}</DialogTitle>\n            <DialogActions>\n                <Button onClick={this.hideClearMeasureDlg}>\n                    Cancel\n                </Button>\n                <Button onClick={this.confirmClearMeasureDlg} autoFocus>\n                    Ok\n                </Button>\n            </DialogActions>\n        </Dialog>\n\n        <Dialog\n            open={this.state.visibleOpenUrl}\n            aria-labelledby=\"form-dialog-title\"\n        >\n            <DialogTitle id=\"form-dialog-title\">{\"Open URL\"}</DialogTitle>\n              <DialogContent>\n                <DialogContentText id=\"alert-dialog-description\">\n                  Insert an URL to download a DICOM or image file:\n                </DialogContentText>\n                <TextField\n                    autoFocus\n                    margin=\"dense\"\n                    id=\"id-open-url\"\n                    inputRef={input => (this.openUrlField = input)}\n                    fullWidth\n                />\n              </DialogContent>\n            <DialogActions>\n                <Button onClick={() => this.hideOpenUrl(false)} >\n                    Cancel\n                </Button>\n                <Button onClick={() => this.hideOpenUrl(true)} autoFocus>\n                    Ok\n                </Button>\n            </DialogActions>\n        </Dialog>\n\n        <Popover\n          id={'id-layout'}\n          open={visibleLayout}\n          anchorEl={this.state.anchorElLayout}\n          onClose={this.closeLayout}\n          anchorOrigin={{\n            vertical: 'center',\n            horizontal: 'right',\n          }}\n          transformOrigin={{\n            vertical: 'center',\n            horizontal: 'left',\n          }}\n        >\n          <LayoutTool \n            row={this.props.layout[0]-1} \n            col={this.props.layout[1]-1}\n            onChange={this.changeLayout}\n          />  \n        </Popover>        \n\n        <div style={{height: 'calc(100vh - 48px)'}}>\n          {this.buildLayoutGrid()}  \n        </div>\n\n        <div>\n          <input\n            type=\"file\"\n            id=\"my_file\"\n            style={{ display: \"none\" }}\n            ref={this.fileOpen}\n            onChange={e => this.handleOpenFile(e.target.files)}\n          />\n        </div>\n    \n      </div>\n    )\n  }\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    isOpen: state.isOpen,\n    tool: state.tool,\n    activeDcmIndex: state.activeDcmIndex,\n    measurements: state.measurements,\n    layout: state.layout\n  }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    toolStore: (tool) => dispatch(dcmTool(tool)),\n    isOpenStore: (value) => dispatch(dcmIsOpen(value)),\n    setActiveDcm: (dcm) => dispatch(activeDcm(dcm)),\n    setActiveDcmIndex: (index) => dispatch(activeDcmIndex(index)),\n    setActiveMeasurements: (measurements) => dispatch(activeMeasurements(measurements)),\n    setLayoutStore: (row, col) => dispatch(setLayout(row, col)),\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(withStyles(styles)(App))\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import {createStore} from 'redux'\r\nimport storeReducer from '../reducers/index'\r\n\r\nlet initialState = {\r\n    isOpen: new Array(16).fill(false),\r\n    tool: null,\r\n    activeDcmIndex: 0,\r\n    activeDcm: null,\r\n    images: [],\r\n    measurements: null,\r\n    layout: [1,1] // first element represents the rows, second the columns\r\n}\r\n\r\nconst store = createStore(storeReducer, initialState,\r\n    window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__())\r\n\r\nexport default store\r\n","import {\r\n  CLEAR_STORE, \r\n  DCM_IS_OPEN, \r\n  DCM_TOOL, \r\n  ACTIVE_DCM_INDEX, \r\n  ACTIVE_DCM, \r\n  DCM_IMAGE,\r\n  ACTIVE_MEASUREMENTS,\r\n  LAYOUT\r\n} from '../actions'\r\n\r\nexport default function storeReducer(state={}, action) {\r\n    switch(action.type) {\r\n      \r\n      case CLEAR_STORE:\r\n        return {\r\n          isOpen: state.isOpen.map((el, i) => i === state.activeDcmIndex ? false : el),\r\n          tool: null,\r\n          activeDcmIndex: state.activeDcmIndex,\r\n          activeDcm: state.activeDcm,\r\n          images: [],\r\n          measurements: null,\r\n          layout: state.layout\r\n        }    \r\n\r\n      case DCM_IS_OPEN:\r\n          return {\r\n            ...state,\r\n            isOpen: state.isOpen.map((el, i) => i === state.activeDcmIndex ? action.value : el),\r\n            images: [\r\n              ...state.images\r\n            ],            \r\n            measurements: state.measurements,\r\n            layout: state.layout        \r\n          }    \r\n\r\n      case DCM_TOOL:\r\n          return {\r\n            ...state,\r\n            tool: action.tool,\r\n            images: [\r\n              ...state.images\r\n            ],  \r\n            measurements: state.measurements,\r\n            layout: state.layout\r\n          }  \r\n\r\n      case ACTIVE_DCM_INDEX:\r\n          return {\r\n            ...state,\r\n            activeDcmIndex: action.activeDcmIndex,\r\n            images: [\r\n              ...state.images\r\n            ],  \r\n            measurements: state.measurements,\r\n            layout: state.layout\r\n          }  \r\n\r\n      case ACTIVE_DCM:\r\n          return {\r\n            ...state,\r\n            activeDcm: action.activeDcm,\r\n            images: [\r\n              ...state.images\r\n            ],  \r\n            measurements: state.measurements,\r\n            layout: state.layout\r\n          }            \r\n\r\n      case DCM_IMAGE:\r\n          return {\r\n            ...state,\r\n            images: [\r\n              ...state.images,\r\n              action.images,\r\n            ],  \r\n            measurements: state.measurements,\r\n            layout: state.layout\r\n          } \r\n\r\n      case ACTIVE_MEASUREMENTS:\r\n        return {\r\n          ...state,\r\n          measurements: [...action.measurements],\r\n        }             \r\n\r\n      case LAYOUT:\r\n            return {\r\n              ...state,\r\n              images: [...state.images],\r\n              measurements: state.measurements,\r\n              layout: action.layout\r\n            }  \r\n\r\n      default:\r\n          return state\r\n    }\r\n  }\r\n  ","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport WebFontLoader from 'webfontloader';\nimport {Provider} from 'react-redux'\nimport store from './store'\nimport { MuiThemeProvider, createMuiTheme } from '@material-ui/core/styles'\n\nWebFontLoader.load({\n    google: {\n        families: ['Roboto:300,400,500,700', 'Material Icons'],\n    },\n});\n\nstore.subscribe(() => console.log('store updated:', store.getState()));\n\nconst theme = createMuiTheme({\n    palette: {\n        primary: {\n            main: '#004d40',\n        },\n        secondary: {\n            main: '#888888',\n        },\n        type: 'dark',\n    },\n  })\n\n  \nReactDOM.render(\n    <Provider store={store}>\n        <MuiThemeProvider theme = { theme }>\n            <App />\n        </MuiThemeProvider>\n    </Provider>, \n    document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n "],"sourceRoot":""}