(window["webpackJsonpu-dicom-viewer"]=window["webpackJsonpu-dicom-viewer"]||[]).push([[0],{108:function(e){e.exports=JSON.parse('{"name":"u-dicom-viewer","version":"0.4.1","private":true,"homepage":"https://webnamics.github.io/u-dicom-viewer/","dependencies":{"@material-ui/core":"^4.5.1","@material-ui/icons":"^4.5.1","@mdi/js":"^4.4.95","@mdi/react":"^1.2.1","@react-md/material-icons":"^2.0.0-alpha.0","cornerstone-core":"^2.3.0","cornerstone-file-image-loader":"^0.1.2","cornerstone-math":"^0.1.8","cornerstone-tools":"^4.6.2","cornerstone-wado-image-loader":"^3.0.0","cornerstone-web-image-loader":"^2.1.1","daikon":"^1.2.42","dexie":"^2.0.4","dicom-parser":"^1.8.3","gh-pages":"^2.1.1","hammerjs":"^2.0.8","lodash":"^4.17.15","lodash.template":"^4.5.0","react":"^16.9.0","react-device-detect":"^1.7.5","react-dom":"^16.9.0","react-icons":"^3.7.0","react-redux":"^7.1.0","react-resize-detector":"^4.2.1","react-rnd":"^10.1.1","react-router":"^5.0.1","react-router-dom":"^5.0.1","react-scripts":"3.1.1","redux":"^4.0.4","set-value":"2.0.1","uuid":"^3.3.3","webfontloader":"^1.6.28"},"scripts":{"start":"react-scripts start","build":"react-scripts build","test":"react-scripts test","predeploy":"npm run build","deploy":"gh-pages -d build","eject":"react-scripts eject"},"eslintConfig":{"extends":"react-app"},"browserslist":{"production":[">0.2%","not dead","not op_mini all"],"development":["last 1 chrome version","last 1 firefox version","last 1 safari version"]},"devDependencies":{"@babel/core":"^7.7.2","babel-core":"^6.26.3","babel-loader":"^8.0.6","npm-run-all":"^4.1.5"}}')},131:function(e,t,a){e.exports=a(146)},136:function(e,t,a){},145:function(e,t,a){},146:function(e,t,a){"use strict";a.r(t);var o=a(0),r=a.n(o),n=a(12),i=a.n(n),l=(a(136),a(17)),s=a(18),c=a(20),m=a(19),u=a(67),d=a(21),g=a(35),p=a(30),h=a(184),f=a(176),v=a(183),S=a(181),E=a(185),b=a(180),y=a(186),P=a(40),C=a(100),O=a.n(C),I=a(14),F=a(5),R=a(101),M=a(84),D=a(102),T=a(62),w=a(103),x="CLEAR_STORE",k="DCM_IS_OPEN",A="DCM_TOOL",j="ACTIVE_DCM_INDEX",V="ACTIVE_DCM",L="DCM_IMAGE",G="ACTIVE_MEASUREMENTS",B="LAYOUT",N=function(e){return{type:k,value:e}},U=function(e){return{type:A,tool:e}},H=function(e){return{type:V,activeDcm:e}},W=function(e){return{type:G,measurements:e}},z={"1.2.840.10008.1.1":"Verification SOP Class","1.2.840.10008.1.2":"Implicit VR Little Endian: Default Transfer Syntax for DICOM","1.2.840.10008.1.2.1":"Explicit VR Little Endian","1.2.840.10008.1.2.1.99":"Deflated Explicit VR Little Endian","1.2.840.10008.1.2.2":"Explicit VR Big Endian (Retired)","1.2.840.10008.1.2.4.50":"JPEG Baseline (Process 1): Default Transfer Syntax for Lossy JPEG 8 Bit Image Compression","1.2.840.10008.1.2.4.51":"JPEG Extended (Process 2 & 4): Default Transfer Syntax for Lossy JPEG 12 Bit Image Compression (Process 4 only)","1.2.840.10008.1.2.4.52":"JPEG Extended (Process 3 & 5) (Retired)","1.2.840.10008.1.2.4.53":"JPEG Spectral Selection, Non-Hierarchical (Process 6 & 8) (Retired)","1.2.840.10008.1.2.4.54":"JPEG Spectral Selection, Non-Hierarchical (Process 7 & 9) (Retired)","1.2.840.10008.1.2.4.55":"JPEG Full Progression, Non-Hierarchical (Process 10 & 12) (Retired)","1.2.840.10008.1.2.4.56":"JPEG Full Progression, Non-Hierarchical (Process 11 & 13) (Retired)","1.2.840.10008.1.2.4.57":"JPEG Lossless, Non-Hierarchical (Process 14)","1.2.840.10008.1.2.4.58":"JPEG Lossless, Non-Hierarchical (Process 15) (Retired)","1.2.840.10008.1.2.4.59":"JPEG Extended, Hierarchical (Process 16 & 18) (Retired)","1.2.840.10008.1.2.4.60":"JPEG Extended, Hierarchical (Process 17 & 19) (Retired)","1.2.840.10008.1.2.4.61":"JPEG Spectral Selection, Hierarchical (Process 20 & 22) (Retired)","1.2.840.10008.1.2.4.62":"JPEG Spectral Selection, Hierarchical (Process 21 & 23) (Retired)","1.2.840.10008.1.2.4.63":"JPEG Full Progression, Hierarchical (Process 24 & 26) (Retired)","1.2.840.10008.1.2.4.64":"JPEG Full Progression, Hierarchical (Process 25 & 27) (Retired)","1.2.840.10008.1.2.4.65":"JPEG Lossless, Hierarchical (Process 28) (Retired)","1.2.840.10008.1.2.4.66":"JPEG Lossless, Hierarchical (Process 29) (Retired)","1.2.840.10008.1.2.4.70":"JPEG Lossless, Non-Hierarchical, First-Order Prediction (Process 14 [Selection Value 1]): Default Transfer Syntax for Lossless JPEG Image Compression","1.2.840.10008.1.2.4.80":"JPEG-LS Lossless Image Compression","1.2.840.10008.1.2.4.81":"JPEG-LS Lossy (Near-Lossless) Image Compression","1.2.840.10008.1.2.4.90":"JPEG 2000 Image Compression (Lossless Only)","1.2.840.10008.1.2.4.91":"JPEG 2000 Image Compression","1.2.840.10008.1.2.4.92":"JPEG 2000 Part 2 Multi-component Image Compression (Lossless Only)","1.2.840.10008.1.2.4.93":"JPEG 2000 Part 2 Multi-component Image Compression","1.2.840.10008.1.2.4.94":"JPIP Referenced","1.2.840.10008.1.2.4.95":"JPIP Referenced Deflate","1.2.840.10008.1.2.4.100":"MPEG2 Main Profile @ Main Level","1.2.840.10008.1.2.4.101":"MPEG2 Main Profile @ High Level","1.2.840.10008.1.2.4.102":"MPEG-4 AVC/H.264 High Profile / Level 4.1","1.2.840.10008.1.2.4.103":"MPEG-4 AVC/H.264 BD-compatible High Profile / Level 4.1","1.2.840.10008.1.2.4.104":"MPEG-4 AVC/H.264 High Profile / Level 4.2 For 2D Video","1.2.840.10008.1.2.4.105":"MPEG-4 AVC/H.264 High Profile / Level 4.2 For 3D Video","1.2.840.10008.1.2.4.106":"MPEG-4 AVC/H.264 Stereo High Profile / Level 4.2","1.2.840.10008.1.2.5":"RLE Lossless","1.2.840.10008.1.2.6.1":"RFC 2557 MIME encapsulation","1.2.840.10008.1.2.6.2":"XML Encoding","1.2.840.10008.1.3.10":"Media Storage Directory Storage","1.2.840.10008.1.4.1.1":"Talairach Brain Atlas Frame of Reference","1.2.840.10008.1.4.1.2":"SPM2 T1 Frame of Reference","1.2.840.10008.1.4.1.3":"SPM2 T2 Frame of Reference","1.2.840.10008.1.4.1.4":"SPM2 PD Frame of Reference","1.2.840.10008.1.4.1.5":"SPM2 EPI Frame of Reference","1.2.840.10008.1.4.1.6":"SPM2 FIL T1 Frame of Reference","1.2.840.10008.1.4.1.7":"SPM2 PET Frame of Reference","1.2.840.10008.1.4.1.8":"SPM2 TRANSM Frame of Reference","1.2.840.10008.1.4.1.9":"SPM2 SPECT Frame of Reference","1.2.840.10008.1.4.1.10":"SPM2 GRAY Frame of Reference","1.2.840.10008.1.4.1.11":"SPM2 WHITE Frame of Reference","1.2.840.10008.1.4.1.12":"SPM2 CSF Frame of Reference","1.2.840.10008.1.4.1.13":"SPM2 BRAINMASK Frame of Reference","1.2.840.10008.1.4.1.14":"SPM2 AVG305T1 Frame of Reference","1.2.840.10008.1.4.1.15":"SPM2 AVG152T1 Frame of Reference","1.2.840.10008.1.4.1.16":"SPM2 AVG152T2 Frame of Reference","1.2.840.10008.1.4.1.17":"SPM2 AVG152PD Frame of Reference","1.2.840.10008.1.4.1.18":"SPM2 SINGLESUBJT1 Frame of Reference","1.2.840.10008.1.4.2.1":"ICBM 452 T1 Frame of Reference","1.2.840.10008.1.4.2.2":"ICBM Single Subject MRI Frame of Reference","1.2.840.10008.1.5.1":"Hot Iron Color Palette SOP Instance","1.2.840.10008.1.5.2":"PET Color Palette SOP Instance","1.2.840.10008.1.5.3":"Hot Metal Blue Color Palette SOP Instance","1.2.840.10008.1.5.4":"PET 20 Step Color Palette SOP Instance","1.2.840.10008.1.9":"Basic Study Content Notification SOP Class (Retired)","1.2.840.10008.1.20.1":"Storage Commitment Push Model SOP Class","1.2.840.10008.1.20.1.1":"Storage Commitment Push Model SOP Instance","1.2.840.10008.1.20.2":"Storage Commitment Pull Model SOP Class (Retired)","1.2.840.10008.1.20.2.1":"Storage Commitment Pull Model SOP Instance (Retired)","1.2.840.10008.1.40":"Procedural Event Logging SOP Class","1.2.840.10008.1.40.1":"Procedural Event Logging SOP Instance","1.2.840.10008.1.42":"Substance Administration Logging SOP Class","1.2.840.10008.1.42.1":"Substance Administration Logging SOP Instance","1.2.840.10008.2.6.1":"DICOM UID Registry","1.2.840.10008.2.16.4":"DICOM Controlled Terminology","1.2.840.10008.3.1.1.1":"DICOM Application Context Name","1.2.840.10008.3.1.2.1.1":"Detached Patient Management SOP Class (Retired)","1.2.840.10008.3.1.2.1.4":"Detached Patient Management Meta SOP Class (Retired)","1.2.840.10008.3.1.2.2.1":"Detached Visit Management SOP Class (Retired)","1.2.840.10008.3.1.2.3.1":"Detached Study Management SOP Class (Retired)","1.2.840.10008.3.1.2.3.2":"Study Component Management SOP Class (Retired)","1.2.840.10008.3.1.2.3.3":"Modality Performed Procedure Step SOP Class","1.2.840.10008.3.1.2.3.4":"Modality Performed Procedure Step Retrieve SOP Class","1.2.840.10008.3.1.2.3.5":"Modality Performed Procedure Step Notification SOP Class","1.2.840.10008.3.1.2.5.1":"Detached Results Management SOP Class (Retired)","1.2.840.10008.3.1.2.5.4":"Detached Results Management Meta SOP Class (Retired)","1.2.840.10008.3.1.2.5.5":"Detached Study Management Meta SOP Class (Retired)","1.2.840.10008.3.1.2.6.1":"Detached Interpretation Management SOP Class (Retired)","1.2.840.10008.4.2":"Storage Service Class","1.2.840.10008.5.1.1.1":"Basic Film Session SOP Class","1.2.840.10008.5.1.1.2":"Basic Film Box SOP Class","1.2.840.10008.5.1.1.4":"Basic Grayscale Image Box SOP Class","1.2.840.10008.5.1.1.4.1":"Basic Color Image Box SOP Class","1.2.840.10008.5.1.1.4.2":"Referenced Image Box SOP Class (Retired)","1.2.840.10008.5.1.1.9":"Basic Grayscale Print Management Meta SOP Class","1.2.840.10008.5.1.1.9.1":"Referenced Grayscale Print Management Meta SOP Class (Retired)","1.2.840.10008.5.1.1.14":"Print Job SOP Class","1.2.840.10008.5.1.1.15":"Basic Annotation Box SOP Class","1.2.840.10008.5.1.1.16":"Printer SOP Class","1.2.840.10008.5.1.1.16.376":"Printer Configuration Retrieval SOP Class","1.2.840.10008.5.1.1.17":"Printer SOP Instance","1.2.840.10008.5.1.1.17.376":"Printer Configuration Retrieval SOP Instance","1.2.840.10008.5.1.1.18":"Basic Color Print Management Meta SOP Class","1.2.840.10008.5.1.1.18.1":"Referenced Color Print Management Meta SOP Class (Retired)","1.2.840.10008.5.1.1.22":"VOI LUT Box SOP Class","1.2.840.10008.5.1.1.23":"Presentation LUT SOP Class","1.2.840.10008.5.1.1.24":"Image Overlay Box SOP Class (Retired)","1.2.840.10008.5.1.1.24.1":"Basic Print Image Overlay Box SOP Class (Retired)","1.2.840.10008.5.1.1.25":"Print Queue SOP Instance (Retired)","1.2.840.10008.5.1.1.26":"Print Queue Management SOP Class (Retired)","1.2.840.10008.5.1.1.27":"Stored Print Storage SOP Class (Retired)","1.2.840.10008.5.1.1.29":"Hardcopy Grayscale Image Storage SOP Class (Retired)","1.2.840.10008.5.1.1.30":"Hardcopy Color Image Storage SOP Class (Retired)","1.2.840.10008.5.1.1.31":"Pull Print Request SOP Class (Retired)","1.2.840.10008.5.1.1.32":"Pull Stored Print Management Meta SOP Class (Retired)","1.2.840.10008.5.1.1.33":"Media Creation Management SOP Class UID","1.2.840.10008.5.1.1.40":"Display System SOP Class","1.2.840.10008.5.1.1.40.1":"Display System SOP Instance","1.2.840.10008.5.1.4.1.1.1":"Computed Radiography Image Storage","1.2.840.10008.5.1.4.1.1.1.1":"Digital X-Ray Image Storage - For Presentation","1.2.840.10008.5.1.4.1.1.1.1.1":"Digital X-Ray Image Storage - For Processing","1.2.840.10008.5.1.4.1.1.1.2":"Digital Mammography X-Ray Image Storage - For Presentation","1.2.840.10008.5.1.4.1.1.1.2.1":"Digital Mammography X-Ray Image Storage - For Processing","1.2.840.10008.5.1.4.1.1.1.3":"Digital Intra-Oral X-Ray Image Storage - For Presentation","1.2.840.10008.5.1.4.1.1.1.3.1":"Digital Intra-Oral X-Ray Image Storage - For Processing","1.2.840.10008.5.1.4.1.1.2":"CT Image Storage","1.2.840.10008.5.1.4.1.1.2.1":"Enhanced CT Image Storage","1.2.840.10008.5.1.4.1.1.2.2":"Legacy Converted Enhanced CT Image Storage","1.2.840.10008.5.1.4.1.1.3":"Ultrasound Multi-frame Image Storage (Retired)","1.2.840.10008.5.1.4.1.1.3.1":"Ultrasound Multi-frame Image Storage","1.2.840.10008.5.1.4.1.1.4":"MR Image Storage","1.2.840.10008.5.1.4.1.1.4.1":"Enhanced MR Image Storage","1.2.840.10008.5.1.4.1.1.4.2":"MR Spectroscopy Storage","1.2.840.10008.5.1.4.1.1.4.3":"Enhanced MR Color Image Storage","1.2.840.10008.5.1.4.1.1.4.4":"Legacy Converted Enhanced MR Image Storage","1.2.840.10008.5.1.4.1.1.5":"Nuclear Medicine Image Storage (Retired)","1.2.840.10008.5.1.4.1.1.6":"Ultrasound Image Storage (Retired)","1.2.840.10008.5.1.4.1.1.6.1":"Ultrasound Image Storage","1.2.840.10008.5.1.4.1.1.6.2":"Enhanced US Volume Storage","1.2.840.10008.5.1.4.1.1.7":"Secondary Capture Image Storage","1.2.840.10008.5.1.4.1.1.7.1":"Multi-frame Single Bit Secondary Capture Image Storage","1.2.840.10008.5.1.4.1.1.7.2":"Multi-frame Grayscale Byte Secondary Capture Image Storage","1.2.840.10008.5.1.4.1.1.7.3":"Multi-frame Grayscale Word Secondary Capture Image Storage","1.2.840.10008.5.1.4.1.1.7.4":"Multi-frame True Color Secondary Capture Image Storage","1.2.840.10008.5.1.4.1.1.8":"Standalone Overlay Storage (Retired)","1.2.840.10008.5.1.4.1.1.9":"Standalone Curve Storage (Retired)","1.2.840.10008.5.1.4.1.1.9.1":"Waveform Storage - Trial (Retired)","1.2.840.10008.5.1.4.1.1.9.1.1":"12-lead ECG Waveform Storage","1.2.840.10008.5.1.4.1.1.9.1.2":"General ECG Waveform Storage","1.2.840.10008.5.1.4.1.1.9.1.3":"Ambulatory ECG Waveform Storage","1.2.840.10008.5.1.4.1.1.9.2.1":"Hemodynamic Waveform Storage","1.2.840.10008.5.1.4.1.1.9.3.1":"Cardiac Electrophysiology Waveform Storage","1.2.840.10008.5.1.4.1.1.9.4.1":"Basic Voice Audio Waveform Storage","1.2.840.10008.5.1.4.1.1.9.4.2":"General Audio Waveform Storage","1.2.840.10008.5.1.4.1.1.9.5.1":"Arterial Pulse Waveform Storage","1.2.840.10008.5.1.4.1.1.9.6.1":"Respiratory Waveform Storage","1.2.840.10008.5.1.4.1.1.10":"Standalone Modality LUT Storage (Retired)","1.2.840.10008.5.1.4.1.1.11":"Standalone VOI LUT Storage (Retired)","1.2.840.10008.5.1.4.1.1.11.1":"Grayscale Softcopy Presentation State Storage SOP Class","1.2.840.10008.5.1.4.1.1.11.2":"Color Softcopy Presentation State Storage SOP Class","1.2.840.10008.5.1.4.1.1.11.3":"Pseudo-Color Softcopy Presentation State Storage SOP Class","1.2.840.10008.5.1.4.1.1.11.4":"Blending Softcopy Presentation State Storage SOP Class","1.2.840.10008.5.1.4.1.1.11.5":"XA/XRF Grayscale Softcopy Presentation State Storage","1.2.840.10008.5.1.4.1.1.12.1":"X-Ray Angiographic Image Storage","1.2.840.10008.5.1.4.1.1.12.1.1":"Enhanced XA Image Storage","1.2.840.10008.5.1.4.1.1.12.2":"X-Ray Radiofluoroscopic Image Storage","1.2.840.10008.5.1.4.1.1.12.2.1":"Enhanced XRF Image Storage","1.2.840.10008.5.1.4.1.1.12.3":"X-Ray Angiographic Bi-Plane Image Storage (Retired)","1.2.840.10008.5.1.4.1.1.13.1.1":"X-Ray 3D Angiographic Image Storage","1.2.840.10008.5.1.4.1.1.13.1.2":"X-Ray 3D Craniofacial Image Storage","1.2.840.10008.5.1.4.1.1.13.1.3":"Breast Tomosynthesis Image Storage","1.2.840.10008.5.1.4.1.1.13.1.4":"Breast Projection X-Ray Image Storage - For Presentation","1.2.840.10008.5.1.4.1.1.13.1.5":"Breast Projection X-Ray Image Storage - For Processing","1.2.840.10008.5.1.4.1.1.14.1":"Intravascular Optical Coherence Tomography Image Storage - For Presentation","1.2.840.10008.5.1.4.1.1.14.2":"Intravascular Optical Coherence Tomography Image Storage - For Processing","1.2.840.10008.5.1.4.1.1.20":"Nuclear Medicine Image Storage","1.2.840.10008.5.1.4.1.1.30":"Parametric Map Storage","1.2.840.10008.5.1.4.1.1.66":"Raw Data Storage","1.2.840.10008.5.1.4.1.1.66.1":"Spatial Registration Storage","1.2.840.10008.5.1.4.1.1.66.2":"Spatial Fiducials Storage","1.2.840.10008.5.1.4.1.1.66.3":"Deformable Spatial Registration Storage","1.2.840.10008.5.1.4.1.1.66.4":"Segmentation Storage","1.2.840.10008.5.1.4.1.1.66.5":"Surface Segmentation Storage","1.2.840.10008.5.1.4.1.1.67":"Real World Value Mapping Storage","1.2.840.10008.5.1.4.1.1.68.1":"Surface Scan Mesh Storage","1.2.840.10008.5.1.4.1.1.68.2":"Surface Scan Point Cloud Storage","1.2.840.10008.5.1.4.1.1.77.1":"VL Image Storage - Trial (Retired)","1.2.840.10008.5.1.4.1.1.77.2":"VL Multi-frame Image Storage - Trial (Retired)","1.2.840.10008.5.1.4.1.1.77.1.1":"VL Endoscopic Image Storage","1.2.840.10008.5.1.4.1.1.77.1.1.1":"Video Endoscopic Image Storage","1.2.840.10008.5.1.4.1.1.77.1.2":"VL Microscopic Image Storage","1.2.840.10008.5.1.4.1.1.77.1.2.1":"Video Microscopic Image Storage","1.2.840.10008.5.1.4.1.1.77.1.3":"VL Slide-Coordinates Microscopic Image Storage","1.2.840.10008.5.1.4.1.1.77.1.4":"VL Photographic Image Storage","1.2.840.10008.5.1.4.1.1.77.1.4.1":"Video Photographic Image Storage","1.2.840.10008.5.1.4.1.1.77.1.5.1":"Ophthalmic Photography 8 Bit Image Storage","1.2.840.10008.5.1.4.1.1.77.1.5.2":"Ophthalmic Photography 16 Bit Image Storage","1.2.840.10008.5.1.4.1.1.77.1.5.3":"Stereometric Relationship Storage","1.2.840.10008.5.1.4.1.1.77.1.5.4":"Ophthalmic Tomography Image Storage","1.2.840.10008.5.1.4.1.1.77.1.5.5":"Wide Field Ophthalmic Photography Stereographic Projection Image Storage","1.2.840.10008.5.1.4.1.1.77.1.5.6":"Wide Field Ophthalmic Photography 3D Coordinates Image Storage","1.2.840.10008.5.1.4.1.1.77.1.6":"VL Whole Slide Microscopy Image Storage","1.2.840.10008.5.1.4.1.1.78.1":"Lensometry Measurements Storage","1.2.840.10008.5.1.4.1.1.78.2":"Autorefraction Measurements Storage","1.2.840.10008.5.1.4.1.1.78.3":"Keratometry Measurements Storage","1.2.840.10008.5.1.4.1.1.78.4":"Subjective Refraction Measurements Storage","1.2.840.10008.5.1.4.1.1.78.5":"Visual Acuity Measurements Storage","1.2.840.10008.5.1.4.1.1.78.6":"Spectacle Prescription Report Storage","1.2.840.10008.5.1.4.1.1.78.7":"Ophthalmic Axial Measurements Storage","1.2.840.10008.5.1.4.1.1.78.8":"Intraocular Lens Calculations Storage","1.2.840.10008.5.1.4.1.1.79.1":"Macular Grid Thickness and Volume Report Storage","1.2.840.10008.5.1.4.1.1.80.1":"Ophthalmic Visual Field Static Perimetry Measurements Storage","1.2.840.10008.5.1.4.1.1.81.1":"Ophthalmic Thickness Map Storage","1.2.840.10008.5.1.4.1.1.82.1":"Corneal Topography Map Storage","1.2.840.10008.5.1.4.1.1.88.1":"Text SR Storage - Trial (Retired)","1.2.840.10008.5.1.4.1.1.88.2":"Audio SR Storage - Trial (Retired)","1.2.840.10008.5.1.4.1.1.88.3":"Detail SR Storage - Trial (Retired)","1.2.840.10008.5.1.4.1.1.88.4":"Comprehensive SR Storage - Trial (Retired)","1.2.840.10008.5.1.4.1.1.88.11":"Basic Text SR Storage","1.2.840.10008.5.1.4.1.1.88.22":"Enhanced SR Storage","1.2.840.10008.5.1.4.1.1.88.33":"Comprehensive SR Storage","1.2.840.10008.5.1.4.1.1.88.34":"Comprehensive 3D SR Storage","1.2.840.10008.5.1.4.1.1.88.35":"Extensible SR Storage","1.2.840.10008.5.1.4.1.1.88.40":"Procedure Log Storage","1.2.840.10008.5.1.4.1.1.88.50":"Mammography CAD SR Storage","1.2.840.10008.5.1.4.1.1.88.59":"Key Object Selection Document Storage","1.2.840.10008.5.1.4.1.1.88.65":"Chest CAD SR Storage","1.2.840.10008.5.1.4.1.1.88.67":"X-Ray Radiation Dose SR Storage","1.2.840.10008.5.1.4.1.1.88.68":"Radiopharmaceutical Radiation Dose SR Storage","1.2.840.10008.5.1.4.1.1.88.69":"Colon CAD SR Storage","1.2.840.10008.5.1.4.1.1.88.70":"Implantation Plan SR Storage","1.2.840.10008.5.1.4.1.1.104.1":"Encapsulated PDF Storage","1.2.840.10008.5.1.4.1.1.104.2":"Encapsulated CDA Storage","1.2.840.10008.5.1.4.1.1.128":"Positron Emission Tomography Image Storage","1.2.840.10008.5.1.4.1.1.128.1":"Legacy Converted Enhanced PET Image Storage","1.2.840.10008.5.1.4.1.1.129":"Standalone PET Curve Storage (Retired)","1.2.840.10008.5.1.4.1.1.130":"Enhanced PET Image Storage","1.2.840.10008.5.1.4.1.1.131":"Basic Structured Display Storage","1.2.840.10008.5.1.4.1.1.481.1":"RT Image Storage","1.2.840.10008.5.1.4.1.1.481.2":"RT Dose Storage","1.2.840.10008.5.1.4.1.1.481.3":"RT Structure Set Storage","1.2.840.10008.5.1.4.1.1.481.4":"RT Beams Treatment Record Storage","1.2.840.10008.5.1.4.1.1.481.5":"RT Plan Storage","1.2.840.10008.5.1.4.1.1.481.6":"RT Brachy Treatment Record Storage","1.2.840.10008.5.1.4.1.1.481.7":"RT Treatment Summary Record Storage","1.2.840.10008.5.1.4.1.1.481.8":"RT Ion Plan Storage","1.2.840.10008.5.1.4.1.1.481.9":"RT Ion Beams Treatment Record Storage","1.2.840.10008.5.1.4.1.1.501.1":"DICOS CT Image Storage","1.2.840.10008.5.1.4.1.1.501.2.1":"DICOS Digital X-Ray Image Storage - For Presentation","1.2.840.10008.5.1.4.1.1.501.2.2":"DICOS Digital X-Ray Image Storage - For Processing","1.2.840.10008.5.1.4.1.1.501.3":"DICOS Threat Detection Report Storage","1.2.840.10008.5.1.4.1.1.501.4":"DICOS 2D AIT Storage","1.2.840.10008.5.1.4.1.1.501.5":"DICOS 3D AIT Storage","1.2.840.10008.5.1.4.1.1.501.6":"DICOS Quadrupole Resonance (QR) Storage","1.2.840.10008.5.1.4.1.1.601.1":"Eddy Current Image Storage","1.2.840.10008.5.1.4.1.1.601.2":"Eddy Current Multi-frame Image Storage","1.2.840.10008.5.1.4.1.2.1.1":"Patient Root Query/Retrieve Information Model - FIND","1.2.840.10008.5.1.4.1.2.1.2":"Patient Root Query/Retrieve Information Model - MOVE","1.2.840.10008.5.1.4.1.2.1.3":"Patient Root Query/Retrieve Information Model - GET","1.2.840.10008.5.1.4.1.2.2.1":"Study Root Query/Retrieve Information Model - FIND","1.2.840.10008.5.1.4.1.2.2.2":"Study Root Query/Retrieve Information Model - MOVE","1.2.840.10008.5.1.4.1.2.2.3":"Study Root Query/Retrieve Information Model - GET","1.2.840.10008.5.1.4.1.2.3.1":"Patient/Study Only Query/Retrieve Information Model - FIND (Retired)","1.2.840.10008.5.1.4.1.2.3.2":"Patient/Study Only Query/Retrieve Information Model - MOVE (Retired)","1.2.840.10008.5.1.4.1.2.3.3":"Patient/Study Only Query/Retrieve Information Model - GET (Retired)","1.2.840.10008.5.1.4.1.2.4.2":"Composite Instance Root Retrieve - MOVE","1.2.840.10008.5.1.4.1.2.4.3":"Composite Instance Root Retrieve - GET","1.2.840.10008.5.1.4.1.2.5.3":"Composite Instance Retrieve Without Bulk Data - GET","1.2.840.10008.5.1.4.31":"Modality Worklist Information Model - FIND","1.2.840.10008.5.1.4.32":"General Purpose Worklist Management Meta SOP Class (Retired)","1.2.840.10008.5.1.4.32.1":"General Purpose Worklist Information Model - FIND (Retired)","1.2.840.10008.5.1.4.32.2":"General Purpose Scheduled Procedure Step SOP Class (Retired)","1.2.840.10008.5.1.4.32.3":"General Purpose Performed Procedure Step SOP Class (Retired)","1.2.840.10008.5.1.4.33":"Instance Availability Notification SOP Class","1.2.840.10008.5.1.4.34.1":"RT Beams Delivery Instruction Storage - Trial (Retired)","1.2.840.10008.5.1.4.34.2":"RT Conventional Machine Verification - Trial (Retired)","1.2.840.10008.5.1.4.34.3":"RT Ion Machine Verification - Trial (Retired)","1.2.840.10008.5.1.4.34.4":"Unified Worklist and Procedure Step Service Class - Trial (Retired)","1.2.840.10008.5.1.4.34.4.1":"Unified Procedure Step - Push SOP Class - Trial (Retired)","1.2.840.10008.5.1.4.34.4.2":"Unified Procedure Step - Watch SOP Class - Trial (Retired)","1.2.840.10008.5.1.4.34.4.3":"Unified Procedure Step - Pull SOP Class - Trial (Retired)","1.2.840.10008.5.1.4.34.4.4":"Unified Procedure Step - Event SOP Class - Trial (Retired)","1.2.840.10008.5.1.4.34.5":"UPS Global Subscription SOP Instance","1.2.840.10008.5.1.4.34.5.1":"UPS Filtered Global Subscription SOP Instance","1.2.840.10008.5.1.4.34.6":"Unified Worklist and Procedure Step Service Class","1.2.840.10008.5.1.4.34.6.1":"Unified Procedure Step - Push SOP Class","1.2.840.10008.5.1.4.34.6.2":"Unified Procedure Step - Watch SOP Class","1.2.840.10008.5.1.4.34.6.3":"Unified Procedure Step - Pull SOP Class","1.2.840.10008.5.1.4.34.6.4":"Unified Procedure Step - Event SOP Class","1.2.840.10008.5.1.4.34.7":"RT Beams Delivery Instruction Storage","1.2.840.10008.5.1.4.34.8":"RT Conventional Machine Verification","1.2.840.10008.5.1.4.34.9":"RT Ion Machine Verification","1.2.840.10008.5.1.4.37.1":"General Relevant Patient Information Query","1.2.840.10008.5.1.4.37.2":"Breast Imaging Relevant Patient Information Query","1.2.840.10008.5.1.4.37.3":"Cardiac Relevant Patient Information Query","1.2.840.10008.5.1.4.38.1":"Hanging Protocol Storage","1.2.840.10008.5.1.4.38.2":"Hanging Protocol Information Model - FIND","1.2.840.10008.5.1.4.38.3":"Hanging Protocol Information Model - MOVE","1.2.840.10008.5.1.4.38.4":"Hanging Protocol Information Model - GET","1.2.840.10008.5.1.4.39.1":"Color Palette Storage","1.2.840.10008.5.1.4.39.2":"Color Palette Information Model - FIND","1.2.840.10008.5.1.4.39.3":"Color Palette Information Model - MOVE","1.2.840.10008.5.1.4.39.4":"Color Palette Information Model - GET","1.2.840.10008.5.1.4.41":"Product Characteristics Query SOP Class","1.2.840.10008.5.1.4.42":"Substance Approval Query SOP Class","1.2.840.10008.5.1.4.43.1":"Generic Implant Template Storage","1.2.840.10008.5.1.4.43.2":"Generic Implant Template Information Model - FIND","1.2.840.10008.5.1.4.43.3":"Generic Implant Template Information Model - MOVE","1.2.840.10008.5.1.4.43.4":"Generic Implant Template Information Model - GET","1.2.840.10008.5.1.4.44.1":"Implant Assembly Template Storage","1.2.840.10008.5.1.4.44.2":"Implant Assembly Template Information Model - FIND","1.2.840.10008.5.1.4.44.3":"Implant Assembly Template Information Model - MOVE","1.2.840.10008.5.1.4.44.4":"Implant Assembly Template Information Model - GET","1.2.840.10008.5.1.4.45.1":"Implant Template Group Storage","1.2.840.10008.5.1.4.45.2":"Implant Template Group Information Model - FIND","1.2.840.10008.5.1.4.45.3":"Implant Template Group Information Model - MOVE","1.2.840.10008.5.1.4.45.4":"Implant Template Group Information Model - GET","1.2.840.10008.7.1.1":"Native DICOM Model","1.2.840.10008.7.1.2":"Abstract Multi-Dimensional Image Model","1.2.840.10008.8.1.1":"DICOM Content Mapping Resource","1.2.840.10008.15.0.3.1":"dicomDeviceName","1.2.840.10008.15.0.3.2":"dicomDescription","1.2.840.10008.15.0.3.3":"dicomManufacturer","1.2.840.10008.15.0.3.4":"dicomManufacturerModelName","1.2.840.10008.15.0.3.5":"dicomSoftwareVersion","1.2.840.10008.15.0.3.6":"dicomVendorData","1.2.840.10008.15.0.3.7":"dicomAETitle","1.2.840.10008.15.0.3.8":"dicomNetworkConnectionReference","1.2.840.10008.15.0.3.9":"dicomApplicationCluster","1.2.840.10008.15.0.3.10":"dicomAssociationInitiator","1.2.840.10008.15.0.3.11":"dicomAssociationAcceptor","1.2.840.10008.15.0.3.12":"dicomHostname","1.2.840.10008.15.0.3.13":"dicomPort","1.2.840.10008.15.0.3.14":"dicomSOPClass","1.2.840.10008.15.0.3.15":"dicomTransferRole","1.2.840.10008.15.0.3.16":"dicomTransferSyntax","1.2.840.10008.15.0.3.17":"dicomPrimaryDeviceType","1.2.840.10008.15.0.3.18":"dicomRelatedDeviceReference","1.2.840.10008.15.0.3.19":"dicomPreferredCalledAETitle","1.2.840.10008.15.0.3.20":"dicomTLSCyphersuite","1.2.840.10008.15.0.3.21":"dicomAuthorizedNodeCertificateReference","1.2.840.10008.15.0.3.22":"dicomThisNodeCertificateReference","1.2.840.10008.15.0.3.23":"dicomInstalled","1.2.840.10008.15.0.3.24":"dicomStationName","1.2.840.10008.15.0.3.25":"dicomDeviceSerialNumber","1.2.840.10008.15.0.3.26":"dicomInstitutionName","1.2.840.10008.15.0.3.27":"dicomInstitutionAddress","1.2.840.10008.15.0.3.28":"dicomInstitutionDepartmentName","1.2.840.10008.15.0.3.29":"dicomIssuerOfPatientID","1.2.840.10008.15.0.3.30":"dicomPreferredCallingAETitle","1.2.840.10008.15.0.3.31":"dicomSupportedCharacterSet","1.2.840.10008.15.0.4.1":"dicomConfigurationRoot","1.2.840.10008.15.0.4.2":"dicomDevicesRoot","1.2.840.10008.15.0.4.3":"dicomUniqueAETitlesRegistryRoot","1.2.840.10008.15.0.4.4":"dicomDevice","1.2.840.10008.15.0.4.5":"dicomNetworkAE","1.2.840.10008.15.0.4.6":"dicomNetworkConnection","1.2.840.10008.15.0.4.7":"dicomUniqueAETitle","1.2.840.10008.15.0.4.8":"dicomTransferCapability","1.2.840.10008.15.1.1":"Universal Coordinated Time"},J="saveAs",X="exportAs",_="overlay",Q=a(182),Z=function(e){function t(){var e,a;Object(l.a)(this,t);for(var o=arguments.length,r=new Array(o),n=0;n<o;n++)r[n]=arguments[n];return(a=Object(c.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).hide=function(){a.props.onClose()},a.cancel=function(){window.stop(),a.hide()},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(f.a,{open:!0,onClose:this.hide,"aria-labelledby":"alert-dialog-title"},r.a.createElement(b.a,{id:"alert-dialog-title"},"Downloading file ..."),r.a.createElement(S.a,null,r.a.createElement(Q.a,{variant:"determinate",value:this.props.progress,color:"secondary"})),r.a.createElement(v.a,null,r.a.createElement(h.a,{onClick:this.cancel},"Cancel"))))}}]),t}(o.PureComponent),q=a(9),Y=a.n(q),K=a(147),$=a(8),ee=function(e){function t(){var e,a;Object(l.a)(this,t);for(var o=arguments.length,r=new Array(o),n=0;n<o;n++)r[n]=arguments[n];return(a=Object(c.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).firstframe=function(){a.props.runCinePlayer("firstframe")},a.previousframe=function(){a.props.runCinePlayer("previousframe")},a.play=function(){a.props.runCinePlayer("play")},a.pause=function(){a.props.runCinePlayer("pause")},a.nextframe=function(){a.props.runCinePlayer("nextframe")},a.lastframe=function(){a.props.runCinePlayer("lastframe")},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=null;return e=this.props.inPlay?r.a.createElement(K.a,{onClick:this.pause},r.a.createElement(Y.a,{path:$.s,size:"1.5rem",color:"#FFFFFF"})):r.a.createElement(K.a,{onClick:this.play},r.a.createElement(Y.a,{path:$.t,size:"1.5rem",color:"#FFFFFF"})),r.a.createElement("div",{style:{width:240,margin:"0 auto"}},r.a.createElement(K.a,{onClick:this.firstframe},r.a.createElement(Y.a,{path:$.y,size:"1.5rem",color:"#FFFFFF"})),r.a.createElement(K.a,{onClick:this.previousframe},r.a.createElement(Y.a,{path:$.B,size:"1.5rem",color:"#FFFFFF"})),e,r.a.createElement(K.a,{onClick:this.nextframe},r.a.createElement(Y.a,{path:$.A,size:"1.5rem",color:"#FFFFFF"})),r.a.createElement(K.a,{onClick:this.lastframe},r.a.createElement(Y.a,{path:$.z,size:"1.5rem",color:"#FFFFFF"})))}}]),t}(o.PureComponent);function te(e){return null!=e.match(/\.(jpeg|jpg|png)$/)}function ae(e){return e&&["image/jpeg","image/png"].includes(e.type)}function oe(){var e=localStorage.getItem(_);return null===e&&(e="1",localStorage.setItem(_,e)),"1"===e}function re(e){var t=typeof e;return"undefined"===t||null===t?"":"string"===t?'"'+e.replace(/"/g,'""')+'"':'"'+String(e).replace(/"/g,'""')+'"'}var ne=a(32),ie=new(a(104).a)("udvDB");ie.version(1).stores({measurement:"++id, sopinstanceuid, tool"}),ie.open();var le=ie,se=Object(F.import)("util/scrollToIndex");function ce(e){var t=window.URL||window.webkitURL,a=new Blob(["importScripts('".concat(e,"')")],{type:"application/javascript"});return t.createObjectURL(a)}var me={maxWebWorkers:4,webWorkerPath:ce("https://unpkg.com/cornerstone-wado-image-loader@3.0.0/dist/cornerstoneWADOImageLoaderWebWorker.min.js"),taskConfiguration:{decodeTask:{codecsPath:ce("https://unpkg.com/cornerstone-wado-image-loader@3.0.0/dist/cornerstoneWADOImageLoaderCodecs.js")}}};F.external.cornerstone=I,F.external.cornerstoneMath=R,M.external.cornerstone=I,D.external.cornerstone=I,T.external.cornerstone=I,T.webWorkerManager.initialize(me),T.external.dicomParser=w,F.external.Hammer=O.a,F.init();var ue=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).state={file:null,visibleOpenUrlDlg:!1,progress:null,visibleCinePlayer:!1,errorOnOpenImage:null,errorOnCors:!1,frame:1,inPlay:!1,viewport:null},a.onOpenUrl=function(e){var t=e.detail;a.setState({progress:t.percentComplete})},a.showOpenUrlDlg=function(e){a.setState({visibleOpenUrlDlg:!0},(function(){I.events.addEventListener("cornerstoneimageloadprogress",a.onOpenUrl),a.loadImage(void 0,e)}))},a.hideOpenUrlDlg=function(){a.setState({visibleOpenUrlDlg:!1,progress:null})},a.measurementSave=function(e){a.measurements.push(e)},a.measurementClear=function(){a.measurements.splice(0,a.measurements.length)},a.measurementRemove=function(e){a.measurements.splice(e,1)},a.getTransferSyntax=function(){var e=a.image.data.string("x00020010");return e+" ["+z[e]+"]"},a.getSopClass=function(){var e=a.image.data.string("x00080016");return e+" ["+z[e]+"]"},a.getSopInstanceUID=function(){return a.image.data.string("x00080018")},a.getPixelRepresentation=function(){var e=a.image.data.uint16("x00280103");if(void 0!==e)return e+(0===e?" (unsigned)":" (signed)")},a.getPlanarConfiguration=function(){var e=a.image.data.uint16("x00280006");if(void 0!==e)return e+(0===e?" (pixel)":" (plane)")},a.onImageLoaded=function(e){console.log("cornerstoneimageloaded: ")},a.onImageRendered=function(e){var t=I.getViewport(e.target);if(a.isDicom&&(document.getElementById("mrtopleft-".concat(a.props.index)).textContent="".concat(a.PatientsName)),document.getElementById("mrtopright-".concat(a.props.index)).textContent="".concat(t.displayedArea.brhc.x,"x").concat(t.displayedArea.brhc.y),document.getElementById("mrbottomleft-".concat(a.props.index)).textContent="WW/WC: ".concat(Math.round(t.voi.windowWidth),"/").concat(Math.round(t.voi.windowCenter)),document.getElementById("mrbottomright-".concat(a.props.index)).textContent="Zoom: ".concat(Math.round(100*t.scale.toFixed(2)),"%"),a.isDicom&&a.state.visibleCinePlayer&&a.numberOfFrames>1&&(document.getElementById("frameLabel-".concat(a.props.index)).textContent="".concat(a.state.frame," / ").concat(a.numberOfFrames),a.state.inPlay)){var o=a.state.frame===a.numberOfFrames?1:a.state.frame+1;a.setState({frame:o})}},a.onMeasurementModified=function(e){},a.onMeasurementAdded=function(e){if(console.log("cornerstonetoolsmeasurementadded: ",e.detail.measurementData),"Angle"===a.props.tool){var t={tool:a.props.tool,note:"",data:e.detail.measurementData};a.measurementSave(t),a.props.setActiveMeasurements(a.measurements)}},a.onMeasurementCompleted=function(e){console.log("cornerstonetoolsmeasurementcompleted: ",e.detail.measurementData);var t={tool:a.props.tool,note:"",data:e.detail.measurementData};a.measurementSave(t),a.props.setActiveMeasurements(a.measurements)},a.onErrorOpenImageClose=function(){a.setState({errorOnOpenImage:null})},a.onErrorCorsClose=function(){a.setState({errorOnCors:!1})},a.loadImage=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;if(void 0!==e||void 0!==t){void 0!==e?a.localfile=e:a.localurl=t;var o=a.dicomImage;o.addEventListener("cornerstonenewimage",a.onNewImage),o.addEventListener("cornerstoneimagerendered",a.onImageRendered),o.addEventListener("cornerstonetoolsmeasurementadded",a.onMeasurementAdded),o.addEventListener("cornerstonetoolsmeasurementmodified",a.onMeasurementModified),o.addEventListener("cornerstonetoolsmeasurementcompleted",a.onMeasurementCompleted);var r=void 0;I.enable(o),void 0===e&&te(t)?I.loadImage(t).then((function(e){console.log("loadImage, image from url: ",e),a.hideOpenUrlDlg(),a.image=e,a.isDicom=!1,I.displayImage(o,e),a.enableTool(),a.props.setActiveDcm({image:a.image,element:a.dicomImage,isDicom:a.isDicom}),a.props.isOpenStore(!0)}),(function(e){console.log("error",e),a.setState({errorOnOpenImage:"This is not a valid JPG or PNG file."})})):void 0!==e&&ae(e)?(r=M.fileManager.add(e),I.loadImage(r).then((function(e){a.image=e,a.isDicom=!1,I.displayImage(o,e),a.enableTool(),a.props.setActiveDcm({image:a.image,element:a.dicomImage,isDicom:a.isDicom}),a.props.isOpenStore(!0)}),(function(e){console.log("error",e),a.setState({errorOnOpenImage:"This is not a valid JPG or PNG file."})}))):(r=void 0!==e?T.wadouri.fileManager.add(e):"wadouri:"+t,console.log("loadImage, imageId: ",r),I.loadAndCacheImage(r).then((function(e){a.hideOpenUrlDlg(),a.image=e,a.isDicom=!0,a.PatientsName=e.data.string("x00100010"),a.sopInstanceUid=a.getSopInstanceUID();var t={currentImageIdIndex:0,imageIds:""};if(a.numberOfFrames=e.data.intString("x00280008"),a.numberOfFrames>0){for(var n=[],i=0;i<a.numberOfFrames;++i)n.push(r+"?frame="+i);t.imageIds=n}console.log("displayImage: "),I.displayImage(o,e),a.enableTool(),a.numberOfFrames>1&&(F.addStackStateManager(o,["stack","playClip"]),F.addToolState(o,"stack",t),a.setState({frame:1})),le.measurement.where("sopinstanceuid").equals(a.sopInstanceUid).each((function(e){console.log("load measure from db: ",e),a.measurementSave(e),F.addToolState(o,e.tool,e.data),a.runTool(e.tool),I.updateImage(o),F.setToolEnabled(e.tool)})).then((function(){a.props.setActiveMeasurements(a.measurements),a.props.setActiveDcm({image:a.image,element:a.dicomImage,isDicom:a.isDicom}),a.props.isOpenStore(!0)}))}),(function(e){if(console.log("error",e),a.hideOpenUrlDlg(),"[object XMLHttpRequest]"===e.error.toString())a.setState({errorOnCors:!0});else{var t=e.error.indexOf(":");a.setState({errorOnOpenImage:t<0?e.error:e.error.substring(t+1)})}})))}},a.enableTool=function(e,t){var a=F.WwwcTool,o=F.LengthTool,r=F.PanTool,n=F.ZoomTouchPinchTool,i=F.ZoomTool,l=F.ProbeTool,s=F.EllipticalRoiTool,c=F.RectangleRoiTool,m=F.FreehandRoiTool,u=F.AngleTool,d=F.MagnifyTool,g=F.StackScrollMouseWheelTool;F.addTool(d),F.addTool(u),F.addTool(a),F.addTool(o),F.addTool(r),F.addTool(n),F.addTool(i),F.addTool(l),F.addTool(s),F.addTool(c),F.addTool(m),F.addTool(g)},a.disableAllTools=function(){F.setToolEnabled("Length"),F.setToolEnabled("Pan"),F.setToolEnabled("Magnify"),F.setToolEnabled("Angle"),F.setToolEnabled("RectangleRoi"),F.setToolEnabled("Wwwc"),F.setToolEnabled("ZoomTouchPinch"),F.setToolEnabled("Probe"),F.setToolEnabled("EllipticalRoi"),F.setToolEnabled("StackScrollMouseWheel")},a.runTool=function(e,t){switch(console.log("run tool: ",e),e){case"openfile":I.disable(a.dicomImage),a.setState({file:t}),a.loadImage(t);break;case"openurl":console.log("run tool opt: ",t),a.showOpenUrlDlg(t);break;case"clear":a.setState({visibleCinePlayer:!1}),a.props.clearingStore(),I.disable(a.dicomImage);break;case"notool":a.disableAllTools();break;case"Wwwc":F.setToolActive("Wwwc",{mouseButtonMask:1});break;case"Pan":F.setToolActive("Pan",{mouseButtonMask:1});break;case"Zoom":F.setToolActive(ne.isMobile?"ZoomTouchPinch":"Zoom",{mouseButtonMask:1});break;case"Length":F.setToolActive("Length",ne.isMobile?{isTouchActive:!0}:{mouseButtonMask:1});break;case"Probe":F.setToolActive("Probe",{mouseButtonMask:1});break;case"EllipticalRoi":F.setToolActive("EllipticalRoi",{mouseButtonMask:1});break;case"RectangleRoi":F.setToolActive("RectangleRoi",{mouseButtonMask:1});break;case"Angle":F.setToolActive("Angle",{mouseButtonMask:1});break;case"Magnify":F.setToolActive("Magnify",{mouseButtonMask:1});break;case"FreehandRoi":F.setToolActive("FreehandRoi",{mouseButtonMask:1});break;case"Invert":var o=a.dicomImage,r=I.getViewport(o);r.invert=!r.invert,I.setViewport(o,r),console.log("viewport: ",r);break;case"saveas":var n=localStorage.getItem(J);F.SaveAs(a.dicomImage,"".concat(a.state.file.name,".").concat(n),"image/".concat(n));break;case"cine":a.setState({visibleCinePlayer:!a.state.visibleCinePlayer});break;case"reset":a.reset();break;case"removetool":console.log("removetool index: ",t);var i=a.dicomImage;F.removeToolState(i,a.measurements[t].tool,a.measurements[t].data),I.updateImage(i),a.measurementRemove(t),a.props.setActiveMeasurements(a.measurements);break;case"removetools":var l=a.dicomImage;a.measurements.forEach((function(e){F.clearToolState(l,e.tool)})),I.updateImage(l),a.measurementClear(),le.measurement.where("sopinstanceuid").equals(a.sopInstanceUid).delete(),a.props.setActiveMeasurements(a.measurements);break;case"savetools":le.measurement.where("sopinstanceuid").equals(a.sopInstanceUid).delete(),a.measurements.forEach((function(e){try{le.measurement.add({sopinstanceuid:a.sopInstanceUid,tool:e.tool,note:e.note,data:e.data})}catch(t){console.error(t)}}))}},a.changeTool=function(e,t){switch(console.log("change tool, value: ",e,t),e){case"Wwwc":1===t?F.setToolActive("Wwwc",{mouseButtonMask:1}):0===t&&F.setToolPassive("Wwwc");break;case"Pan":1===t?F.setToolActive("Pan",{mouseButtonMask:1}):0===t&&F.setToolPassive("Pan");break;case"Zoom":1===t?F.setToolActive(ne.isMobile?"ZoomTouchPinch":"Zoom",{mouseButtonMask:1}):0===t&&F.setToolPassive(ne.isMobile?"ZoomTouchPinch":"Zoom");break;case"Length":1===t?F.setToolActive("Length",ne.isMobile?{isTouchActive:!0}:{mouseButtonMask:1}):0===t&&F.setToolPassive("Length");break;case"Probe":1===t?F.setToolActive("Probe",{mouseButtonMask:1}):0===t&&F.setToolPassive("Probe");break;case"Angle":1===t?F.setToolActive("Angle",{mouseButtonMask:1}):0===t&&F.setToolPassive("Angle");break;case"Magnify":1===t?F.setToolActive("Magnify",{mouseButtonMask:1}):0===t&&F.setToolPassive("Magnify");break;case"EllipticalRoi":1===t?F.setToolActive("EllipticalRoi",{mouseButtonMask:1}):0===t&&F.setToolPassive("EllipticalRoi");break;case"RectangleRoi":1===t?F.setToolActive("RectangleRoi",{mouseButtonMask:1}):0===t&&F.setToolPassive("RectangleRoi");break;case"FreehandRoi":1===t?F.setToolActive("FreehandRoi",{mouseButtonMask:1}):0===t&&F.setToolPassive("FreehandRoi")}},a.runCinePlayer=function(e){var t=a.dicomImage;switch(e){case"firstframe":a.setState({frame:1}),se(t,0);break;case"previousframe":if(a.state.frame>1){var o=a.state.frame-1;a.setState({frame:o}),se(t,o-1)}break;case"play":F.playClip(t,30),a.setState({inPlay:!0});break;case"pause":F.stopClip(t),a.setState({inPlay:!1});break;case"nextframe":if(a.state.frame<a.numberOfFrames){var r=a.state.frame+1;a.setState({frame:r}),se(t,r-1)}break;case"lastframe":var n=a.numberOfFrames;a.setState({frame:n}),se(t,n-1)}},a.reset=function(){var e=a.dicomImage,t=I.getDefaultViewportForImage(e,a.image),o=I.getViewport(e);o.voi.windowWidth=t.voi.windowWidth,o.voi.windowCenter=t.voi.windowCenter,o.invert=!1,I.setViewport(e,o)},a.dicomImageRef=function(e){a.dicomImage=e},a.onImageClick=function(){console.log("onImageClick: ")},a.localfile=null,a.localurl=null,a.dicomImage=null,a.imageId=null,a.image=null,a.isDicom=!1,a.numberOfFrames=1,a.measurements=[],a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.props.runTool(this),this.props.changeTool(this),I.events.addEventListener("cornerstoneimageloaded",this.onImageLoaded),(0,this.props.dcmRef)(this)}},{key:"componentWillUnmount",value:function(){this.props.runTool(void 0),this.props.changeTool(void 0),(0,this.props.dcmRef)(void 0)}},{key:"componentDidUpdate",value:function(e){var t=this.props.isOpen[this.props.index];this.props.layout!==e.layout&&t&&I.resize(this.dicomImage)}},{key:"render",value:function(){var e=this.props.isOpen[this.props.index],t=this.state.visibleOpenUrlDlg,a=this.state.errorOnOpenImage,o=this.state.progress,n={width:"100%",height:"100%",border:this.props.activeDcmIndex===this.props.index&&(this.props.layout[0]>1||this.props.layout[1]>1)?"solid 1px #AAAAAA":"solid 1px #000000",position:"relative"},i=oe();return r.a.createElement("div",{className:"container",style:n},t?r.a.createElement(Z,{progress:o,onClose:this.hideOpenUrlDlg}):null,r.a.createElement(f.a,{open:null!==a,onClose:this.onErrorOpenImageClose,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},r.a.createElement(b.a,{id:"alert-dialog-title"},"Error on opening image"),r.a.createElement(S.a,null,r.a.createElement(E.a,{id:"alert-dialog-description"},this.state.errorOnOpenImage)),r.a.createElement(v.a,null,r.a.createElement(h.a,{onClick:this.onErrorOpenImageClose,autoFocus:!0},"Ok"))),r.a.createElement(f.a,{open:this.state.errorOnCors,onClose:this.onErrorCorsClose,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},r.a.createElement(b.a,{id:"alert-dialog-title"},"Error on loading image"),r.a.createElement(S.a,null,r.a.createElement(E.a,{id:"alert-dialog-description"},r.a.createElement(P.a,{gutterBottom:!0},"CORS or Cross Origin Resource Sharing is a browser security policy that prevents javascript from loading data from a server with a different base URL than the server that served up the javascript file."),r.a.createElement(P.a,{gutterBottom:!0},"See the \xa0",r.a.createElement(y.a,{href:"http://enable-cors.org/",target:"_blank",color:"textPrimary"},"Enable CORS site"),"\xa0 for information about CORS."))),r.a.createElement(v.a,null,r.a.createElement(h.a,{onClick:this.onErrorCorsClose,autoFocus:!0},"Ok"))),r.a.createElement("div",{style:{width:"100%",height:"100%",position:"relative",color:"#FFFFFF",textShadow:"1px 1px #000000"},onContextMenu:function(){return!1},className:"cornerstone-enabled-image"},r.a.createElement("div",{ref:this.dicomImageRef,style:{width:"100%",height:"100%",position:"relative"}}),r.a.createElement("div",{id:"mrtopleft-".concat(this.props.index),style:{position:"absolute",top:0,left:3,display:e&&i?"":"none"}},"Patient Name"),r.a.createElement("div",{id:"mrtopright-".concat(this.props.index),style:{position:"absolute",top:0,right:3,display:e&&i?"":"none"}},"Size"),r.a.createElement("div",{id:"mrbottomright-".concat(this.props.index),style:{position:"absolute",bottom:0,right:3,display:e&&i?"":"none"}},"Zoom:"),r.a.createElement("div",{id:"mrbottomleft-".concat(this.props.index),style:{position:"absolute",bottom:0,left:3,display:e&&i?"":"none"}},"WW/WC:"),this.state.visibleCinePlayer&&this.numberOfFrames>1?r.a.createElement("div",{style:{position:"absolute",width:"100%",bottom:0,textAlign:"center"}},r.a.createElement("div",{style:{margin:"0 auto",width:"240px",backgroundColor:"rgba(136, 136, 136, 0.5)"}},r.a.createElement(ee,{runCinePlayer:this.runCinePlayer,inPlay:this.state.inPlay}),r.a.createElement("div",{id:"frameLabel-".concat(this.props.index),style:{width:230,margin:"0 auto",marginTop:-10,textAlign:"center"}},this.state.frame," / ",this.numberOfFrames))):null))}}]),t}(r.a.Component),de=Object(p.b)((function(e){return{url:e.url,isOpen:e.isOpen,tool:e.tool,activeDcmIndex:e.activeDcmIndex,measurements:e.measurements,layout:e.layout}}),(function(e){return{clearingStore:function(){return e({type:x})},isOpenStore:function(t){return e(N(t))},toolStore:function(t){return e(U(t))},setActiveDcm:function(t){return e(H(t))},setActiveMeasurements:function(t){return e(W(t))}}}))(ue),ge=a(190),pe=a(187),he=a(188),fe=a(189);function ve(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,o)}return a}var Se=function(e){var t=e.dcmViewer,a=e.classes,o=e.color,n=[];n.push({name:"Transfer Syntax",value:t.getTransferSyntax()}),n.push({name:"SOP Class",value:t.getSopClass()}),n.push({name:"SOP Instance UID",value:t.getSopInstanceUID()}),n.push({name:"Patient Name",value:t.image.data.string("x00100010")}),n.push({name:"Frame Rate",value:t.image.data.string("x00082144")}),n.push({name:"Samples per Pixel",value:t.image.data.uint16("x00280002")}),n.push({name:"Photometric Interpretation",value:t.image.data.string("x00280004")}),n.push({name:"Number of Frames",value:t.image.data.string("x00280008")}),n.push({name:"Planar Configuration",value:t.getPlanarConfiguration()}),n.push({name:"Rows",value:t.image.data.uint16("x00280010")}),n.push({name:"Columns",value:t.image.data.uint16("x00280011")}),n.push({name:"Pixel Spacing",value:t.image.data.string("x00280030")}),n.push({name:"Bits Allocated",value:t.image.data.uint16("x00280100")}),n.push({name:"Bits Stored",value:t.image.data.uint16("x00280101")}),n.push({name:"High Bit",value:t.image.data.uint16("x00280102")}),n.push({name:"Pixel Representation",value:t.getPixelRepresentation()}),n.push({name:"Window Center",value:t.image.data.string("x00281050")}),n.push({name:"Window Width",value:t.image.data.string("x00281051")}),n.push({name:"Rescale Intercept",value:t.image.data.string("x00281052")}),n.push({name:"Rescale Slope",value:t.image.data.string("x00281053")}),n.push({name:"Min Stored Pixel Value",value:t.image.minPixelValue}),n.push({name:"Max Stored Pixel Value",value:t.image.maxPixelValue});var i=n.map((function(e,t){return void 0!==e.value?r.a.createElement(pe.a,{dense:!0,key:t},r.a.createElement(he.a,{primary:e.name,secondary:e.value})):null}));return console.log("dcmViewer",t),r.a.createElement("div",{style:{marginTop:"48px"}},r.a.createElement(fe.a,{variant:"dense"},r.a.createElement(P.a,{variant:"subtitle1",className:a.title},"Dicom Header"),r.a.createElement("div",{className:a.grow}),r.a.createElement(K.a,{color:"inherit",onClick:function(){var e=localStorage.getItem(X);null===e&&(e="json",localStorage.setItem(X,e));var a="";if("csv"===e)a=function(e,t){var a,o,r,n,i,l,s,c=[],m="",u='"';for("undefined"!==typeof t&&null!==t||(t=","),a=0,o=e.length;a<o;a+=1){if(n=e[a],i="",0===a){for(r in n)n.hasOwnProperty(r)&&(c.push(r),i+=[u,r.replace(/"/g,'""'),u,t].join(""));m+=i=i.substring(0,i.length-1)}for(m+="\n",i="",l=0,s=c.length;l<s;l+=1)l>0&&(i+=t),i+=re(n[r=c[l]]);m+=i}return m}(n);else{var o=n.reduce((function(e,t){return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ve(Object(a),!0).forEach((function(t){Object(g.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ve(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},e,Object(g.a)({},t.name,t.value))}),{});a=JSON.stringify(o)}var r=document.createElement("a"),i=new Blob([a],{type:"text/plain"});r.href=URL.createObjectURL(i),r.download="".concat(t.localfile.name,".").concat(e),document.body.appendChild(r),r.click()}},r.a.createElement(Y.a,{path:$.e,size:"1.5rem",color:o}))),r.a.createElement("div",null,r.a.createElement(ge.a,{dense:!0,component:"div"},i)))},Ee=a(105),be=a.n(Ee),ye=a(106),Pe=a.n(ye),Ce=a(201),Oe=a(4),Ie=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).state={visibleDlgNote:!1,visibleDlgDelete:!1},a.showDlgNote=function(){a.setState({visibleDlgNote:!0})},a.hideDlgNote=function(){a.setState({visibleDlgNote:!1})},a.showDlgDelete=function(){a.setState({visibleDlgDelete:!0})},a.hideDlgDelete=function(){a.setState({visibleDlgDelete:!1})},a.handleOnChangeNote=function(e){a.setState({note:e.target.value})},a.confirmNote=function(e){a.hideDlgNote(),a.props.measurements[e].note=a.noteField.value},a.confirmDelete=function(e){a.hideDlgDelete(),a.props.toolRemove(e)},a.onEdit=function(){a.showDlgNote()},a.onDelete=function(){a.showDlgDelete()},a.noteField=r.a.createRef(),a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.props.classes,a=this.props.item,o=this.props.index,n="",i="";switch(a.tool){case"Length":n="".concat(a.data.length.toFixed(2)," ").concat(a.data.unit),i=a.note;break;case"Angle":n="".concat(a.data.rAngle," \xb0"),i=a.note;break;case"EllipticalRoi":case"RectangleRoi":n=r.a.createElement("div",null,r.a.createElement("div",null," A: ",a.data.cachedStats.area.toFixed(2)," mm\xb2 "),r.a.createElement("div",null," M: ",a.data.cachedStats.mean.toFixed(2)," ",a.data.unit," "),r.a.createElement("div",null," SD: ",a.data.cachedStats.stdDev.toFixed(2)," ",a.data.unit," ")),i=a.note;break;case"FreehandRoi":n=r.a.createElement("div",null,r.a.createElement("div",null," A: ",a.data.area.toFixed(2)," mm\xb2 "),r.a.createElement("div",null," M: ",a.data.meanStdDev.mean.toFixed(2)," ",a.data.unit," "),r.a.createElement("div",null," SD: ",a.data.meanStdDev.stdDev.toFixed(2)," ",a.data.unit," ")),i=a.note}return r.a.createElement("div",null,r.a.createElement(pe.a,null,r.a.createElement(he.a,{classes:{primary:t.listItemText},primary:n,secondary:i}),r.a.createElement(fe.a,null,r.a.createElement(K.a,{edge:"end",onClick:function(){return e.onEdit(o)}},r.a.createElement(be.a,null)),r.a.createElement(K.a,{edge:"end",onClick:function(){return e.onDelete(o)}},r.a.createElement(Pe.a,null)))),this.state.visibleDlgNote?r.a.createElement(f.a,{open:this.state.visibleDlgNote,onClose:this.hideDlgNote,"aria-labelledby":"form-dialog-title"},r.a.createElement(b.a,{id:"form-dialog-title"},"Note for measurement:"),r.a.createElement(S.a,null,r.a.createElement(Ce.a,{ref:"noteField",autoFocus:!0,margin:"dense",id:"note",fullWidth:!0,defaultValue:this.props.measurements[o].note,inputRef:function(t){return e.noteField=t}})),r.a.createElement(v.a,null,r.a.createElement(h.a,{onClick:this.hideDlgNote},"Cancel"),r.a.createElement(h.a,{onClick:function(){return e.confirmNote(o)},autoFocus:!0},"Ok"))):null,r.a.createElement(f.a,{open:this.state.visibleDlgDelete,onClose:this.hideDlgNote,"aria-labelledby":"alert-dialog-title"},r.a.createElement(b.a,{id:"alert-dialog-title"},"Are you sure to delete the measurement?"),r.a.createElement(v.a,null,r.a.createElement(h.a,{onClick:this.hideDlgDelete},"Cancel"),r.a.createElement(h.a,{onClick:function(){return e.confirmDelete(o)},autoFocus:!0},"Ok"))))}}]),t}(o.PureComponent),Fe=Object(p.b)((function(e){return{measurements:e.measurements}}))(Object(Oe.a)((function(e){return{listItemText:{fontSize:"0.9em"}}}))(Ie)),Re=function(e){function t(){var e,a;Object(l.a)(this,t);for(var o=arguments.length,r=new Array(o),n=0;n<o;n++)r[n]=arguments[n];return(a=Object(c.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={visibleClearMeasureDlg:!1},a.showClearMeasureDlg=function(){a.setState({visibleClearMeasureDlg:!0})},a.hideClearMeasureDlg=function(){a.setState({visibleClearMeasureDlg:!1})},a.confirmClearMeasureDlg=function(){a.hideClearMeasureDlg(),a.dicomViewersRefs[a.props.activeDcmIndex].runTool("removetools")},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.props.classes;return r.a.createElement("div",null,r.a.createElement("div",null,null!==this.props.measurements?this.props.measurements.map((function(a,o){return r.a.createElement(Fe,{item:a,index:o,toolRemove:e.props.toolRemove,key:o,classes:t})})):null),r.a.createElement(f.a,{open:this.state.visibleClearMeasureDlg,onClose:this.hideClearMeasureDlg,"aria-labelledby":"alert-dialog-title"},r.a.createElement(b.a,{id:"alert-dialog-title"},"Are you sure to remove all the measurements?"),r.a.createElement(v.a,null,r.a.createElement(h.a,{onClick:this.hideClearMeasureDlg},"Cancel"),r.a.createElement(h.a,{onClick:this.confirmClearMeasureDlg,autoFocus:!0},"Ok"))))}}]),t}(o.PureComponent),Me=Object(p.b)((function(e){return{measurements:e.measurements}}))(Re),De=a(114),Te=a(193),we=a(194),xe=a(202),ke=a(107),Ae=a.n(ke),je=a(196),Ve=a(195),Le=a(191),Ge=a(192),Be=a(203),Ne=a(204),Ue=a(148);function He(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,o)}return a}function We(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?He(Object(a),!0).forEach((function(t){Object(g.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):He(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var ze=Object(Te.a)((function(e){return{appBar:{position:"relative"},formControl:{margin:e.spacing(3)},title:{marginLeft:e.spacing(2),flex:1}}})),Je=r.a.forwardRef((function(e,t){return r.a.createElement(Ue.a,Object.assign({direction:"up",ref:t},e))})),Xe=function(e){var t=e.onClose,a=function(){var e=localStorage.getItem(J);return null===e&&(e="png",localStorage.setItem(J,e)),e}(),o=function(){var e=localStorage.getItem(X);return null===e&&(e="json",localStorage.setItem(X,e)),e}(),n=oe(),i=ze(),l=r.a.useState({saveAs:a,exportAs:o,overlay:n}),s=Object(De.a)(l,2),c=s[0],m=s[1];return r.a.createElement("div",null,r.a.createElement(f.a,{fullScreen:!0,open:!0,onClose:t,TransitionComponent:Je},r.a.createElement(we.a,{className:i.appBar},r.a.createElement(fe.a,{variant:"dense"},r.a.createElement(K.a,{edge:"start",color:"inherit",onClick:t,"aria-label":"close"},r.a.createElement(Ae.a,null)),r.a.createElement(P.a,{variant:"h6",className:i.title},"Settings"))),r.a.createElement("div",null,r.a.createElement(Le.a,{component:"fieldset",className:i.formControl},r.a.createElement(Ve.a,{control:r.a.createElement(xe.a,{checked:c.overlay,onChange:function(e){var t;m(We({},c,{overlay:e.target.checked})),t=e.target.checked,localStorage.setItem(_,t?"1":"0")},value:"overlay"}),label:"Show overlay Information"})),r.a.createElement(je.a,null),r.a.createElement(Le.a,{component:"fieldset",className:i.formControl},r.a.createElement(Ge.a,{component:"legend"},"Save screenshot as:"),r.a.createElement(Ne.a,{"aria-label":"saveas",name:"saveas",value:c.saveAs,onChange:function(e){var t;m(We({},c,{saveAs:e.target.value})),t=e.target.value,localStorage.setItem(J,t)}},r.a.createElement(Ve.a,{value:"jpeg",control:r.a.createElement(Be.a,null),label:"JPEG"}),r.a.createElement(Ve.a,{value:"png",control:r.a.createElement(Be.a,null),label:"PNG"}))),r.a.createElement(je.a,null),r.a.createElement(Le.a,{component:"fieldset",className:i.formControl},r.a.createElement(Ge.a,{component:"legend"},"Export Dicom header as:"),r.a.createElement(Ne.a,{"aria-label":"exportas",name:"exportas",value:o,onChange:function(e){var t;m(We({},c,{exportAs:e.target.value})),t=e.target.value,localStorage.setItem(X,t)}},r.a.createElement(Ve.a,{value:"json",control:r.a.createElement(Be.a,null),label:"JSON"}),r.a.createElement(Ve.a,{value:"csv",control:r.a.createElement(Be.a,null),label:"CSV"}))))))},_e=a(108),Qe=function(e){var t=e.onClose,a=r.a.createElement(P.a,{variant:"body2"},r.a.createElement(y.a,{href:"https://github.com/webnamics/u-dicom-viewer/",target:"_blank",style:{color:"#999999"}},"https://github.com/webnamics/u-dicom-viewer")),o=r.a.createElement(P.a,{variant:"body2",style:{color:"#999999"}},_e.version);return r.a.createElement("div",null,r.a.createElement(f.a,{onClose:t,open:!0},r.a.createElement(b.a,{onClose:t,disableTypography:!0},r.a.createElement(P.a,{variant:"h6"},"About ",r.a.createElement("strong",null,"U"),"niversal ",r.a.createElement("strong",null,"D"),"icom ",r.a.createElement("strong",null,"V"),"iewer")),r.a.createElement(S.a,null,r.a.createElement(ge.a,null,r.a.createElement(pe.a,null,r.a.createElement(he.a,{primary:"Repository URL:",secondary:a})),r.a.createElement(pe.a,null,r.a.createElement(he.a,{primary:"Version Number:",secondary:o})))),r.a.createElement(v.a,null,r.a.createElement(h.a,{autoFocus:!0,onClick:t},"Close"))))},Ze=a(205),qe=Object(F.import)("util/getRGBPixels"),Ye={width:"273px",padding:"8px 8px 8px 8px",backgroundColor:"#444444"},Ke={width:"255px",marginTop:"-9px"},$e={marginTop:"-9px"},et={borderCollapse:"collapse",fontFamily:"Courier, monospace",fontSize:"67%",width:"100%"},tt={tableLayout:"fixed",width:"25%"},at=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).state={activeDrags:0,deltaPosition:{x:0,y:0},controlledPosition:{x:-400,y:200},value:128,histCount:0,valueScale:0,minHist:0,maxHist:0,mean:0,stdDev:0},a.handleChangeValue=function(e,t){console.log("newValue: ",t),console.log("(newValue*this.binSize)+this.state.minHist: ",t*a.binSize+a.state.minHist),console.log("this.hist256[newValue]: ",a.hist256[t]),a.setState({value:t}),a.setState({valueScale:t*a.binSize+a.state.minHist}),a.setState({histCount:a.hist256[t]})},a.hide=function(){a.props.onClose()},a.onDrag=function(e,t){var o=a.state.deltaPosition,r=o.x,n=o.y;a.setState({deltaPosition:{x:r+t.deltaX,y:n+t.deltaY}})},a.onStart=function(){a.setState({activeDrags:a.state.activeDrags+1})},a.onStop=function(){a.setState({activeDrags:a.state.activeDrags-1})},a.canvasHistogram=r.a.createRef(),a.canvasGradient=r.a.createRef(),a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.image=this.props.activeDcm.image,this.element=this.props.activeDcm.element,this.isDicom=this.props.activeDcm.isDicom,this.pixelData=this.props.activeDcm.image.getPixelData(),this.updateCanvas()}},{key:"componentDidUpdate",value:function(){}},{key:"getMousePos",value:function(e,t){var a=e.getBoundingClientRect();return{x:t.clientX-a.left,y:t.clientY-a.top}}},{key:"getRGBPixelsImage",value:function(e,t,a,o){var r=[];e=Math.round(e),t=Math.round(t);var n,i,l,s=0;for(i=0;i<o;i++)for(l=0;l<a;l++){n=4*((i+t)*this.image.rows+(l+e));var c=this.pixelData[n],m=this.pixelData[n+1],u=this.pixelData[n+2],d=this.pixelData[n+3];r[s++]=c,r[s++]=m,r[s++]=u,r[s++]=d}return r}},{key:"getPixel",value:function(e,t){return(this.isDicom?this.image.color?qe(this.element,e,t,1,1):I.getStoredPixels(this.element,e,t,1,1):this.getRGBPixelsImage(e,t,1,1))[0]}},{key:"updateCanvas",value:function(){var e=this,t=this.image,a=t.maxPixelValue,o=t.minPixelValue+t.intercept,r=a+t.intercept,n=r-o+1,i=n/256,l=Math.floor(Math.abs(o)/i),s=Math.round(t.windowWidth/i/2),c=Math.round(t.windowCenter/i);this.setState({minHist:o}),this.setState({maxHist:r}),this.binSize=i;for(var m=0,u=Array(n).fill(0),d=0;d<t.columns;d++)for(var g=0;g<t.rows;g++){var p=this.getPixel(g,d)*t.slope+t.intercept;u[p-o]+=1,m+=p}m/=t.columns*t.rows,this.setState({mean:m}),console.log("hist: ",u);for(var h=0,f=0;f<t.columns;f++)for(var v=0;v<t.rows;v++){var S=this.getPixel(v,f)*t.slope+t.intercept;h+=Math.pow(S-m,2)}h=Math.sqrt(h/(t.columns*t.rows)),this.setState({stdDev:h});for(var E=Array(256).fill(0),b=0,y=0,P=0;P<256;P++){for(var C=b;C<Math.round(b+i)&&!(C>=n);C++)E[P]+=u[C];y<E[P]&&(y=E[P]),b=Math.round(b+i)}this.hist256=E,console.log("hist256: ",E),console.log("max: ",y);var O=this.canvasHistogram.current,I=this.canvasHistogram.current.getContext("2d");I.translate(0,O.height),I.scale(1,-1),O.addEventListener("pointermove",(function(t){var a=e.getMousePos(O,t);e.setState({histCount:E[a.x]});var r=Math.round(a.x*e.binSize);e.setState({valueScale:r+o})}),!0),console.log("value: ",(m-o)/i);var F=Math.round((m-o)/i);this.setState({value:F}),this.setState({valueScale:m}),this.setState({histCount:E[F]}),I.beginPath(),I.fillStyle="rgba(210, 210, 210, 0.5)",I.fillRect(l-s+c,0,2*s,128),I.beginPath(),I.strokeStyle="rgba(0, 0, 0, 1.0)";for(var R=0;R<256;R++){var M=Math.round(E[R]/y*128);I.moveTo(R,0),I.lineTo(R,M),I.stroke()}I.beginPath(),I.strokeStyle="rgba(140, 140, 140, 0.5)",I.moveTo(l+c,0),I.lineTo(l+c,128),I.lineWidth=1,I.stroke();var D=l-s+c,T=l+s+c,w=this.canvasGradient.current.getContext("2d");w.fillStyle="#000000",w.fillRect(0,0,D,10);var x=w.createLinearGradient(D,0,T+(D<0?D:0),0);x.addColorStop(0,"black"),x.addColorStop(1,"white"),w.fillStyle=x,w.fillRect(D,0,T,10)}},{key:"render",value:function(){return r.a.createElement("div",{style:Ye},r.a.createElement("div",null,r.a.createElement("canvas",{ref:this.canvasHistogram,width:256,height:128,style:{backgroundColor:"#FFFFFF",cursor:"crosshair"}})),r.a.createElement("div",{style:$e},r.a.createElement("canvas",{ref:this.canvasGradient,width:256,height:10,style:{backgroundColor:"#FFFFFF"}})),r.a.createElement("div",{style:Ke},r.a.createElement(Ze.a,{value:this.state.value,onChange:this.handleChangeValue,"aria-labelledby":"continuous-slider",color:"secondary",min:0,max:255})),r.a.createElement("div",null,r.a.createElement("table",{style:et},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",{style:tt},"min:"),r.a.createElement("td",{style:tt},this.state.minHist),r.a.createElement("td",{style:tt},"max:"),r.a.createElement("td",{style:tt},this.state.maxHist)),r.a.createElement("tr",null,r.a.createElement("td",null,"mean:"),r.a.createElement("td",null,parseFloat(this.state.mean).toFixed(3)),r.a.createElement("td",null,"std dev:"),r.a.createElement("td",null,parseFloat(this.state.stdDev).toFixed(3))),r.a.createElement("tr",null,r.a.createElement("td",null,"count:"),r.a.createElement("td",null,this.state.histCount),r.a.createElement("td",null,"value:"),r.a.createElement("td",null,parseFloat(this.state.valueScale).toFixed(3)))))))}}]),t}(o.PureComponent),ot=Object(p.b)((function(e){return{activeDcmIndex:e.activeDcmIndex,activeDcm:e.activeDcm}}))(at),rt={borderCollapse:"collapse",width:"100px",height:"100px"},nt={width:"25px",height:"25px",border:"solid 1px black"},it=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).initTable=function(){for(var e=a.state.row,t=a.state.col,o=a.tableRef.current.rows,r=0;r<=e;r++)for(var n=0;n<=t;n++)o[r].cells[n].bgColor="#AAAAAA"},a.cellClick=function(e){var t=e.target.parentNode.rowIndex,o=e.target.cellIndex;a.setState({row:t,col:o});for(var r=a.tableRef.current.rows,n=0;n<=3;n++)for(var i=0;i<=3;i++)r[n].cells[i].bgColor="#444444";for(var l=0;l<=t;l++)for(var s=0;s<=o;s++)r[l].cells[s].bgColor="#AAAAAA";a.props.onChange(t+1,o+1)},a.tableRef=r.a.createRef(),a.state={row:a.props.row,col:a.props.col},a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.initTable()}},{key:"renderTable",value:function(){var e=this;return["","","",""].map((function(t,a){return r.a.createElement("tr",{key:"".concat(a)},r.a.createElement("td",{style:nt,onClick:e.cellClick}),r.a.createElement("td",{style:nt,onClick:e.cellClick}),r.a.createElement("td",{style:nt,onClick:e.cellClick}),r.a.createElement("td",{style:nt,onClick:e.cellClick}))}))}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("table",{style:rt,ref:this.tableRef},r.a.createElement("tbody",null,this.renderTable())))}}]),t}(o.PureComponent),lt=a(199),st=a(197),ct=a(110),mt=a.n(ct),ut=a(111),dt=a.n(ut),gt=a(198),pt=a(85),ht=a.n(pt),ft=a(109),vt=a.n(ft),St=a(206);a(145);null===localStorage.getItem("debug-u-dicom-viewer")&&(console.log=function(){});var Et=null,bt=function(e){function t(e){var a;Object(l.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).state={anchorElLayout:null,openImageEdit:!1,visibleMainMenu:!0,visibleHeader:!1,visibleSettings:!1,visibleToolbar:!0,visibleOpenUrl:!1,visibleToolbox:!1,visibleMeasure:!1,visibleClearMeasureDlg:!1,visibleAbout:!1,toolState:1},a.setDcmViewer=function(e){return r.a.createElement(de,{dcmRef:function(t){a.dicomViewersRefs[e]=t},index:e,runTool:function(e){return a.runTool=e},changeTool:function(e){return a.changeTool=e}})},a.getDcmViewerRef=function(e){return a.dicomViewersRefs[e]},a.getDcmViewer=function(e){return a.dicomViewers[e]},a.getActiveDcmViewer=function(){return a.dicomViewersRefs[a.props.activeDcmIndex]},a.handleOpenFile=function(e){a.hideMainMenu();var t=e[0];a.dicomViewersRefs[a.props.activeDcmIndex].runTool("clear"),a.dicomViewersRefs[a.props.activeDcmIndex].runTool("openfile",t)},a.showAppBar=function(){window.scrollTo(0,0)},a.toggleMainMenu=function(){a.setState({visibleMainMenu:!a.state.visibleMainMenu})},a.showMainMenu=function(){a.setState({visibleMainMenu:!0})},a.hideMainMenu=function(){a.setState({visibleMainMenu:!1})},a.handleVisibility=function(e){a.setState({visibleMainMenu:e})},a.toggleHeader=function(){var e=!a.state.visibleHeader;a.setState({visibleHeader:e}),e&&a.setState({visibleMeasure:!1,visibleToolbox:!1})},a.toggleToolbox=function(){var e=!a.state.visibleToolbox;a.setState({visibleToolbox:e}),e&&a.setState({visibleMeasure:!1,visibleHeader:!1})},a.saveMeasure=function(){a.dicomViewersRefs[a.props.activeDcmIndex].runTool("savetools")},a.toggleMeasure=function(){var e=!a.state.visibleMeasure;a.setState({visibleMeasure:e}),e&&a.setState({visibleToolbox:!1,visibleHeader:!1})},a.hideMeasure=function(){a.setState({visibleMeasure:!1})},a.handleVisibilityMeasure=function(e){a.setState({visibleMeasure:e})},a.clearMeasure=function(){a.showClearMeasureDlg()},a.showClearMeasureDlg=function(){a.setState({visibleClearMeasureDlg:!0})},a.hideClearMeasureDlg=function(){a.setState({visibleClearMeasureDlg:!1})},a.confirmClearMeasureDlg=function(){a.hideClearMeasureDlg(),a.dicomViewersRefs[a.props.activeDcmIndex].runTool("removetools")},a.showAbout=function(){a.setState({visibleAbout:!a.state.visibleAbout})},a.showSettings=function(){a.setState({visibleMainMenu:!1,visibleSettings:!0,visibleToolbar:!1,position:"right"})},a.hideSettings=function(){a.setState({visibleMainMenu:!0,visibleSettings:!1,visibleToolbar:!0})},a.handleVisibilitySettings=function(e){a.setState({visibleSettings:e})},a.showOpenUrl=function(){a.setState({visibleOpenUrl:!0})},a.hideOpenUrl=function(e){a.setState({visibleOpenUrl:!1},(function(){if(e)return a.hideMainMenu(),a.dicomViewersRefs[a.props.activeDcmIndex].runTool("openurl",a.openUrlField.value)}))},a.downloadOpenUrl=function(){a.setState({visibleOpenUrl:!1,visibleToolbar:!0})},a.resetImage=function(){a.dicomViewersRefs[a.props.activeDcmIndex].runTool("reset")},a.saveShot=function(){a.dicomViewersRefs[a.props.activeDcmIndex].runTool("saveas")},a.cinePlayer=function(){a.dicomViewersRefs[a.props.activeDcmIndex].runTool("cine")},a.clear=function(){a.setState({openImageEdit:!1,visibleToolbox:!1,visibleMeasure:!1,visibleHeader:!1}),a.dicomViewersRefs[a.props.activeDcmIndex].runTool("clear")},a.handleLayout=function(e){a.setState({anchorElLayout:e.currentTarget})},a.closeLayout=function(){a.setState({anchorElLayout:null})},a.changeLayout=function(e,t){if(e<a.props.layout[0]||t<a.props.layout[1]){a.layoutGridClick(0);for(var o=0;o<4;o++)for(var r=0;r<4;r++)if(o+1>e||r+1>t){var n=4*o+r;void 0!==a.dicomViewersRefs[n]&&a.dicomViewersRefs[n].runTool("clear")}}a.props.setLayoutStore(e,t)},a.toolExecute=function(e){switch(a.hideMainMenu(),e){case"notool":Et=null,a.setState({toolState:null});break;case"Wwwc":Et=$.b;break;case"Pan":Et=$.g;break;case"Zoom":Et=$.r;break;case"Length":Et=$.w;break;case"Probe":Et=$.j;break;case"Angle":Et=$.a;break;case"EllipticalRoi":Et=$.i;break;case"RectangleRoi":Et=$.u;break;case"FreehandRoi":Et=$.n}a.props.toolStore(e),a.dicomViewersRefs[a.props.activeDcmIndex].runTool(e)},a.toolChange=function(){var e=1-a.state.toolState;a.setState({toolState:e},(function(){a.changeTool.changeTool(a.props.tool,e)}))},a.toolRemove=function(e){a.dicomViewersRefs[a.props.activeDcmIndex].runTool("removetool",e)},a.toggleImageEdit=function(){a.setState({openImageEdit:!a.state.openImageEdit})},a.layoutGridClick=function(e){if(!ne.isMobile||e!==a.props.activeDcmIndex){a.props.setActiveDcmIndex(e);var t=a.getDcmViewerRef(e);a.props.setActiveMeasurements(t.measurements),a.props.setActiveDcm({image:t.image,element:t.dicomImage,isDicom:t.isDicom})}},a.layoutGridTouch=function(e){if(ne.isMobile||e!==a.props.activeDcmIndex){a.props.setActiveDcmIndex(e);var t=a.getDcmViewerRef(e);a.props.setActiveMeasurements(t.measurements),a.props.setActiveDcm({image:t.image,element:t.dicomImage,isDicom:t.isDicom})}},a.buildLayoutGrid=function(){for(var e=[],t=0;t<a.props.layout[0];t++)for(var o=function(o){var n={border:1===a.props.layout[0]&&1===a.props.layout[1]?"solid 1px #000000":"solid 1px #444444"},i=4*t+o;e.push(r.a.createElement("div",{key:i,style:n,onClick:function(){return a.layoutGridClick(i)},onTouchStart:function(){return a.layoutGridTouch(i)}},a.getDcmViewer(i)))},n=0;n<a.props.layout[1];n++)o(n);return r.a.createElement("div",{id:"dicomviewer-grid",style:{display:"grid",gridTemplateRows:"repeat(".concat(a.props.layout[0],", ").concat(100/a.props.layout[0],"%)"),gridTemplateColumns:"repeat(".concat(a.props.layout[1],", ").concat(100/a.props.layout[1],"%)"),height:"100%",width:"100%"}},e)},a.getFileName=function(e){return null!==e.localfile?e.localfile.name:e.localurl.substring(e.localurl.lastIndexOf("/")+1)},a.appBarTitle=function(e,t,o){return ne.isMobile&&!ne.isTablet?t?null:r.a.createElement(P.a,{variant:"overline",className:e.title},r.a.createElement("strong",null,"U"),"niversal ",r.a.createElement("strong",null,"D"),"icom ",r.a.createElement("strong",null,"V"),"iewer"):t?r.a.createElement(P.a,{variant:"overline",className:e.title},a.getFileName(o)):r.a.createElement(P.a,{variant:"overline",className:e.title},r.a.createElement("strong",null,"U"),"niversal ",r.a.createElement("strong",null,"D"),"icom ",r.a.createElement("strong",null,"V"),"iewer")},a.file=null,a.fileOpen=r.a.createRef(),a.showFileOpen=a.showFileOpen.bind(Object(u.a)(a)),a.openUrlField=r.a.createRef(),a.dicomViewersRefs=[],a.dicomViewers=[];for(var o=0;o<16;o++)a.dicomViewers.push(a.setDcmViewer(o));return a}return Object(d.a)(t,e),Object(s.a)(t,[{key:"showFileOpen",value:function(){this.props.isOpenStore(!1),this.fileOpen.current.click()}},{key:"componentDidMount",value:function(){window.scrollTo(0,0)}},{key:"render",value:function(){var e=this,t=this.props.classes,a=this.props.isOpen[this.props.activeDcmIndex],o=this.state.openImageEdit,n=this.state.visibleMainMenu,i=this.state.visibleHeader,l=this.state.visibleSettings,s=this.state.visibleAbout,c=this.state.visibleMeasure,m=this.state.visibleToolbox,u=Boolean(this.state.anchorElLayout),d=1===this.state.toolState?"#FFFFFF":"#999999",g=this.getActiveDcmViewer();return r.a.createElement("div",null,r.a.createElement(we.a,{className:t.appBar,position:"static",elevation:0},r.a.createElement(fe.a,{variant:"dense"},r.a.createElement(K.a,{edge:"start",className:t.menuButton,color:"inherit","aria-label":"menu",onClick:this.toggleMainMenu},r.a.createElement(ht.a,null)),this.appBarTitle(t,a,g),r.a.createElement("div",{className:t.grow}),a?null:r.a.createElement(K.a,{onClick:this.showAbout},r.a.createElement(Y.a,{path:$.p,size:"1.5rem",color:"#FFFFFF"})),null!==Et&&null!==this.props.tool&&a?r.a.createElement(K.a,{onClick:this.toolChange},r.a.createElement(Y.a,{path:Et,size:"1.5rem",color:d})):null,a&&g.numberOfFrames>1&&a?r.a.createElement(K.a,{onClick:this.cinePlayer},r.a.createElement(Y.a,{path:$.E,size:"1.5rem",color:"#FFFFFF"})):null,a?r.a.createElement(K.a,{onClick:this.resetImage},r.a.createElement(Y.a,{path:$.v,size:"1.5rem",color:"#FFFFFF"})):null,a?r.a.createElement(K.a,{color:"inherit",onClick:this.saveShot},r.a.createElement(vt.a,null)):null,a?r.a.createElement(K.a,{color:"inherit",onClick:this.toggleToolbox},r.a.createElement(Y.a,{path:$.C,size:"1.5rem",color:"#FFFFFF"})):null,a?r.a.createElement(K.a,{color:"inherit",onClick:this.toggleMeasure},r.a.createElement(Y.a,{path:$.k,size:"1.5rem",color:"#FFFFFF"})):null,a&&g.isDicom?r.a.createElement(K.a,{color:"inherit",onClick:this.toggleHeader},r.a.createElement(Y.a,{path:$.l,size:"1.5rem",color:"#FFFFFF"})):null)),r.a.createElement(st.a,{variant:"persistent",open:n,style:{position:"relative",zIndex:1},onClose:this.toggleMainMenu},r.a.createElement("div",{className:t.toolbar},r.a.createElement(ge.a,{dense:!0},r.a.createElement(pe.a,{button:!0,onClick:function(){return e.showAppBar()}},r.a.createElement(gt.a,null,r.a.createElement(ht.a,null)),r.a.createElement(he.a,{primary:"Tool Bar"})),r.a.createElement(pe.a,{button:!0,onClick:function(){return e.showFileOpen()}},r.a.createElement(gt.a,null,r.a.createElement(Y.a,{path:$.m,size:"1.5rem",color:"#FFFFFF"})),r.a.createElement(he.a,{primary:"Open File ..."})),r.a.createElement(pe.a,{button:!0,onClick:function(){return e.showOpenUrl()}},r.a.createElement(gt.a,null,r.a.createElement(Y.a,{path:$.G,size:"1.5rem",color:"#FFFFFF"})),r.a.createElement(he.a,{primary:"Open URL ..."})),r.a.createElement(pe.a,{button:!0,onClick:function(){return e.clear()}},r.a.createElement(gt.a,null,r.a.createElement(Y.a,{path:$.h,size:"1.5rem",color:"#FFFFFF"})),r.a.createElement(he.a,{primary:"Clear"})),r.a.createElement(pe.a,{button:!0,onClick:this.handleLayout},r.a.createElement(gt.a,null,r.a.createElement(Y.a,{path:$.F,size:"1.5rem",color:"#FFFFFF"})),r.a.createElement(he.a,{primary:"Layout"})),r.a.createElement(pe.a,{button:!0,onClick:function(){return e.showSettings()}},r.a.createElement(gt.a,null,r.a.createElement(Y.a,{path:$.x,size:"1.5rem",color:"#FFFFFF"})),r.a.createElement(he.a,{primary:"Settings"})),r.a.createElement(je.a,null),r.a.createElement(pe.a,{button:!0,onClick:function(){return e.toolExecute("notool")},disabled:!a},r.a.createElement(gt.a,null,r.a.createElement(Y.a,{path:$.f,size:"1.5rem",color:"#FFFFFF"})),r.a.createElement(he.a,{primary:"No tool"})),r.a.createElement(pe.a,{button:!0,onClick:function(){return e.toolExecute("Wwwc")},disabled:!a},r.a.createElement(gt.a,null,r.a.createElement(Y.a,{path:$.b,size:"1.5rem",color:"#FFFFFF"})),r.a.createElement(he.a,{primary:"WW/WC"})),r.a.createElement(pe.a,{button:!0,onClick:function(){return e.toolExecute("Pan")},disabled:!a},r.a.createElement(gt.a,null,r.a.createElement(Y.a,{path:$.g,size:"1.5rem",color:"#FFFFFF"})),r.a.createElement(he.a,{primary:"Pan"})),r.a.createElement(pe.a,{button:!0,onClick:function(){return e.toolExecute("Zoom")},disabled:!a},r.a.createElement(gt.a,null,r.a.createElement(Y.a,{path:$.r,size:"1.5rem",color:"#FFFFFF"})),r.a.createElement(he.a,{primary:"Zoom"})),r.a.createElement(pe.a,{button:!0,onClick:function(){return e.toolExecute("Magnify")},disabled:!a},r.a.createElement(gt.a,null,r.a.createElement(Y.a,{path:$.d,size:"1.5rem",color:"#FFFFFF"})),r.a.createElement(he.a,{primary:"Magnify"})),r.a.createElement(pe.a,{button:!0,onClick:function(){return e.toolExecute("Length")},disabled:!a},r.a.createElement(gt.a,null,r.a.createElement(Y.a,{path:$.w,size:"1.5rem",color:"#FFFFFF"})),r.a.createElement(he.a,{primary:"Length"})),r.a.createElement(pe.a,{button:!0,onClick:function(){return e.toolExecute("Probe")},disabled:!a},r.a.createElement(gt.a,null,r.a.createElement(Y.a,{path:$.j,size:"1.5rem",color:"#FFFFFF"})),r.a.createElement(he.a,{primary:"Probe"})),r.a.createElement(pe.a,{button:!0,onClick:function(){return e.toolExecute("Angle")},disabled:!a},r.a.createElement(gt.a,null,r.a.createElement(Y.a,{path:$.a,size:"1.5rem",color:"#FFFFFF"})),r.a.createElement(he.a,{primary:"Angle"})),r.a.createElement(pe.a,{button:!0,onClick:function(){return e.toolExecute("EllipticalRoi")},disabled:!a},r.a.createElement(gt.a,null,r.a.createElement(Y.a,{path:$.i,size:"1.5rem",color:"#FFFFFF"})),r.a.createElement(he.a,{primary:"Elliptical Roi"})),r.a.createElement(pe.a,{button:!0,onClick:function(){return e.toolExecute("RectangleRoi")},disabled:!a},r.a.createElement(gt.a,null,r.a.createElement(Y.a,{path:$.u,size:"1.5rem",color:"#FFFFFF"})),r.a.createElement(he.a,{primary:"Rectangle Roi"})),r.a.createElement(pe.a,{button:!0,onClick:function(){return e.toolExecute("FreehandRoi")},disabled:!a},r.a.createElement(gt.a,null,r.a.createElement(Y.a,{path:$.n,size:"1.5rem",color:"#FFFFFF"})),r.a.createElement(he.a,{primary:"Freehand Roi"})),r.a.createElement(pe.a,{button:!0,onClick:function(){return e.toolExecute("Histogram")},disabled:!a},r.a.createElement(gt.a,null,r.a.createElement(Y.a,{path:$.c,size:"1.5rem",color:"#FFFFFF"})),r.a.createElement(he.a,{primary:"Histogram"})),r.a.createElement(pe.a,{button:!0,onClick:function(){return e.toggleImageEdit()},disabled:!a},r.a.createElement(gt.a,null,r.a.createElement(Y.a,{path:$.o,size:"1.5rem",color:"#FFFFFF"})),r.a.createElement(he.a,{primary:"Edit"}),o?r.a.createElement(mt.a,null):r.a.createElement(dt.a,null)),r.a.createElement(lt.a,{in:o,timeout:"auto",unmountOnExit:!0},r.a.createElement(ge.a,{dense:!0,component:"div"},r.a.createElement(pe.a,{button:!0,style:{paddingLeft:30},onClick:function(){return e.toolExecute("Invert")}},r.a.createElement(gt.a,null,r.a.createElement(Y.a,{path:$.q,size:"1.5rem",color:"#FFFFFF"})),r.a.createElement(he.a,{primary:"Invert"}))))))),r.a.createElement(st.a,{variant:"persistent",anchor:"right",open:i,onClose:this.toggleHeader},i?r.a.createElement(Se,{dcmViewer:g,classes:t,color:"#FFFFFF"}):null),r.a.createElement(st.a,{variant:"persistent",anchor:"right",open:c,onClose:this.toggleMeasure},r.a.createElement("div",{style:{marginTop:"48px"}},r.a.createElement(fe.a,{variant:"dense"},r.a.createElement(P.a,{variant:"subtitle1",className:t.title},"Measurements\xa0\xa0"),r.a.createElement("div",{className:t.grow}),r.a.createElement(K.a,{color:"inherit",onClick:this.saveMeasure,edge:"end"},r.a.createElement(Y.a,{path:$.e,size:"1.5rem",color:"#FFFFFF"})),r.a.createElement(K.a,{color:"inherit",onClick:this.clearMeasure,edge:"end"},r.a.createElement(Y.a,{path:$.D,size:"1.5rem",color:"#FFFFFF"}))),r.a.createElement("div",null,a?r.a.createElement(Me,{dcmViewer:g,toolRemove:this.toolRemove,classes:t}):null))),r.a.createElement(st.a,{variant:"persistent",anchor:"right",open:m,onClose:this.toggleToolbox},r.a.createElement("div",{style:{marginTop:"48px"}},r.a.createElement("div",null,a?r.a.createElement(ot,{key:this.getFileName(g)}):null))),l?r.a.createElement(Xe,{onClose:this.hideSettings}):null,s?r.a.createElement(Qe,{onClose:this.showAbout}):null,r.a.createElement(f.a,{open:this.state.visibleClearMeasureDlg,onClose:this.hideClearMeasureDlg,"aria-labelledby":"alert-dialog-title"},r.a.createElement(b.a,{id:"alert-dialog-title"},"Are you sure to remove all the measurements?"),r.a.createElement(v.a,null,r.a.createElement(h.a,{onClick:this.hideClearMeasureDlg},"Cancel"),r.a.createElement(h.a,{onClick:this.confirmClearMeasureDlg,autoFocus:!0},"Ok"))),r.a.createElement(f.a,{open:this.state.visibleOpenUrl,"aria-labelledby":"form-dialog-title"},r.a.createElement(b.a,{id:"form-dialog-title"},"Open URL"),r.a.createElement(S.a,null,r.a.createElement(E.a,{id:"alert-dialog-description"},"Insert an URL to download a DICOM or image file:"),r.a.createElement(Ce.a,{autoFocus:!0,margin:"dense",id:"id-open-url",inputRef:function(t){return e.openUrlField=t},fullWidth:!0})),r.a.createElement(v.a,null,r.a.createElement(h.a,{onClick:function(){return e.hideOpenUrl(!1)}},"Cancel"),r.a.createElement(h.a,{onClick:function(){return e.hideOpenUrl(!0)},autoFocus:!0},"Ok"))),r.a.createElement(St.a,{id:"id-layout",open:u,anchorEl:this.state.anchorElLayout,onClose:this.closeLayout,anchorOrigin:{vertical:"center",horizontal:"right"},transformOrigin:{vertical:"center",horizontal:"left"}},r.a.createElement(it,{row:this.props.layout[0]-1,col:this.props.layout[1]-1,onChange:this.changeLayout})),r.a.createElement("div",{style:{height:"calc(100vh - 48px)"}},this.buildLayoutGrid()),r.a.createElement("div",null,r.a.createElement("input",{type:"file",id:"my_file",style:{display:"none"},ref:this.fileOpen,onChange:function(t){return e.handleOpenFile(t.target.files)}})))}}]),t}(o.PureComponent),yt=Object(p.b)((function(e){return{isOpen:e.isOpen,tool:e.tool,activeDcmIndex:e.activeDcmIndex,measurements:e.measurements,layout:e.layout}}),(function(e){return{toolStore:function(t){return e(U(t))},isOpenStore:function(t){return e(N(t))},setActiveDcm:function(t){return e(H(t))},setActiveDcmIndex:function(t){return e(function(e){return{type:j,activeDcmIndex:e}}(t))},setActiveMeasurements:function(t){return e(W(t))},setLayoutStore:function(t,a){return e(function(e,t){return{type:B,layout:[e,t]}}(t,a))}}}))(Object(Oe.a)((function(e){return{"@global":{body:{backgroundColor:e.palette.common.black}},grow:{flexGrow:1},root:{display:"flex"},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1},appBar:{position:"relative",zIndex:e.zIndex.drawer+1,transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{marginLeft:240,width:"calc(100% - ".concat(240,"px)"),transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},hide:{display:"none"},drawer:{width:240,flexShrink:0,whiteSpace:"nowrap"},drawerOpen:{width:240,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},drawerClose:Object(g.a)({transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),overflowX:"hidden",width:e.spacing(7)+1},e.breakpoints.up("sm"),{width:e.spacing(9)+1}),toolbar:e.mixins.toolbar,content:{flexGrow:1,padding:e.spacing(3)}}}))(bt));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Pt=a(112),Ct=a.n(Pt),Ot=a(68),It=a(39);function Ft(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,o)}return a}function Rt(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ft(Object(a),!0).forEach((function(t){Object(g.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ft(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Mt={isOpen:new Array(16).fill(!1),tool:null,activeDcmIndex:0,activeDcm:null,images:[],measurements:null,layout:[1,1]},Dt=Object(Ot.b)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case x:return{isOpen:e.isOpen.map((function(t,a){return a!==e.activeDcmIndex&&t})),tool:null,activeDcmIndex:e.activeDcmIndex,activeDcm:e.activeDcm,images:[],measurements:null,layout:e.layout};case k:return Rt({},e,{isOpen:e.isOpen.map((function(a,o){return o===e.activeDcmIndex?t.value:a})),images:Object(It.a)(e.images),measurements:e.measurements,layout:e.layout});case A:return Rt({},e,{tool:t.tool,images:Object(It.a)(e.images),measurements:e.measurements,layout:e.layout});case j:return Rt({},e,{activeDcmIndex:t.activeDcmIndex,images:Object(It.a)(e.images),measurements:e.measurements,layout:e.layout});case V:return Rt({},e,{activeDcm:t.activeDcm,images:Object(It.a)(e.images),measurements:e.measurements,layout:e.layout});case L:return Rt({},e,{images:[].concat(Object(It.a)(e.images),[t.images]),measurements:e.measurements,layout:e.layout});case G:return Rt({},e,{measurements:Object(It.a)(t.measurements)});case B:return Rt({},e,{images:Object(It.a)(e.images),measurements:e.measurements,layout:t.layout});default:return e}}),Mt,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()),Tt=a(113),wt=a(200);Ct.a.load({google:{families:["Roboto:300,400,500,700","Material Icons"]}}),Dt.subscribe((function(){return console.log("store updated:",Dt.getState())}));var xt=Object(Tt.a)({palette:{primary:{main:"#004d40"},secondary:{main:"#888888"},type:"dark"}});i.a.render(r.a.createElement(p.a,{store:Dt},r.a.createElement(wt.a,{theme:xt},r.a.createElement(yt,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[131,1,2]]]);
//# sourceMappingURL=main.97c330ea.chunk.js.map