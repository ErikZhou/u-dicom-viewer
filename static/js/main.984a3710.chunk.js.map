{"version":3,"sources":["actions/index.js","constants/uids.js","constants/settings.js","components/OpenUrlDlg.js","components/CinePlayer.js","components/Histogram.js","functions.js","db.js","components/dicomviewer.js","components/HeaderItem.js","components/MeasureItem.js","components/Settings.js","components/AboutDlg.js","App.js","serviceWorker.js","store/index.js","reducers/index.js","index.js"],"names":["CLEAR_STORE","LOAD_LOCALFILE","LOAD_URL","DCM_IS_OPEN","DCM_NUMBER_OF_FRAMES","DCM_TOOL","DCM_IMAGE","DCMDATA_STORE","MEASURE_STORE","MEASURE_REMOVE","MEASURE_CLEAR","dcmTool","tool","type","uids","SETTINGS_SAVEAS","SETTINGS_DCMHEADER","SETTINGS_OVERLAY","OpenUrlDlg","hide","props","onClose","cancel","window","stop","Dialog","open","this","aria-labelledby","DialogTitle","id","DialogContent","LinearProgress","variant","value","progress","color","DialogActions","Button","onClick","PureComponent","CinePlayer","firstframe","runCinePlayer","previousframe","play","pause","nextframe","lastframe","inPlay","IconButton","path","mdiPause","size","mdiPlay","style","width","margin","mdiSkipBackward","mdiSkipPrevious","mdiSkipNext","mdiSkipForward","getRGBPixels","csTools","padding","backgroundColor","styleSlider","marginTop","styleCanvasGradient","styleTable","borderCollapse","fontFamily","fontSize","styleTableTd","tableLayout","Histogram","state","activeDrags","deltaPosition","x","y","controlledPosition","histCount","valueScale","minHist","maxHist","mean","stdDev","handleChangeValue","event","newValue","console","log","binSize","hist256","setState","onDrag","e","ui","deltaX","deltaY","onStart","onStop","canvasHistogram","React","createRef","canvasGradient","pixelData","image","getPixelData","updateCanvas","canvas","evt","rect","getBoundingClientRect","clientX","left","clientY","top","height","storedPixelData","Math","round","spIndex","row","column","index","rows","red","green","blue","alpha","element","isDicom","cornerstone","getRGBPixelsImage","maxPixelValue","minPixelValue","intercept","lenHist","zero256","floor","abs","stepWW","windowWidth","stepWC","windowCenter","columns","m","hist","Array","fill","mo","getPixel","slope","s","pow","sqrt","step","max","i","j","canvasH","current","ctxH","getContext","translate","scale","addEventListener","mousePos","getMousePos","p","beginPath","fillStyle","fillRect","strokeStyle","h","moveTo","lineTo","stroke","lineWidth","lowX","highX","ctxG","grd","createLinearGradient","addColorStop","handle","defaultPosition","className","edge","ref","cursor","Slider","onChange","mix","parseFloat","toFixed","isUrlImage","url","match","isFileImage","file","includes","getSettingsOverlay","overlay","localStorage","getItem","setItem","toCsvValue","theValue","t","replace","String","db","Dexie","version","stores","measurement","scrollToIndex","hAppBar","getBlobUrl","baseUrl","URL","webkitURL","blob","Blob","createObjectURL","config","maxWebWorkers","webWorkerPath","taskConfiguration","decodeTask","codecsPath","DicomViewer","imageWidth","innerWidth","imageHeight","innerHeight","visibleOpenUrlDlg","visibleCinePlayer","visibleHistogram","errorOnOpenImage","frame","viewport","onOpenUrl","eventData","detail","percentComplete","showOpenUrlDlg","loadImage","undefined","hideOpenUrlDlg","showHistogram","hideHistogram","getTransferSyntax","data","string","getSopClass","getSopInstanceUID","getPixelRepresentation","uint16","getPlanarConfiguration","onImageLoaded","onImageRendered","target","document","getElementById","textContent","dataHeader","PatientsName","displayedArea","brhc","voi","numberOfFrames","onMeasurementModified","onMeasurementCompleted","measurementData","measure","note","measurementStore","onErrorOpenImageClose","localfile","localfileStore","urlStore","dicomImage","onNewImage","onMeasurementAdded","cornerstoneTools","isMobile","touchEnabled","mouseEnabled","imageId","then","isOpenStore","enableTool","cornerstoneFileImageLoader","add","cornerstoneWADOImageLoader","fileManager","dataStore","transferSyntax","sopClass","sopInstanceUid","samplesPerPixel","photometricInterpretation","planarConfiguration","pixelSpacing","bitsAllocated","bitsStored","highBit","pixelRepresentation","rescaleIntercept","rescaleSlope","basicOffsetTable","elements","x7fe00010","length","fragments","minStoredPixelValue","maxStoredPixelValue","stack","currentImageIdIndex","imageIds","nFrames","intString","numberOfFramesStore","push","where","equals","each","runTool","pos","error","indexOf","substring","toolName","mouseButtonNumber","WwwcTool","LengthTool","PanTool","ZoomTouchPinchTool","ZoomTool","ProbeTool","EllipticalRoiTool","RectangleRoiTool","FreehandRoiTool","AngleTool","MagnifyTool","StackScrollMouseWheelTool","disableAllTools","opt","clearingStore","mouseButtonMask","isTouchActive","name","reset","measurementRemoveStore","forEach","measurementClearStore","delete","sopinstanceuid","changeTool","cmdName","defaultViewport","dicomImageRef","el","cornerstoneMath","cornerstoneWebImageLoader","initialize","dicomParser","Hammer","scrollTo","styleContainer","display","visible","styleDicomImage","position","aria-describedby","DialogContentText","autoFocus","role","tabIndex","onContextMenu","unselectable","onMouseDown","isOpen","right","bottom","textAlign","Component","connect","loadLocalfile","header","dispatch","dcmIsOpen","dcmNumberOfFrames","toolStore","loadUrl","dcmDataStore","measureStore","measureRemove","HeaderItem","ListItem","dense","ListItemText","primary","secondary","MeasureItem","visibleDlgNote","visibleDlgDelete","showDlgNote","hideDlgNote","showDlgDelete","hideDlgDelete","handleOnChangeNote","confirmNote","noteField","confirmDelete","toolRemove","onEdit","onDelete","item","pText","sText","unit","rAngle","cachedStats","area","meanStdDev","Toolbar","TextField","fullWidth","defaultValue","inputRef","input","useStyles","makeStyles","theme","appBar","formControl","spacing","title","marginLeft","flex","Transition","forwardRef","Slide","direction","Settings","saveAs","getSettingsSaveAs","exportAs","getSettingsDcmHeader","classes","useState","fullScreen","TransitionComponent","AppBar","aria-label","Typography","FormControl","component","FormControlLabel","control","Checkbox","checked","label","Divider","FormLabel","RadioGroup","Radio","AboutDlg","linkRepository","Link","href","disableTypography","List","iconTool","App","menuListSetting","key","primaryText","visibleDcm","visibleMainMenu","visibleHeader","visibleSettings","visibleToolbar","visibleOpenUrl","visibleMeasure","visibleClearMeasureDlg","visibleAbout","toolState","handleChange","filesSelected","hideMainMenu","toggleMainMenu","showMainMenu","handleVisibility","toggleHeader","saveHeader","fileData","objArray","cDelimiter","l","obj","n","nl","names","output","sDelimiter","hasOwnProperty","join","toCsv","reduce","o","JSON","stringify","createElement","download","body","appendChild","click","saveMeasure","toggleMeasure","hideMeasure","handleVisibilityMeasure","clearMeasure","showClearMeasureDlg","hideClearMeasureDlg","confirmClearMeasureDlg","showAbout","showSettings","hideSettings","handleVisibilitySettings","showOpenUrl","hideOpenUrl","openDlg","openUrlField","downloadOpenUrl","resetImage","saveShot","cinePlayer","toolExecute","mdiArrowAll","mdiCursorPointer","mdiMagnify","mdiRuler","mdiEyedropper","mdiAngleAcute","mdiEllipse","mdiRectangle","mdiGesture","toolChange","fileOpen","showFileOpen","bind","dialog","deviceDetect","iconToolColor","files","menuButton","grow","mdiInformationOutline","mdiVideo","mdiRefresh","mdiFileCad","mdiFileDocument","Drawer","zIndex","toolbar","button","ListItemIcon","mdiSettings","mdiFolder","mdiWeb","mdiDelete","disabled","mdiCursorDefault","mdiCheckboxIntermediate","mdiChartHistogram","anchor","map","mdiContentSaveOutline","mdiTrashCanOutline","withStyles","palette","common","black","flexGrow","root","marginRight","drawer","transition","transitions","create","easing","sharp","duration","leavingScreen","appBarShift","enteringScreen","flexShrink","whiteSpace","drawerOpen","drawerClose","overflowX","breakpoints","up","mixins","content","Boolean","location","hostname","store","createStore","action","images","splice","__REDUX_DEVTOOLS_EXTENSION__","WebFontLoader","load","google","families","subscribe","getState","createMuiTheme","main","ReactDOM","render","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.984a3710.chunk.js","sourcesContent":["/*\r\n * action types\r\n */\r\n\r\nexport const CLEAR_STORE = 'CLEAR_STORE'\r\nexport const LOAD_LOCALFILE = 'LOAD_LOCALFILE'\r\nexport const LOAD_URL = 'LOAD_URL'\r\nexport const DCM_IS_OPEN = 'DCM_IS_OPEN'\r\nexport const DCM_NUMBER_OF_FRAMES = 'DCM_NUMBER_OF_FRAMES'\r\nexport const DCM_TOOL = 'DCM_TOOL'\r\nexport const DCM_IMAGE = 'DCM_IMAGE'\r\nexport const DCMDATA_STORE = 'DCMDATA_STORE'\r\nexport const MEASURE_STORE = 'MEASURE_STORE'\r\nexport const MEASURE_REMOVE = 'MEASURE_REMOVE'\r\nexport const MEASURE_CLEAR = 'MEASURE_CLEAR'\r\n\r\n/*\r\n * action creators\r\n */\r\n\r\nexport const clearStore = () => {\r\n    return { \r\n        type: CLEAR_STORE, \r\n    }\r\n}\r\n\r\nexport const loadLocalfile = (file) => {\r\n    return { \r\n        type: LOAD_LOCALFILE, \r\n        localfile: file \r\n    }\r\n}\r\n\r\nexport const loadUrl = (url) => {\r\n    return { \r\n        type: LOAD_URL, \r\n        url: url \r\n    }\r\n}\r\n\r\nexport const dcmIsOpen = (value) => {\r\n    return { \r\n        type: DCM_IS_OPEN, \r\n        value: value \r\n    }\r\n}\r\n\r\nexport const dcmNumberOfFrames = (value) => {\r\n    return { \r\n        type: DCM_NUMBER_OF_FRAMES, \r\n        value: value \r\n    }\r\n}\r\n\r\nexport const dcmTool = (tool) => {\r\n    return { \r\n        type: DCM_TOOL, \r\n        tool: tool \r\n    }\r\n}\r\n\r\nexport const dcmImage = (image) => {\r\n    return { \r\n        type: DCM_IMAGE, \r\n        images: image \r\n    }\r\n}\r\n\r\nexport const dcmDataStore = (data) => {\r\n    return { \r\n        type: DCMDATA_STORE, \r\n        data: data \r\n    }\r\n}\r\n\r\n\r\nexport const measureStore = (measure) => {\r\n    return { \r\n        type: MEASURE_STORE, \r\n        measure: measure \r\n    }\r\n}\r\n\r\nexport const measureRemove = (index) => {\r\n    return { \r\n        type: MEASURE_REMOVE, \r\n        index: index \r\n    }\r\n}\r\n\r\nexport const measureClear = () => {\r\n    return { \r\n        type: MEASURE_CLEAR, \r\n    }\r\n}","// The table below was generated by running the following javascript in the console window while\n// viewing the HTML version of the standard here:\n// DICOM Standard here: http://dicom.nema.org/medical/dicom/current/output/html/part06.html\n// see the blog post about it here: http://chafey.blogspot.com/2015/08/parsing-dicom-standard-with-javascript.html\n\n/*\n (function () {\n var elements = document.querySelectorAll('#table_A-1 ~ div tbody tr');\n var result = \"\";for(var i=0; i < elements.length; i++) {\n result += \"'\" + elements[i].childNodes[1].childNodes[1].innerText.replace(/[^\\x20-\\x7E]+/g, '')  + \"':'\" +\n elements[i].childNodes[3].childNodes[1].innerText.replace(/[^\\x20-\\x7E]+/g, '') + \"',\\n\";\n }\n return result;\n })();\n */\n\nexport const uids = {\n  '1.2.840.10008.1.1':'Verification SOP Class',\n  '1.2.840.10008.1.2':'Implicit VR Little Endian: Default Transfer Syntax for DICOM',\n  '1.2.840.10008.1.2.1':'Explicit VR Little Endian',\n  '1.2.840.10008.1.2.1.99':'Deflated Explicit VR Little Endian',\n  '1.2.840.10008.1.2.2':'Explicit VR Big Endian (Retired)',\n  '1.2.840.10008.1.2.4.50':'JPEG Baseline (Process 1): Default Transfer Syntax for Lossy JPEG 8 Bit Image Compression',\n  '1.2.840.10008.1.2.4.51':'JPEG Extended (Process 2 & 4): Default Transfer Syntax for Lossy JPEG 12 Bit Image Compression (Process 4 only)',\n  '1.2.840.10008.1.2.4.52':'JPEG Extended (Process 3 & 5) (Retired)',\n  '1.2.840.10008.1.2.4.53':'JPEG Spectral Selection, Non-Hierarchical (Process 6 & 8) (Retired)',\n  '1.2.840.10008.1.2.4.54':'JPEG Spectral Selection, Non-Hierarchical (Process 7 & 9) (Retired)',\n  '1.2.840.10008.1.2.4.55':'JPEG Full Progression, Non-Hierarchical (Process 10 & 12) (Retired)',\n  '1.2.840.10008.1.2.4.56':'JPEG Full Progression, Non-Hierarchical (Process 11 & 13) (Retired)',\n  '1.2.840.10008.1.2.4.57':'JPEG Lossless, Non-Hierarchical (Process 14)',\n  '1.2.840.10008.1.2.4.58':'JPEG Lossless, Non-Hierarchical (Process 15) (Retired)',\n  '1.2.840.10008.1.2.4.59':'JPEG Extended, Hierarchical (Process 16 & 18) (Retired)',\n  '1.2.840.10008.1.2.4.60':'JPEG Extended, Hierarchical (Process 17 & 19) (Retired)',\n  '1.2.840.10008.1.2.4.61':'JPEG Spectral Selection, Hierarchical (Process 20 & 22) (Retired)',\n  '1.2.840.10008.1.2.4.62':'JPEG Spectral Selection, Hierarchical (Process 21 & 23) (Retired)',\n  '1.2.840.10008.1.2.4.63':'JPEG Full Progression, Hierarchical (Process 24 & 26) (Retired)',\n  '1.2.840.10008.1.2.4.64':'JPEG Full Progression, Hierarchical (Process 25 & 27) (Retired)',\n  '1.2.840.10008.1.2.4.65':'JPEG Lossless, Hierarchical (Process 28) (Retired)',\n  '1.2.840.10008.1.2.4.66':'JPEG Lossless, Hierarchical (Process 29) (Retired)',\n  '1.2.840.10008.1.2.4.70':'JPEG Lossless, Non-Hierarchical, First-Order Prediction (Process 14 [Selection Value 1]): Default Transfer Syntax for Lossless JPEG Image Compression',\n  '1.2.840.10008.1.2.4.80':'JPEG-LS Lossless Image Compression',\n  '1.2.840.10008.1.2.4.81':'JPEG-LS Lossy (Near-Lossless) Image Compression',\n  '1.2.840.10008.1.2.4.90':'JPEG 2000 Image Compression (Lossless Only)',\n  '1.2.840.10008.1.2.4.91':'JPEG 2000 Image Compression',\n  '1.2.840.10008.1.2.4.92':'JPEG 2000 Part 2 Multi-component Image Compression (Lossless Only)',\n  '1.2.840.10008.1.2.4.93':'JPEG 2000 Part 2 Multi-component Image Compression',\n  '1.2.840.10008.1.2.4.94':'JPIP Referenced',\n  '1.2.840.10008.1.2.4.95':'JPIP Referenced Deflate',\n  '1.2.840.10008.1.2.4.100':'MPEG2 Main Profile @ Main Level',\n  '1.2.840.10008.1.2.4.101':'MPEG2 Main Profile @ High Level',\n  '1.2.840.10008.1.2.4.102':'MPEG-4 AVC/H.264 High Profile / Level 4.1',\n  '1.2.840.10008.1.2.4.103':'MPEG-4 AVC/H.264 BD-compatible High Profile / Level 4.1',\n  '1.2.840.10008.1.2.4.104':'MPEG-4 AVC/H.264 High Profile / Level 4.2 For 2D Video',\n  '1.2.840.10008.1.2.4.105':'MPEG-4 AVC/H.264 High Profile / Level 4.2 For 3D Video',\n  '1.2.840.10008.1.2.4.106':'MPEG-4 AVC/H.264 Stereo High Profile / Level 4.2',\n  '1.2.840.10008.1.2.5':'RLE Lossless',\n  '1.2.840.10008.1.2.6.1':'RFC 2557 MIME encapsulation',\n  '1.2.840.10008.1.2.6.2':'XML Encoding',\n  '1.2.840.10008.1.3.10':'Media Storage Directory Storage',\n  '1.2.840.10008.1.4.1.1':'Talairach Brain Atlas Frame of Reference',\n  '1.2.840.10008.1.4.1.2':'SPM2 T1 Frame of Reference',\n  '1.2.840.10008.1.4.1.3':'SPM2 T2 Frame of Reference',\n  '1.2.840.10008.1.4.1.4':'SPM2 PD Frame of Reference',\n  '1.2.840.10008.1.4.1.5':'SPM2 EPI Frame of Reference',\n  '1.2.840.10008.1.4.1.6':'SPM2 FIL T1 Frame of Reference',\n  '1.2.840.10008.1.4.1.7':'SPM2 PET Frame of Reference',\n  '1.2.840.10008.1.4.1.8':'SPM2 TRANSM Frame of Reference',\n  '1.2.840.10008.1.4.1.9':'SPM2 SPECT Frame of Reference',\n  '1.2.840.10008.1.4.1.10':'SPM2 GRAY Frame of Reference',\n  '1.2.840.10008.1.4.1.11':'SPM2 WHITE Frame of Reference',\n  '1.2.840.10008.1.4.1.12':'SPM2 CSF Frame of Reference',\n  '1.2.840.10008.1.4.1.13':'SPM2 BRAINMASK Frame of Reference',\n  '1.2.840.10008.1.4.1.14':'SPM2 AVG305T1 Frame of Reference',\n  '1.2.840.10008.1.4.1.15':'SPM2 AVG152T1 Frame of Reference',\n  '1.2.840.10008.1.4.1.16':'SPM2 AVG152T2 Frame of Reference',\n  '1.2.840.10008.1.4.1.17':'SPM2 AVG152PD Frame of Reference',\n  '1.2.840.10008.1.4.1.18':'SPM2 SINGLESUBJT1 Frame of Reference',\n  '1.2.840.10008.1.4.2.1':'ICBM 452 T1 Frame of Reference',\n  '1.2.840.10008.1.4.2.2':'ICBM Single Subject MRI Frame of Reference',\n  '1.2.840.10008.1.5.1':'Hot Iron Color Palette SOP Instance',\n  '1.2.840.10008.1.5.2':'PET Color Palette SOP Instance',\n  '1.2.840.10008.1.5.3':'Hot Metal Blue Color Palette SOP Instance',\n  '1.2.840.10008.1.5.4':'PET 20 Step Color Palette SOP Instance',\n  '1.2.840.10008.1.9':'Basic Study Content Notification SOP Class (Retired)',\n  '1.2.840.10008.1.20.1':'Storage Commitment Push Model SOP Class',\n  '1.2.840.10008.1.20.1.1':'Storage Commitment Push Model SOP Instance',\n  '1.2.840.10008.1.20.2':'Storage Commitment Pull Model SOP Class (Retired)',\n  '1.2.840.10008.1.20.2.1':'Storage Commitment Pull Model SOP Instance (Retired)',\n  '1.2.840.10008.1.40':'Procedural Event Logging SOP Class',\n  '1.2.840.10008.1.40.1':'Procedural Event Logging SOP Instance',\n  '1.2.840.10008.1.42':'Substance Administration Logging SOP Class',\n  '1.2.840.10008.1.42.1':'Substance Administration Logging SOP Instance',\n  '1.2.840.10008.2.6.1':'DICOM UID Registry',\n  '1.2.840.10008.2.16.4':'DICOM Controlled Terminology',\n  '1.2.840.10008.3.1.1.1':'DICOM Application Context Name',\n  '1.2.840.10008.3.1.2.1.1':'Detached Patient Management SOP Class (Retired)',\n  '1.2.840.10008.3.1.2.1.4':'Detached Patient Management Meta SOP Class (Retired)',\n  '1.2.840.10008.3.1.2.2.1':'Detached Visit Management SOP Class (Retired)',\n  '1.2.840.10008.3.1.2.3.1':'Detached Study Management SOP Class (Retired)',\n  '1.2.840.10008.3.1.2.3.2':'Study Component Management SOP Class (Retired)',\n  '1.2.840.10008.3.1.2.3.3':'Modality Performed Procedure Step SOP Class',\n  '1.2.840.10008.3.1.2.3.4':'Modality Performed Procedure Step Retrieve SOP Class',\n  '1.2.840.10008.3.1.2.3.5':'Modality Performed Procedure Step Notification SOP Class',\n  '1.2.840.10008.3.1.2.5.1':'Detached Results Management SOP Class (Retired)',\n  '1.2.840.10008.3.1.2.5.4':'Detached Results Management Meta SOP Class (Retired)',\n  '1.2.840.10008.3.1.2.5.5':'Detached Study Management Meta SOP Class (Retired)',\n  '1.2.840.10008.3.1.2.6.1':'Detached Interpretation Management SOP Class (Retired)',\n  '1.2.840.10008.4.2':'Storage Service Class',\n  '1.2.840.10008.5.1.1.1':'Basic Film Session SOP Class',\n  '1.2.840.10008.5.1.1.2':'Basic Film Box SOP Class',\n  '1.2.840.10008.5.1.1.4':'Basic Grayscale Image Box SOP Class',\n  '1.2.840.10008.5.1.1.4.1':'Basic Color Image Box SOP Class',\n  '1.2.840.10008.5.1.1.4.2':'Referenced Image Box SOP Class (Retired)',\n  '1.2.840.10008.5.1.1.9':'Basic Grayscale Print Management Meta SOP Class',\n  '1.2.840.10008.5.1.1.9.1':'Referenced Grayscale Print Management Meta SOP Class (Retired)',\n  '1.2.840.10008.5.1.1.14':'Print Job SOP Class',\n  '1.2.840.10008.5.1.1.15':'Basic Annotation Box SOP Class',\n  '1.2.840.10008.5.1.1.16':'Printer SOP Class',\n  '1.2.840.10008.5.1.1.16.376':'Printer Configuration Retrieval SOP Class',\n  '1.2.840.10008.5.1.1.17':'Printer SOP Instance',\n  '1.2.840.10008.5.1.1.17.376':'Printer Configuration Retrieval SOP Instance',\n  '1.2.840.10008.5.1.1.18':'Basic Color Print Management Meta SOP Class',\n  '1.2.840.10008.5.1.1.18.1':'Referenced Color Print Management Meta SOP Class (Retired)',\n  '1.2.840.10008.5.1.1.22':'VOI LUT Box SOP Class',\n  '1.2.840.10008.5.1.1.23':'Presentation LUT SOP Class',\n  '1.2.840.10008.5.1.1.24':'Image Overlay Box SOP Class (Retired)',\n  '1.2.840.10008.5.1.1.24.1':'Basic Print Image Overlay Box SOP Class (Retired)',\n  '1.2.840.10008.5.1.1.25':'Print Queue SOP Instance (Retired)',\n  '1.2.840.10008.5.1.1.26':'Print Queue Management SOP Class (Retired)',\n  '1.2.840.10008.5.1.1.27':'Stored Print Storage SOP Class (Retired)',\n  '1.2.840.10008.5.1.1.29':'Hardcopy Grayscale Image Storage SOP Class (Retired)',\n  '1.2.840.10008.5.1.1.30':'Hardcopy Color Image Storage SOP Class (Retired)',\n  '1.2.840.10008.5.1.1.31':'Pull Print Request SOP Class (Retired)',\n  '1.2.840.10008.5.1.1.32':'Pull Stored Print Management Meta SOP Class (Retired)',\n  '1.2.840.10008.5.1.1.33':'Media Creation Management SOP Class UID',\n  '1.2.840.10008.5.1.1.40':'Display System SOP Class',\n  '1.2.840.10008.5.1.1.40.1':'Display System SOP Instance',\n  '1.2.840.10008.5.1.4.1.1.1':'Computed Radiography Image Storage',\n  '1.2.840.10008.5.1.4.1.1.1.1':'Digital X-Ray Image Storage - For Presentation',\n  '1.2.840.10008.5.1.4.1.1.1.1.1':'Digital X-Ray Image Storage - For Processing',\n  '1.2.840.10008.5.1.4.1.1.1.2':'Digital Mammography X-Ray Image Storage - For Presentation',\n  '1.2.840.10008.5.1.4.1.1.1.2.1':'Digital Mammography X-Ray Image Storage - For Processing',\n  '1.2.840.10008.5.1.4.1.1.1.3':'Digital Intra-Oral X-Ray Image Storage - For Presentation',\n  '1.2.840.10008.5.1.4.1.1.1.3.1':'Digital Intra-Oral X-Ray Image Storage - For Processing',\n  '1.2.840.10008.5.1.4.1.1.2':'CT Image Storage',\n  '1.2.840.10008.5.1.4.1.1.2.1':'Enhanced CT Image Storage',\n  '1.2.840.10008.5.1.4.1.1.2.2':'Legacy Converted Enhanced CT Image Storage',\n  '1.2.840.10008.5.1.4.1.1.3':'Ultrasound Multi-frame Image Storage (Retired)',\n  '1.2.840.10008.5.1.4.1.1.3.1':'Ultrasound Multi-frame Image Storage',\n  '1.2.840.10008.5.1.4.1.1.4':'MR Image Storage',\n  '1.2.840.10008.5.1.4.1.1.4.1':'Enhanced MR Image Storage',\n  '1.2.840.10008.5.1.4.1.1.4.2':'MR Spectroscopy Storage',\n  '1.2.840.10008.5.1.4.1.1.4.3':'Enhanced MR Color Image Storage',\n  '1.2.840.10008.5.1.4.1.1.4.4':'Legacy Converted Enhanced MR Image Storage',\n  '1.2.840.10008.5.1.4.1.1.5':'Nuclear Medicine Image Storage (Retired)',\n  '1.2.840.10008.5.1.4.1.1.6':'Ultrasound Image Storage (Retired)',\n  '1.2.840.10008.5.1.4.1.1.6.1':'Ultrasound Image Storage',\n  '1.2.840.10008.5.1.4.1.1.6.2':'Enhanced US Volume Storage',\n  '1.2.840.10008.5.1.4.1.1.7':'Secondary Capture Image Storage',\n  '1.2.840.10008.5.1.4.1.1.7.1':'Multi-frame Single Bit Secondary Capture Image Storage',\n  '1.2.840.10008.5.1.4.1.1.7.2':'Multi-frame Grayscale Byte Secondary Capture Image Storage',\n  '1.2.840.10008.5.1.4.1.1.7.3':'Multi-frame Grayscale Word Secondary Capture Image Storage',\n  '1.2.840.10008.5.1.4.1.1.7.4':'Multi-frame True Color Secondary Capture Image Storage',\n  '1.2.840.10008.5.1.4.1.1.8':'Standalone Overlay Storage (Retired)',\n  '1.2.840.10008.5.1.4.1.1.9':'Standalone Curve Storage (Retired)',\n  '1.2.840.10008.5.1.4.1.1.9.1':'Waveform Storage - Trial (Retired)',\n  '1.2.840.10008.5.1.4.1.1.9.1.1':'12-lead ECG Waveform Storage',\n  '1.2.840.10008.5.1.4.1.1.9.1.2':'General ECG Waveform Storage',\n  '1.2.840.10008.5.1.4.1.1.9.1.3':'Ambulatory ECG Waveform Storage',\n  '1.2.840.10008.5.1.4.1.1.9.2.1':'Hemodynamic Waveform Storage',\n  '1.2.840.10008.5.1.4.1.1.9.3.1':'Cardiac Electrophysiology Waveform Storage',\n  '1.2.840.10008.5.1.4.1.1.9.4.1':'Basic Voice Audio Waveform Storage',\n  '1.2.840.10008.5.1.4.1.1.9.4.2':'General Audio Waveform Storage',\n  '1.2.840.10008.5.1.4.1.1.9.5.1':'Arterial Pulse Waveform Storage',\n  '1.2.840.10008.5.1.4.1.1.9.6.1':'Respiratory Waveform Storage',\n  '1.2.840.10008.5.1.4.1.1.10':'Standalone Modality LUT Storage (Retired)',\n  '1.2.840.10008.5.1.4.1.1.11':'Standalone VOI LUT Storage (Retired)',\n  '1.2.840.10008.5.1.4.1.1.11.1':'Grayscale Softcopy Presentation State Storage SOP Class',\n  '1.2.840.10008.5.1.4.1.1.11.2':'Color Softcopy Presentation State Storage SOP Class',\n  '1.2.840.10008.5.1.4.1.1.11.3':'Pseudo-Color Softcopy Presentation State Storage SOP Class',\n  '1.2.840.10008.5.1.4.1.1.11.4':'Blending Softcopy Presentation State Storage SOP Class',\n  '1.2.840.10008.5.1.4.1.1.11.5':'XA/XRF Grayscale Softcopy Presentation State Storage',\n  '1.2.840.10008.5.1.4.1.1.12.1':'X-Ray Angiographic Image Storage',\n  '1.2.840.10008.5.1.4.1.1.12.1.1':'Enhanced XA Image Storage',\n  '1.2.840.10008.5.1.4.1.1.12.2':'X-Ray Radiofluoroscopic Image Storage',\n  '1.2.840.10008.5.1.4.1.1.12.2.1':'Enhanced XRF Image Storage',\n  '1.2.840.10008.5.1.4.1.1.12.3':'X-Ray Angiographic Bi-Plane Image Storage (Retired)',\n  '1.2.840.10008.5.1.4.1.1.13.1.1':'X-Ray 3D Angiographic Image Storage',\n  '1.2.840.10008.5.1.4.1.1.13.1.2':'X-Ray 3D Craniofacial Image Storage',\n  '1.2.840.10008.5.1.4.1.1.13.1.3':'Breast Tomosynthesis Image Storage',\n  '1.2.840.10008.5.1.4.1.1.13.1.4':'Breast Projection X-Ray Image Storage - For Presentation',\n  '1.2.840.10008.5.1.4.1.1.13.1.5':'Breast Projection X-Ray Image Storage - For Processing',\n  '1.2.840.10008.5.1.4.1.1.14.1':'Intravascular Optical Coherence Tomography Image Storage - For Presentation',\n  '1.2.840.10008.5.1.4.1.1.14.2':'Intravascular Optical Coherence Tomography Image Storage - For Processing',\n  '1.2.840.10008.5.1.4.1.1.20':'Nuclear Medicine Image Storage',\n  '1.2.840.10008.5.1.4.1.1.30':'Parametric Map Storage',\n  '1.2.840.10008.5.1.4.1.1.66':'Raw Data Storage',\n  '1.2.840.10008.5.1.4.1.1.66.1':'Spatial Registration Storage',\n  '1.2.840.10008.5.1.4.1.1.66.2':'Spatial Fiducials Storage',\n  '1.2.840.10008.5.1.4.1.1.66.3':'Deformable Spatial Registration Storage',\n  '1.2.840.10008.5.1.4.1.1.66.4':'Segmentation Storage',\n  '1.2.840.10008.5.1.4.1.1.66.5':'Surface Segmentation Storage',\n  '1.2.840.10008.5.1.4.1.1.67':'Real World Value Mapping Storage',\n  '1.2.840.10008.5.1.4.1.1.68.1':'Surface Scan Mesh Storage',\n  '1.2.840.10008.5.1.4.1.1.68.2':'Surface Scan Point Cloud Storage',\n  '1.2.840.10008.5.1.4.1.1.77.1':'VL Image Storage - Trial (Retired)',\n  '1.2.840.10008.5.1.4.1.1.77.2':'VL Multi-frame Image Storage - Trial (Retired)',\n  '1.2.840.10008.5.1.4.1.1.77.1.1':'VL Endoscopic Image Storage',\n  '1.2.840.10008.5.1.4.1.1.77.1.1.1':'Video Endoscopic Image Storage',\n  '1.2.840.10008.5.1.4.1.1.77.1.2':'VL Microscopic Image Storage',\n  '1.2.840.10008.5.1.4.1.1.77.1.2.1':'Video Microscopic Image Storage',\n  '1.2.840.10008.5.1.4.1.1.77.1.3':'VL Slide-Coordinates Microscopic Image Storage',\n  '1.2.840.10008.5.1.4.1.1.77.1.4':'VL Photographic Image Storage',\n  '1.2.840.10008.5.1.4.1.1.77.1.4.1':'Video Photographic Image Storage',\n  '1.2.840.10008.5.1.4.1.1.77.1.5.1':'Ophthalmic Photography 8 Bit Image Storage',\n  '1.2.840.10008.5.1.4.1.1.77.1.5.2':'Ophthalmic Photography 16 Bit Image Storage',\n  '1.2.840.10008.5.1.4.1.1.77.1.5.3':'Stereometric Relationship Storage',\n  '1.2.840.10008.5.1.4.1.1.77.1.5.4':'Ophthalmic Tomography Image Storage',\n  '1.2.840.10008.5.1.4.1.1.77.1.5.5':'Wide Field Ophthalmic Photography Stereographic Projection Image Storage',\n  '1.2.840.10008.5.1.4.1.1.77.1.5.6':'Wide Field Ophthalmic Photography 3D Coordinates Image Storage',\n  '1.2.840.10008.5.1.4.1.1.77.1.6':'VL Whole Slide Microscopy Image Storage',\n  '1.2.840.10008.5.1.4.1.1.78.1':'Lensometry Measurements Storage',\n  '1.2.840.10008.5.1.4.1.1.78.2':'Autorefraction Measurements Storage',\n  '1.2.840.10008.5.1.4.1.1.78.3':'Keratometry Measurements Storage',\n  '1.2.840.10008.5.1.4.1.1.78.4':'Subjective Refraction Measurements Storage',\n  '1.2.840.10008.5.1.4.1.1.78.5':'Visual Acuity Measurements Storage',\n  '1.2.840.10008.5.1.4.1.1.78.6':'Spectacle Prescription Report Storage',\n  '1.2.840.10008.5.1.4.1.1.78.7':'Ophthalmic Axial Measurements Storage',\n  '1.2.840.10008.5.1.4.1.1.78.8':'Intraocular Lens Calculations Storage',\n  '1.2.840.10008.5.1.4.1.1.79.1':'Macular Grid Thickness and Volume Report Storage',\n  '1.2.840.10008.5.1.4.1.1.80.1':'Ophthalmic Visual Field Static Perimetry Measurements Storage',\n  '1.2.840.10008.5.1.4.1.1.81.1':'Ophthalmic Thickness Map Storage',\n  '1.2.840.10008.5.1.4.1.1.82.1':'Corneal Topography Map Storage',\n  '1.2.840.10008.5.1.4.1.1.88.1':'Text SR Storage - Trial (Retired)',\n  '1.2.840.10008.5.1.4.1.1.88.2':'Audio SR Storage - Trial (Retired)',\n  '1.2.840.10008.5.1.4.1.1.88.3':'Detail SR Storage - Trial (Retired)',\n  '1.2.840.10008.5.1.4.1.1.88.4':'Comprehensive SR Storage - Trial (Retired)',\n  '1.2.840.10008.5.1.4.1.1.88.11':'Basic Text SR Storage',\n  '1.2.840.10008.5.1.4.1.1.88.22':'Enhanced SR Storage',\n  '1.2.840.10008.5.1.4.1.1.88.33':'Comprehensive SR Storage',\n  '1.2.840.10008.5.1.4.1.1.88.34':'Comprehensive 3D SR Storage',\n  '1.2.840.10008.5.1.4.1.1.88.35':'Extensible SR Storage',\n  '1.2.840.10008.5.1.4.1.1.88.40':'Procedure Log Storage',\n  '1.2.840.10008.5.1.4.1.1.88.50':'Mammography CAD SR Storage',\n  '1.2.840.10008.5.1.4.1.1.88.59':'Key Object Selection Document Storage',\n  '1.2.840.10008.5.1.4.1.1.88.65':'Chest CAD SR Storage',\n  '1.2.840.10008.5.1.4.1.1.88.67':'X-Ray Radiation Dose SR Storage',\n  '1.2.840.10008.5.1.4.1.1.88.68':'Radiopharmaceutical Radiation Dose SR Storage',\n  '1.2.840.10008.5.1.4.1.1.88.69':'Colon CAD SR Storage',\n  '1.2.840.10008.5.1.4.1.1.88.70':'Implantation Plan SR Storage',\n  '1.2.840.10008.5.1.4.1.1.104.1':'Encapsulated PDF Storage',\n  '1.2.840.10008.5.1.4.1.1.104.2':'Encapsulated CDA Storage',\n  '1.2.840.10008.5.1.4.1.1.128':'Positron Emission Tomography Image Storage',\n  '1.2.840.10008.5.1.4.1.1.128.1':'Legacy Converted Enhanced PET Image Storage',\n  '1.2.840.10008.5.1.4.1.1.129':'Standalone PET Curve Storage (Retired)',\n  '1.2.840.10008.5.1.4.1.1.130':'Enhanced PET Image Storage',\n  '1.2.840.10008.5.1.4.1.1.131':'Basic Structured Display Storage',\n  '1.2.840.10008.5.1.4.1.1.481.1':'RT Image Storage',\n  '1.2.840.10008.5.1.4.1.1.481.2':'RT Dose Storage',\n  '1.2.840.10008.5.1.4.1.1.481.3':'RT Structure Set Storage',\n  '1.2.840.10008.5.1.4.1.1.481.4':'RT Beams Treatment Record Storage',\n  '1.2.840.10008.5.1.4.1.1.481.5':'RT Plan Storage',\n  '1.2.840.10008.5.1.4.1.1.481.6':'RT Brachy Treatment Record Storage',\n  '1.2.840.10008.5.1.4.1.1.481.7':'RT Treatment Summary Record Storage',\n  '1.2.840.10008.5.1.4.1.1.481.8':'RT Ion Plan Storage',\n  '1.2.840.10008.5.1.4.1.1.481.9':'RT Ion Beams Treatment Record Storage',\n  '1.2.840.10008.5.1.4.1.1.501.1':'DICOS CT Image Storage',\n  '1.2.840.10008.5.1.4.1.1.501.2.1':'DICOS Digital X-Ray Image Storage - For Presentation',\n  '1.2.840.10008.5.1.4.1.1.501.2.2':'DICOS Digital X-Ray Image Storage - For Processing',\n  '1.2.840.10008.5.1.4.1.1.501.3':'DICOS Threat Detection Report Storage',\n  '1.2.840.10008.5.1.4.1.1.501.4':'DICOS 2D AIT Storage',\n  '1.2.840.10008.5.1.4.1.1.501.5':'DICOS 3D AIT Storage',\n  '1.2.840.10008.5.1.4.1.1.501.6':'DICOS Quadrupole Resonance (QR) Storage',\n  '1.2.840.10008.5.1.4.1.1.601.1':'Eddy Current Image Storage',\n  '1.2.840.10008.5.1.4.1.1.601.2':'Eddy Current Multi-frame Image Storage',\n  '1.2.840.10008.5.1.4.1.2.1.1':'Patient Root Query/Retrieve Information Model - FIND',\n  '1.2.840.10008.5.1.4.1.2.1.2':'Patient Root Query/Retrieve Information Model - MOVE',\n  '1.2.840.10008.5.1.4.1.2.1.3':'Patient Root Query/Retrieve Information Model - GET',\n  '1.2.840.10008.5.1.4.1.2.2.1':'Study Root Query/Retrieve Information Model - FIND',\n  '1.2.840.10008.5.1.4.1.2.2.2':'Study Root Query/Retrieve Information Model - MOVE',\n  '1.2.840.10008.5.1.4.1.2.2.3':'Study Root Query/Retrieve Information Model - GET',\n  '1.2.840.10008.5.1.4.1.2.3.1':'Patient/Study Only Query/Retrieve Information Model - FIND (Retired)',\n  '1.2.840.10008.5.1.4.1.2.3.2':'Patient/Study Only Query/Retrieve Information Model - MOVE (Retired)',\n  '1.2.840.10008.5.1.4.1.2.3.3':'Patient/Study Only Query/Retrieve Information Model - GET (Retired)',\n  '1.2.840.10008.5.1.4.1.2.4.2':'Composite Instance Root Retrieve - MOVE',\n  '1.2.840.10008.5.1.4.1.2.4.3':'Composite Instance Root Retrieve - GET',\n  '1.2.840.10008.5.1.4.1.2.5.3':'Composite Instance Retrieve Without Bulk Data - GET',\n  '1.2.840.10008.5.1.4.31':'Modality Worklist Information Model - FIND',\n  '1.2.840.10008.5.1.4.32':'General Purpose Worklist Management Meta SOP Class (Retired)',\n  '1.2.840.10008.5.1.4.32.1':'General Purpose Worklist Information Model - FIND (Retired)',\n  '1.2.840.10008.5.1.4.32.2':'General Purpose Scheduled Procedure Step SOP Class (Retired)',\n  '1.2.840.10008.5.1.4.32.3':'General Purpose Performed Procedure Step SOP Class (Retired)',\n  '1.2.840.10008.5.1.4.33':'Instance Availability Notification SOP Class',\n  '1.2.840.10008.5.1.4.34.1':'RT Beams Delivery Instruction Storage - Trial (Retired)',\n  '1.2.840.10008.5.1.4.34.2':'RT Conventional Machine Verification - Trial (Retired)',\n  '1.2.840.10008.5.1.4.34.3':'RT Ion Machine Verification - Trial (Retired)',\n  '1.2.840.10008.5.1.4.34.4':'Unified Worklist and Procedure Step Service Class - Trial (Retired)',\n  '1.2.840.10008.5.1.4.34.4.1':'Unified Procedure Step - Push SOP Class - Trial (Retired)',\n  '1.2.840.10008.5.1.4.34.4.2':'Unified Procedure Step - Watch SOP Class - Trial (Retired)',\n  '1.2.840.10008.5.1.4.34.4.3':'Unified Procedure Step - Pull SOP Class - Trial (Retired)',\n  '1.2.840.10008.5.1.4.34.4.4':'Unified Procedure Step - Event SOP Class - Trial (Retired)',\n  '1.2.840.10008.5.1.4.34.5':'UPS Global Subscription SOP Instance',\n  '1.2.840.10008.5.1.4.34.5.1':'UPS Filtered Global Subscription SOP Instance',\n  '1.2.840.10008.5.1.4.34.6':'Unified Worklist and Procedure Step Service Class',\n  '1.2.840.10008.5.1.4.34.6.1':'Unified Procedure Step - Push SOP Class',\n  '1.2.840.10008.5.1.4.34.6.2':'Unified Procedure Step - Watch SOP Class',\n  '1.2.840.10008.5.1.4.34.6.3':'Unified Procedure Step - Pull SOP Class',\n  '1.2.840.10008.5.1.4.34.6.4':'Unified Procedure Step - Event SOP Class',\n  '1.2.840.10008.5.1.4.34.7':'RT Beams Delivery Instruction Storage',\n  '1.2.840.10008.5.1.4.34.8':'RT Conventional Machine Verification',\n  '1.2.840.10008.5.1.4.34.9':'RT Ion Machine Verification',\n  '1.2.840.10008.5.1.4.37.1':'General Relevant Patient Information Query',\n  '1.2.840.10008.5.1.4.37.2':'Breast Imaging Relevant Patient Information Query',\n  '1.2.840.10008.5.1.4.37.3':'Cardiac Relevant Patient Information Query',\n  '1.2.840.10008.5.1.4.38.1':'Hanging Protocol Storage',\n  '1.2.840.10008.5.1.4.38.2':'Hanging Protocol Information Model - FIND',\n  '1.2.840.10008.5.1.4.38.3':'Hanging Protocol Information Model - MOVE',\n  '1.2.840.10008.5.1.4.38.4':'Hanging Protocol Information Model - GET',\n  '1.2.840.10008.5.1.4.39.1':'Color Palette Storage',\n  '1.2.840.10008.5.1.4.39.2':'Color Palette Information Model - FIND',\n  '1.2.840.10008.5.1.4.39.3':'Color Palette Information Model - MOVE',\n  '1.2.840.10008.5.1.4.39.4':'Color Palette Information Model - GET',\n  '1.2.840.10008.5.1.4.41':'Product Characteristics Query SOP Class',\n  '1.2.840.10008.5.1.4.42':'Substance Approval Query SOP Class',\n  '1.2.840.10008.5.1.4.43.1':'Generic Implant Template Storage',\n  '1.2.840.10008.5.1.4.43.2':'Generic Implant Template Information Model - FIND',\n  '1.2.840.10008.5.1.4.43.3':'Generic Implant Template Information Model - MOVE',\n  '1.2.840.10008.5.1.4.43.4':'Generic Implant Template Information Model - GET',\n  '1.2.840.10008.5.1.4.44.1':'Implant Assembly Template Storage',\n  '1.2.840.10008.5.1.4.44.2':'Implant Assembly Template Information Model - FIND',\n  '1.2.840.10008.5.1.4.44.3':'Implant Assembly Template Information Model - MOVE',\n  '1.2.840.10008.5.1.4.44.4':'Implant Assembly Template Information Model - GET',\n  '1.2.840.10008.5.1.4.45.1':'Implant Template Group Storage',\n  '1.2.840.10008.5.1.4.45.2':'Implant Template Group Information Model - FIND',\n  '1.2.840.10008.5.1.4.45.3':'Implant Template Group Information Model - MOVE',\n  '1.2.840.10008.5.1.4.45.4':'Implant Template Group Information Model - GET',\n  '1.2.840.10008.7.1.1':'Native DICOM Model',\n  '1.2.840.10008.7.1.2':'Abstract Multi-Dimensional Image Model',\n  '1.2.840.10008.8.1.1':'DICOM Content Mapping Resource',\n  '1.2.840.10008.15.0.3.1':'dicomDeviceName',\n  '1.2.840.10008.15.0.3.2':'dicomDescription',\n  '1.2.840.10008.15.0.3.3':'dicomManufacturer',\n  '1.2.840.10008.15.0.3.4':'dicomManufacturerModelName',\n  '1.2.840.10008.15.0.3.5':'dicomSoftwareVersion',\n  '1.2.840.10008.15.0.3.6':'dicomVendorData',\n  '1.2.840.10008.15.0.3.7':'dicomAETitle',\n  '1.2.840.10008.15.0.3.8':'dicomNetworkConnectionReference',\n  '1.2.840.10008.15.0.3.9':'dicomApplicationCluster',\n  '1.2.840.10008.15.0.3.10':'dicomAssociationInitiator',\n  '1.2.840.10008.15.0.3.11':'dicomAssociationAcceptor',\n  '1.2.840.10008.15.0.3.12':'dicomHostname',\n  '1.2.840.10008.15.0.3.13':'dicomPort',\n  '1.2.840.10008.15.0.3.14':'dicomSOPClass',\n  '1.2.840.10008.15.0.3.15':'dicomTransferRole',\n  '1.2.840.10008.15.0.3.16':'dicomTransferSyntax',\n  '1.2.840.10008.15.0.3.17':'dicomPrimaryDeviceType',\n  '1.2.840.10008.15.0.3.18':'dicomRelatedDeviceReference',\n  '1.2.840.10008.15.0.3.19':'dicomPreferredCalledAETitle',\n  '1.2.840.10008.15.0.3.20':'dicomTLSCyphersuite',\n  '1.2.840.10008.15.0.3.21':'dicomAuthorizedNodeCertificateReference',\n  '1.2.840.10008.15.0.3.22':'dicomThisNodeCertificateReference',\n  '1.2.840.10008.15.0.3.23':'dicomInstalled',\n  '1.2.840.10008.15.0.3.24':'dicomStationName',\n  '1.2.840.10008.15.0.3.25':'dicomDeviceSerialNumber',\n  '1.2.840.10008.15.0.3.26':'dicomInstitutionName',\n  '1.2.840.10008.15.0.3.27':'dicomInstitutionAddress',\n  '1.2.840.10008.15.0.3.28':'dicomInstitutionDepartmentName',\n  '1.2.840.10008.15.0.3.29':'dicomIssuerOfPatientID',\n  '1.2.840.10008.15.0.3.30':'dicomPreferredCallingAETitle',\n  '1.2.840.10008.15.0.3.31':'dicomSupportedCharacterSet',\n  '1.2.840.10008.15.0.4.1':'dicomConfigurationRoot',\n  '1.2.840.10008.15.0.4.2':'dicomDevicesRoot',\n  '1.2.840.10008.15.0.4.3':'dicomUniqueAETitlesRegistryRoot',\n  '1.2.840.10008.15.0.4.4':'dicomDevice',\n  '1.2.840.10008.15.0.4.5':'dicomNetworkAE',\n  '1.2.840.10008.15.0.4.6':'dicomNetworkConnection',\n  '1.2.840.10008.15.0.4.7':'dicomUniqueAETitle',\n  '1.2.840.10008.15.0.4.8':'dicomTransferCapability',\n  '1.2.840.10008.15.1.1':'Universal Coordinated Time',\n};\n","\r\nexport const SETTINGS_SAVEAS = 'saveAs'\r\nexport const SETTINGS_DCMHEADER = 'exportAs'\r\nexport const SETTINGS_OVERLAY = 'overlay'\r\nexport const SETTINGS_MEASUREMENT = 'measurement'","import React, { PureComponent } from 'react'\r\nimport Button from '@material-ui/core/Button'\r\nimport Dialog from '@material-ui/core/Dialog'\r\nimport DialogActions from '@material-ui/core/DialogActions'\r\nimport DialogContent from '@material-ui/core/DialogContent'\r\nimport DialogTitle from '@material-ui/core/DialogTitle'\r\nimport LinearProgress from '@material-ui/core/LinearProgress'\r\n\r\nclass OpenUrlDlg extends PureComponent {\r\n\r\n  hide = () => {\r\n    this.props.onClose()\r\n  }\r\n\r\n  cancel = () => {\r\n    window.stop()\r\n    this.hide()\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <Dialog\r\n            open={true}\r\n            onClose={this.hide}\r\n            aria-labelledby=\"alert-dialog-title\"\r\n        >\r\n            <DialogTitle id=\"alert-dialog-title\">{\"Downloading file ...\"}</DialogTitle>\r\n            <DialogContent>\r\n              <LinearProgress variant=\"determinate\" value={this.props.progress} color='secondary' />\r\n            </DialogContent>\r\n            <DialogActions>\r\n                <Button onClick={this.cancel}>\r\n                    Cancel\r\n                </Button>\r\n            </DialogActions>\r\n        </Dialog>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default OpenUrlDlg\r\n","import React, { PureComponent } from 'react'\r\nimport Icon from '@mdi/react'\r\n//import { Button } from 'react-md'\r\nimport IconButton from '@material-ui/core/IconButton'\r\n\r\nimport { \r\n    mdiPlay,\r\n    mdiPause,\r\n    mdiSkipBackward,\r\n    mdiSkipForward,\r\n    mdiSkipNext,\r\n    mdiSkipPrevious,\r\n  } from '@mdi/js'\r\n\r\nconst iconColor = '#FFFFFF'\r\n\r\nclass CinePlayer extends PureComponent {\r\n    firstframe = () => {\r\n        this.props.runCinePlayer('firstframe') \r\n    }\r\n\r\n    previousframe = () => {\r\n        this.props.runCinePlayer('previousframe') \r\n    }\r\n\r\n    play = () => {\r\n        this.props.runCinePlayer('play') \r\n    }\r\n\r\n    pause = () => {\r\n        this.props.runCinePlayer('pause') \r\n    }\r\n\r\n    nextframe = () => {\r\n        this.props.runCinePlayer('nextframe') \r\n    }\r\n\r\n    lastframe = () => {\r\n        this.props.runCinePlayer('lastframe') \r\n    }\r\n\r\n    render() {\r\n        let play = null\r\n        if (!this.props.inPlay) {\r\n            play = <IconButton onClick={this.play}>\r\n                        <Icon path={mdiPlay} size={'1.5rem'} color={iconColor} />\r\n                   </IconButton>          \r\n        } else {\r\n            play = <IconButton onClick={this.pause}>\r\n                        <Icon path={mdiPause} size={'1.5rem'} color={iconColor} />\r\n                   </IconButton>  \r\n        }\r\n        return (\r\n            <div style={{ width:240, margin:'0 auto' }}>\r\n                <IconButton onClick={this.firstframe}>\r\n                    <Icon path={mdiSkipBackward} size={'1.5rem'} color={iconColor} />\r\n                </IconButton>\r\n                <IconButton onClick={this.previousframe}>\r\n                    <Icon path={mdiSkipPrevious} size={'1.5rem'} color={iconColor} />\r\n                </IconButton>\r\n                {play}\r\n                <IconButton onClick={this.nextframe}>\r\n                    <Icon path={mdiSkipNext} size={'1.5rem'} color={iconColor} />\r\n                </IconButton>\r\n                <IconButton onClick={this.lastframe}>\r\n                    <Icon path={mdiSkipForward} size={'1.5rem'} color={iconColor} />\r\n                </IconButton>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default CinePlayer\r\n","import React, { PureComponent } from 'react'\r\nimport Draggable from 'react-draggable'\r\n//import Button from '@material-ui/core/Button'\r\nimport IconButton from '@material-ui/core/IconButton'\r\n//import Icon from '@material-ui/core/Icon'\r\nimport Slider from '@material-ui/core/Slider'\r\nimport HighlightOffIcon from '@material-ui/icons/HighlightOff'\r\n\r\nimport * as cornerstone from 'cornerstone-core'\r\nimport { import as csTools } from 'cornerstone-tools'\r\n\r\nconst getRGBPixels = csTools('util/getRGBPixels')\r\n\r\nconst HIST_WIDTH = 256\r\nconst HIST_HEIGHT = 128\r\nconst N_BINS = 256\r\n\r\nconst style = {\r\n  width: '273px', \r\n  padding: '8px 8px 8px 8px', \r\n  backgroundColor: '#444444',\r\n}\r\n\r\nconst styleSlider = {\r\n  width: '255px',\r\n  marginTop: '-9px',\r\n}\r\n\r\nconst styleCanvasGradient = {\r\n  marginTop: '-9px',\r\n}\r\n\r\nconst styleTable = {\r\n  borderCollapse: 'collapse',\r\n  fontFamily: 'Courier, monospace',\r\n  fontSize: '80%',\r\n  width: '100%',\r\n}\r\n\r\nconst styleTableTd = {\r\n  tableLayout: 'fixed',\r\n  width: '25%',\r\n}\r\n\r\nclass Histogram extends PureComponent {\r\n    constructor(props) {\r\n      super(props)\r\n      this.canvasHistogram = React.createRef()\r\n      this.canvasGradient = React.createRef()\r\n      this.pixelData = null\r\n\r\n    }\r\n\r\n    state = {\r\n      activeDrags: 0,\r\n      deltaPosition: {\r\n        x: 0, y: 0\r\n      },\r\n      controlledPosition: {\r\n        x: -400, y: 200\r\n      },\r\n      value: 128,\r\n      histCount: 0,\r\n      valueScale: 0,\r\n      minHist: 0,\r\n      maxHist: 0,\r\n      mean: 0,\r\n      stdDev: 0,\r\n    }\r\n\r\n    componentDidMount() {\r\n      this.pixelData = this.props.image.getPixelData()\r\n      this.updateCanvas()  \r\n    }\r\n    \r\n    componentDidUpdate() {\r\n      //this.updateCanvas()\r\n    }\r\n\r\n    getMousePos(canvas, evt) {\r\n      const rect = canvas.getBoundingClientRect()\r\n      return {\r\n        x: evt.clientX - rect.left,\r\n        y: evt.clientY - rect.top\r\n      }\r\n    }\r\n\r\n    getRGBPixelsImage(x, y, width, height) {\r\n      const image = this.props.image\r\n      const storedPixelData = []\r\n      x = Math.round(x)\r\n      y = Math.round(y)   \r\n      let index = 0\r\n      let spIndex, row, column\r\n    \r\n      for (row = 0; row < height; row++) {\r\n        for (column = 0; column < width; column++) {\r\n          spIndex = ((row + y) * image.rows + (column + x)) * 4\r\n          const red = this.pixelData[spIndex]\r\n          const green = this.pixelData[spIndex + 1]\r\n          const blue = this.pixelData[spIndex + 2]\r\n          const alpha = this.pixelData[spIndex + 3]\r\n  \r\n          storedPixelData[index++] = red\r\n          storedPixelData[index++] = green\r\n          storedPixelData[index++] = blue\r\n          storedPixelData[index++] = alpha\r\n        }\r\n      }\r\n    \r\n      return storedPixelData\r\n    }\r\n\r\n    getPixel(x, y) {\r\n      const image = this.props.image\r\n      const element = this.props.element\r\n      const isDicom = this.props.isDicom\r\n      let sp = []\r\n      if (isDicom) {\r\n        if (image.color) {\r\n          sp = getRGBPixels(element, x, y, 1, 1)\r\n        } else {\r\n          sp = cornerstone.getStoredPixels(element, x, y, 1, 1)\r\n        }\r\n      } else {\r\n        sp = this.getRGBPixelsImage(x, y, 1, 1)\r\n      }\r\n      return sp[0]\r\n    }\r\n\r\n    updateCanvas() {\r\n      const image = this.props.image\r\n      //const element = this.props.element\r\n      const maxPixelValue = image.maxPixelValue\r\n      const minPixelValue = image.minPixelValue\r\n      //const k = Math.pow(2, this.props.bitsStored)\r\n      const minHist = minPixelValue+image.intercept\r\n      const maxHist = maxPixelValue+image.intercept\r\n      const lenHist = maxHist-minHist+1\r\n      const binSize = lenHist / N_BINS\r\n      let zero256 = Math.floor(Math.abs(minHist) / binSize)\r\n      let stepWW = Math.round(image.windowWidth / binSize / 2)\r\n      let stepWC = Math.round(image.windowCenter / binSize)\r\n\r\n      this.setState({minHist: minHist})\r\n      this.setState({maxHist: maxHist})\r\n      this.binSize = binSize\r\n\r\n      //console.log('bitsStored: ', k)\r\n      console.log('minHist: ', minHist)\r\n      console.log('maxHist: ', maxHist)\r\n      console.log('lenHist: ', lenHist)\r\n      console.log('binSize: ', binSize)\r\n      console.log('zeroHist: ', zero256)\r\n      console.log('stepWW: ', stepWW)\r\n      console.log('stepWC: ', stepWC)\r\n      console.log('zero256-stepWW: ', zero256-stepWW)\r\n      console.log('zero256+stepWW: ', zero256+stepWW)   \r\n      console.log('image.color: ', image.color)  \r\n      console.log('isDicom: ', this.props.isDicom)  \r\n      console.log('pixelData: ', this.pixelData)\r\n      console.log('image.columns: ', image.columns)\r\n      console.log('image.rows: ', image.rows)\r\n\r\n      let m = 0 // the mean\r\n\r\n      // build histogram\r\n      let hist = Array(lenHist).fill(0) \r\n\r\n      for (let y = 0; y < image.columns; y++) {\r\n        for (let x = 0; x < image.rows; x++) {\r\n          let sp = this.getPixel(x, y)\r\n          let mo = sp * image.slope + image.intercept\r\n          hist[mo-minHist] += 1\r\n          m += mo\r\n        } \r\n      }  \r\n\r\n      m = m / (image.columns * image.rows)\r\n      this.setState({mean: m})  \r\n\r\n      console.log('hist: ', hist)\r\n\r\n      // calculate standard deviation\r\n      let s = 0\r\n      for (let y = 0; y < image.columns; y++)\r\n        for (let x = 0; x < image.rows; x++) {\r\n          let sp = this.getPixel(x, y)\r\n          let mo = sp * image.slope + image.intercept\r\n          s += Math.pow(mo-m, 2)\r\n        }  \r\n      s = Math.sqrt(s / (image.columns * image.rows))\r\n      this.setState({stdDev: s})\r\n\r\n      // binning the histogram \r\n      let hist256 = Array(N_BINS).fill(0) \r\n      let step = 0\r\n      let max = 0\r\n      for (let i=0; i < N_BINS; i++) {\r\n        for (let j=step; j < Math.round(step+binSize); j++) {\r\n          if (j >= lenHist) break\r\n          hist256[i] += hist[j]\r\n        }\r\n        if (max < hist256[i]) { max = hist256[i] }\r\n        step = Math.round(step+binSize)\r\n      }\r\n      this.hist256 = hist256\r\n\r\n      console.log('hist256: ', hist256)\r\n      console.log('max: ', max)\r\n      \r\n      const canvasH = this.canvasHistogram.current\r\n      const ctxH = this.canvasHistogram.current.getContext(\"2d\")\r\n      ctxH.translate(0, canvasH.height)\r\n      ctxH.scale(1, -1)\r\n\r\n      canvasH.addEventListener('pointermove', (evt) => {\r\n        const mousePos = this.getMousePos(canvasH, evt)\r\n        this.setState({histCount: hist256[mousePos.x]})\r\n        let p = Math.round(mousePos.x * this.binSize)\r\n        this.setState({valueScale: p+minHist})\r\n      }, true)\r\n\r\n      console.log('value: ', (m-minHist)/binSize)\r\n      let value = Math.round((m-minHist)/binSize)\r\n      this.setState({value: value})\r\n      this.setState({valueScale: m})\r\n      this.setState({histCount: hist256[value]})\r\n\r\n      // draw WindowWidth area\r\n      ctxH.beginPath()\r\n      ctxH.fillStyle = 'rgba(210, 210, 210, 0.5)'\r\n      ctxH.fillRect(zero256-stepWW+stepWC, 0, stepWW*2, HIST_HEIGHT)\r\n\r\n      // draw histogram\r\n      ctxH.beginPath()\r\n      ctxH.strokeStyle = 'rgba(0, 0, 0, 1.0)'\r\n      for (let i = 0; i < N_BINS; i++) {\r\n        let h = Math.round((hist256[i]/max)*HIST_HEIGHT)\r\n        ctxH.moveTo(i, 0)\r\n        ctxH.lineTo(i, h)\r\n        ctxH.stroke()\r\n      }\r\n      \r\n      // draw WindowCenter cursor\r\n      ctxH.beginPath()\r\n      ctxH.strokeStyle = 'rgba(140, 140, 140, 0.5)'\r\n      ctxH.moveTo(zero256+stepWC, 0)\r\n      ctxH.lineTo(zero256+stepWC, HIST_HEIGHT)\r\n      ctxH.lineWidth = 1\r\n      ctxH.stroke()\r\n          \r\n      let lowX = zero256-stepWW+stepWC\r\n      let highX = zero256+stepWW+stepWC\r\n\r\n      // draw gradient scale\r\n      const canvasG = this.canvasGradient.current\r\n      const ctxG = canvasG.getContext(\"2d\")\r\n\r\n      ctxG.fillStyle = \"#000000\"\r\n      ctxG.fillRect(0, 0, lowX, 10)\r\n\r\n      let grd = ctxG.createLinearGradient(lowX, 0, highX+(lowX < 0 ? lowX : 0), 0)\r\n      grd.addColorStop(0, \"black\")\r\n      grd.addColorStop(1, \"white\")\r\n      ctxG.fillStyle = grd\r\n      ctxG.fillRect(lowX, 0, highX, 10)\r\n    }\r\n        \r\n    handleChangeValue = (event, newValue) => {\r\n      console.log('newValue: ', newValue)\r\n      console.log('(newValue*this.binSize)+this.state.minHist: ', (newValue*this.binSize)+this.state.minHist)\r\n      console.log('this.hist256[newValue]: ', this.hist256[newValue])\r\n      this.setState({value: newValue})\r\n      this.setState({valueScale: (newValue*this.binSize)+this.state.minHist})\r\n      this.setState({histCount: this.hist256[newValue]})\r\n    }\r\n      \r\n    hide = () => {\r\n      this.props.onClose()\r\n    }\r\n\r\n    onDrag = (e, ui) => {\r\n      const {x, y} = this.state.deltaPosition;\r\n      this.setState({\r\n        deltaPosition: {\r\n          x: x + ui.deltaX,\r\n          y: y + ui.deltaY,\r\n        }\r\n      })\r\n    }\r\n  \r\n    onStart = () => {\r\n      this.setState({activeDrags: this.state.activeDrags+1})\r\n    }\r\n  \r\n    onStop = () => {\r\n      this.setState({activeDrags: this.state.activeDrags-1})\r\n    }\r\n\r\n    render() {  \r\n      return (\r\n        <Draggable\r\n          handle=\"strong\"\r\n          defaultPosition={{x: 20, y: 20}}\r\n          onStart={this.onStart}\r\n          onDrag={this.onDrag}\r\n          onStop={this.onStop}>\r\n          <div className=\"box no-cursor\">\r\n            <strong className=\"cursor\">\r\n              <div>\r\n                <IconButton edge=\"start\" size=\"small\" onClick={() => this.props.onClose()}>\r\n                  <HighlightOffIcon color=\"action\" />\r\n                </IconButton>\r\n              </div>\r\n            </strong>\r\n            <div style={style}>\r\n              <div>\r\n                <canvas \r\n                  ref={this.canvasHistogram} \r\n                  width={HIST_WIDTH} \r\n                  height={HIST_HEIGHT} \r\n                  style={{backgroundColor: \"#FFFFFF\", cursor:'crosshair'}} \r\n                />\r\n              </div>  \r\n              <div style={styleCanvasGradient}>\r\n                <canvas ref={this.canvasGradient} width={HIST_WIDTH} height={10} style={{backgroundColor: \"#FFFFFF\"}} />\r\n              </div>\r\n              <div style={styleSlider}>\r\n                <Slider\r\n                  value={this.state.value}\r\n                  onChange={this.handleChangeValue}\r\n                  aria-labelledby=\"continuous-slider\"\r\n                  color=\"secondary\"\r\n                  mix={0}\r\n                  max={255}\r\n                />\r\n              </div>\r\n              <div>\r\n                <table style={styleTable}>\r\n                  <tbody>\r\n                    <tr>\r\n                      <td style={styleTableTd}>min:</td>\r\n                      <td style={styleTableTd}>{this.state.minHist}</td>\r\n                      <td style={styleTableTd}>max:</td>\r\n                      <td style={styleTableTd}>{this.state.maxHist}</td>\r\n                    </tr>\r\n                    <tr>\r\n                      <td>mean:</td>\r\n                      <td>{parseFloat(this.state.mean).toFixed(3)}</td>\r\n                      <td>std dev:</td>\r\n                      <td>{parseFloat(this.state.stdDev).toFixed(3)}</td>\r\n                    </tr>\r\n                    <tr>\r\n                      <td>count:</td>\r\n                      <td>{this.state.histCount}</td>\r\n                      <td>value:</td>\r\n                      <td>{parseFloat(this.state.valueScale).toFixed(3)}</td>\r\n                    </tr>\r\n                  </tbody>\r\n                </table>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </Draggable>\r\n      )\r\n  }\r\n}\r\n\r\nexport default Histogram\r\n","import { \r\n    SETTINGS_SAVEAS, \r\n    SETTINGS_DCMHEADER, \r\n    SETTINGS_OVERLAY, \r\n    SETTINGS_MEASUREMENT\r\n} from './constants/settings'\r\n\r\nexport function log() {\r\n    let log = localStorage.getItem('debug-u-dicom-viewer')\r\n    if (log === null) {\r\n        console.log = function(){}\r\n    }\r\n}\r\n\r\nexport function isUrlImage(url) {\r\n    return(url.match(/\\.(jpeg|jpg|png)$/) != null)\r\n}\r\n\r\nexport function isFileImage(file) {\r\n    const acceptedImageTypes = ['image/jpeg', 'image/png'] // 'image/gif', \r\n    return file && acceptedImageTypes.includes(file['type'])\r\n}\r\n\r\nexport function getSettingsSaveAs() {\r\n    let saveAs = localStorage.getItem(SETTINGS_SAVEAS)\r\n    if (saveAs === null) {\r\n      saveAs = \"png\"\r\n      localStorage.setItem(SETTINGS_SAVEAS, saveAs)\r\n    }\r\n    return saveAs\r\n}\r\n\r\nexport function setSettingsSaveAs(value) {\r\n    localStorage.setItem(SETTINGS_SAVEAS, value)  \r\n}\r\n\r\nexport function getSettingsDcmHeader() {\r\n    let exportAs = localStorage.getItem(SETTINGS_DCMHEADER)\r\n    if (exportAs === null) {\r\n      exportAs = \"json\"\r\n      localStorage.setItem(SETTINGS_DCMHEADER, exportAs)\r\n    }  \r\n    return exportAs\r\n}\r\n\r\nexport function setSettingsDcmHeader(value) {\r\n    localStorage.setItem(SETTINGS_DCMHEADER, value)  \r\n}\r\n\r\nexport function getSettingsOverlay() {\r\n    let overlay = localStorage.getItem(SETTINGS_OVERLAY)\r\n    if (overlay === null) {\r\n      overlay = \"1\"\r\n      localStorage.setItem(SETTINGS_OVERLAY, overlay)\r\n    }\r\n    return overlay === '1'\r\n}\r\n\r\nexport function setSettingsOverlay(value) {\r\n    localStorage.setItem(SETTINGS_OVERLAY, value ? '1' : '0')  \r\n}\r\n\r\nexport function getSettingsMeasurement() {\r\n    let measurement = localStorage.getItem(SETTINGS_MEASUREMENT)\r\n    if (measurement === null) {\r\n        measurement = \"1\"\r\n      localStorage.setItem(SETTINGS_MEASUREMENT, measurement)\r\n    }\r\n    return measurement\r\n}\r\n\r\nexport function setSettingsMeasurement(value) {\r\n    localStorage.setItem(SETTINGS_MEASUREMENT, value)  \r\n}\r\n\r\n\r\n/**\r\n * Converts a value to a string appropriate for entry into a CSV table.  E.g., a string value will be surrounded by quotes.\r\n * @param {string|number|object} theValue\r\n */\r\nfunction toCsvValue(theValue) {\r\n    let t = typeof theValue,\r\n        output\r\n\r\n    let sDelimiter = '\"'\r\n\r\n    if (t === 'undefined' || t === null) {\r\n        output = ''\r\n    } else if (t === 'string') {\r\n        output = sDelimiter + theValue.replace(/\"/g, '\"\"') + sDelimiter\r\n    } else {\r\n        output = sDelimiter + String(theValue).replace(/\"/g, '\"\"') + sDelimiter\r\n    }\r\n\r\n    return output\r\n}\r\n\r\n/**\r\n * Converts an array of objects (with identical schemas) into a CSV table.\r\n * @param {Array} objArray An array of objects.  Each object in the array must have the same property list.\r\n * @param {string} cDelimiter The column delimiter.  Defaults to a comma (,) if omitted.\r\n * @return {string} The CSV equivalent of objArray.\r\n */\r\nexport function toCsv(objArray, cDelimiter) {\r\n    var i,\r\n        l,\r\n        names = [],\r\n        name,\r\n        value,\r\n        obj,\r\n        row,\r\n        output = '',\r\n        n,\r\n        nl\r\n\r\n    // Initialize default parameters.\r\n\r\n    let sDelimiter = '\"'\r\n    if (typeof cDelimiter === 'undefined' || cDelimiter === null) {\r\n        cDelimiter = ','\r\n    }\r\n\r\n    for (i = 0, l = objArray.length; i < l; i += 1) {\r\n        // Get the names of the properties.\r\n        obj = objArray[i]\r\n        row = ''\r\n        if (i === 0) {\r\n            // Loop through the names\r\n            for (name in obj) {\r\n                if (obj.hasOwnProperty(name)) {\r\n                    names.push(name)\r\n                    row += [\r\n                        sDelimiter,\r\n                        name.replace(/\"/g, '\"\"'),\r\n                        sDelimiter,\r\n                        cDelimiter,\r\n                    ].join('')\r\n                }\r\n            }\r\n            row = row.substring(0, row.length - 1)\r\n            output += row\r\n        }\r\n\r\n        output += '\\n'\r\n        row = ''\r\n        for (n = 0, nl = names.length; n < nl; n += 1) {\r\n            name = names[n]\r\n            value = obj[name]\r\n            if (n > 0) {\r\n                row += cDelimiter\r\n            }\r\n            row += toCsvValue(value)\r\n        }\r\n        output += row\r\n    }\r\n\r\n    return output\r\n}\r\n\r\n","import Dexie from 'dexie'\r\n\r\nconst db = new Dexie('udvDB')\r\n\r\ndb.version(1).stores({ \r\n    measurement: '++id, sopinstanceuid, tool' \r\n})\r\n\r\ndb.open()\r\n\r\nexport default db\r\n","import React from \"react\"\r\nimport Button from '@material-ui/core/Button'\r\nimport Dialog from '@material-ui/core/Dialog'\r\nimport DialogActions from '@material-ui/core/DialogActions'\r\nimport DialogContent from '@material-ui/core/DialogContent'\r\nimport DialogContentText from '@material-ui/core/DialogContentText'\r\nimport DialogTitle from '@material-ui/core/DialogTitle'\r\nimport Hammer from \"hammerjs\"\r\nimport * as cornerstone from \"cornerstone-core\"\r\nimport * as cornerstoneTools from \"cornerstone-tools\"\r\nimport * as cornerstoneMath from \"cornerstone-math\"\r\nimport * as cornerstoneFileImageLoader from \"cornerstone-file-image-loader\"\r\nimport * as cornerstoneWebImageLoader from \"cornerstone-web-image-loader\"\r\nimport * as cornerstoneWADOImageLoader from \"cornerstone-wado-image-loader\"\r\nimport * as dicomParser from 'dicom-parser'\r\nimport {connect} from 'react-redux'\r\nimport {clearStore, loadLocalfile, loadUrl, dcmIsOpen, dcmNumberOfFrames, dcmTool, dcmDataStore, measureStore, measureRemove, measureClear} from '../actions'\r\nimport {uids} from '../constants/uids'\r\nimport { SETTINGS_SAVEAS } from '../constants/settings'\r\nimport OpenUrlDlg from './OpenUrlDlg'\r\nimport CinePlayer from './CinePlayer'\r\nimport Histogram from './Histogram'\r\nimport { getSettingsOverlay } from '../functions'\r\nimport { isMobile } from 'react-device-detect'\r\nimport { import as csTools } from 'cornerstone-tools'\r\nimport db from '../db'\r\n//import { black } from \"ansi-colors\";\r\nimport { isFileImage } from '../functions'\r\nimport { isUrlImage } from '../functions'\r\nimport { log } from '../functions'\r\nconst scrollToIndex = csTools('util/scrollToIndex')\r\n//const getRGBPixels = csTools('util/getRGBPixels')\r\n\r\nlog()\r\n\r\nconst hAppBar = 78\r\n\r\nfunction getBlobUrl(url) {\r\n  const baseUrl = window.URL || window.webkitURL;\r\n  const blob = new Blob([`importScripts('${url}')`], {type: \"application/javascript\"});\r\n  return baseUrl.createObjectURL(blob);\r\n}\r\n\r\nlet webWorkerUrl = getBlobUrl(\r\n  \"https://unpkg.com/cornerstone-wado-image-loader@3.0.0/dist/cornerstoneWADOImageLoaderWebWorker.min.js\"\r\n);\r\nlet codecsUrl = getBlobUrl(\r\n  \"https://unpkg.com/cornerstone-wado-image-loader@3.0.0/dist/cornerstoneWADOImageLoaderCodecs.js\"\r\n  // \"https://unpkg.com/cornerstone-wado-image-loader/dist/cornerstoneWADOImageLoaderCodecs.js\"\r\n);\r\n\r\n// See componentDidMount line 110 for initialization, registration\r\nconst config = {\r\n  maxWebWorkers: 4, //\r\n  //startWebWorkersOnDemand: true, //\r\n  webWorkerPath: webWorkerUrl,\r\n  //webWorkerTaskPaths: [], //\r\n  taskConfiguration: {\r\n    decodeTask: {\r\n      //loadCodecsOnStartup: true, //\r\n      //initializeCodecsOnStartup: false, //\r\n      codecsPath: codecsUrl,\r\n      //usePDFJS: false, //\r\n      //strict: true //\r\n    }\r\n  }\r\n};\r\n\r\n//console.log({ cornerstone });\r\n//console.log({ cornerstoneWADOImageLoader });\r\n//console.log({ dicomParser });\r\n\r\nclass DicomViewer extends React.Component {\r\n    constructor(props) {\r\n      super(props)\r\n      this.dicomImage = null\r\n      this.imageId = null\r\n      this.image = null\r\n      //this.imageWidth = 512\r\n      //this.imageHeight = 512\r\n    }\r\n\r\n    state = { \r\n      imageWidth: window.innerWidth,\r\n      imageHeight: window.innerHeight-hAppBar,\r\n      //innerWidth: window.innerWidth,\r\n      //innerHeight: window.innerHeight,\r\n      file: null,\r\n      visibleOpenUrlDlg: false,\r\n      progress: null,\r\n      visibleCinePlayer: false,\r\n      visibleHistogram: false,\r\n      errorOnOpenImage: null,\r\n      frame: 1,\r\n      inPlay: false,\r\n      viewport: null,\r\n      isDicom: true,\r\n    }\r\n  \r\n    componentDidMount() {\r\n      cornerstoneTools.external.cornerstone = cornerstone;\r\n      cornerstoneTools.external.cornerstoneMath = cornerstoneMath;\r\n      cornerstoneFileImageLoader.external.cornerstone = cornerstone;\r\n      cornerstoneWebImageLoader.external.cornerstone = cornerstone;\r\n      cornerstoneWADOImageLoader.external.cornerstone = cornerstone;\r\n      cornerstoneWADOImageLoader.webWorkerManager.initialize(config);\r\n      cornerstoneWADOImageLoader.external.dicomParser = dicomParser;\r\n      cornerstoneTools.external.Hammer = Hammer;    \r\n\r\n      window.scrollTo(0, 1)\r\n      this.props.runTool(this)\r\n      this.props.changeTool(this)\r\n      cornerstone.events.addEventListener('cornerstoneimageloaded', this.onImageLoaded)\r\n    }\r\n\r\n    componentWillUnmount() {\r\n      this.props.runTool(undefined)\r\n      this.props.changeTool(undefined)\r\n    }\r\n\r\n  \r\n    onOpenUrl = (e) => {\r\n      const eventData = e.detail\r\n      this.setState({ progress: eventData.percentComplete })\r\n    }\r\n\r\n    showOpenUrlDlg = (url) => {\r\n      this.setState({ visibleOpenUrlDlg: true }, () => {\r\n        cornerstone.events.addEventListener('cornerstoneimageloadprogress', this.onOpenUrl)\r\n        this.loadImage(undefined, url)\r\n      })\r\n    }\r\n  \r\n    hideOpenUrlDlg = () => {\r\n      this.setState({ visibleOpenUrlDlg: false, progress: null })\r\n    }\r\n\r\n\r\n    showHistogram = (url) => {\r\n      this.setState({ visibleHistogram: true })\r\n    }\r\n  \r\n    hideHistogram = () => {\r\n      this.setState({ visibleHistogram: false })\r\n    }\r\n\r\n\r\n    getTransferSyntax = (image) => {\r\n      const value = image.data.string('x00020010')\r\n      return value + ' [' + uids[value] + ']'\r\n    }\r\n\r\n    getSopClass = (image) => {\r\n      const value = image.data.string('x00080016')\r\n      return value + ' [' + uids[value] + ']'\r\n    }\r\n\r\n    getSopInstanceUID = (image) => {\r\n      const value = image.data.string('x00080018')\r\n      return value\r\n    }\r\n\r\n    getPixelRepresentation = (image) => {\r\n      const value = image.data.uint16('x00280103')\r\n      if (value === undefined) return\r\n      return value + (value === 0 ? ' (unsigned)' : ' (signed)')\r\n    }\r\n\r\n    getPlanarConfiguration = (image) => {\r\n      const value = image.data.uint16('x00280006')\r\n      if (value === undefined) return \r\n      return value + (value === 0 ? ' (pixel)' : ' (plane)')\r\n    }\r\n\r\n    \r\n    onImageLoaded = (e) => {\r\n      console.log('cornerstoneimageloaded: ')\r\n\r\n    }\r\n\r\n    // Listen for changes to the viewport so we can update the text overlays in the corner\r\n    onImageRendered = (e) => {\r\n      console.log('cornerstoneimagerendered: ')\r\n\r\n      console.log('window.innerWidth: ', window.innerWidth)\r\n      console.log('window.innerHeight: ', window.innerHeight)\r\n\r\n      /*this.setState({\r\n        innerWidth: window.innerWidth,\r\n        innerHeight: window.innerHeight\r\n      })*/\r\n      this.setState({\r\n        imageWidth: window.innerWidth,\r\n        imageHeight: window.innerHeight-hAppBar\r\n      })\r\n\r\n      const viewport = cornerstone.getViewport(e.target)\r\n\r\n      //console.log('viewport: ', viewport)\r\n\r\n      if (this.state.isDicom) document.getElementById(\r\n        \"mrtopleft\"\r\n      ).textContent = `${this.dataHeader.PatientsName}`\r\n\r\n      document.getElementById(\r\n        \"mrtopright\"\r\n      ).textContent = `${viewport.displayedArea.brhc.x}x${viewport.displayedArea.brhc.y}`\r\n\r\n      document.getElementById(\r\n        \"mrbottomleft\"\r\n      ).textContent = `WW/WC: ${Math.round(viewport.voi.windowWidth)}/${Math.round(viewport.voi.windowCenter)}`\r\n\r\n      document.getElementById(\r\n        \"mrbottomright\"\r\n      ).textContent = `Zoom: ${Math.round(viewport.scale.toFixed(2)*100)}%`\r\n\r\n      if (this.state.isDicom && this.state.visibleCinePlayer && this.props.numberOfFrames > 1) {\r\n        document.getElementById(\r\n          \"frameLabel\"\r\n        ).textContent = `${this.state.frame} / ${this.props.numberOfFrames}`\r\n        if (this.state.inPlay) {\r\n          let frame = this.state.frame === this.props.numberOfFrames ? 1 : this.state.frame+1\r\n          this.setState({frame: frame})\r\n        }\r\n      }\r\n      \r\n    }\r\n\r\n    onMeasurementModified = (e) => {\r\n      //console.log('cornerstonetoolsmeasurementmodified: ', e.detail.measurementData)\r\n    }\r\n\r\n    onMeasurementCompleted = (e) => {\r\n      console.log('cornerstonetoolsmeasurementcompleted: ', e.detail.measurementData)\r\n      \r\n      const measure = {\r\n        tool: this.props.tool,\r\n        note: '',\r\n        data: e.detail.measurementData\r\n      }\r\n      this.props.measurementStore(measure)\r\n    }\r\n    \r\n    onErrorOpenImageClose = () => {\r\n      this.setState({errorOnOpenImage: null})\r\n    }\r\n\r\n    loadImage = (localfile, url=undefined) => {\r\n      console.log('loadImage, localfile: ', localfile)\r\n      console.log('loadImage, url: ', url)\r\n\r\n      if (localfile === undefined && url === undefined) return\r\n      \r\n      if (localfile !== undefined) {\r\n        this.props.localfileStore(localfile)\r\n      } else {\r\n        this.props.urlStore(url)\r\n      }\r\n \r\n      const element = this.dicomImage\r\n\r\n      element.addEventListener(\"cornerstonenewimage\", this.onNewImage)\r\n      element.addEventListener(\"cornerstoneimagerendered\", this.onImageRendered)\r\n      element.addEventListener(\"cornerstonetoolsmeasurementadded\", this.onMeasurementAdded)\r\n      element.addEventListener(\"cornerstonetoolsmeasurementmodified\", this.onMeasurementModified)\r\n      element.addEventListener(\"cornerstonetoolsmeasurementcompleted\", this.onMeasurementCompleted)\r\n\r\n      cornerstoneTools.init(isMobile ? {touchEnabled: true} : {mouseEnabled: true})\r\n\r\n      let imageId = undefined\r\n\r\n      cornerstone.enable(element)\r\n\r\n      if (localfile === undefined && isUrlImage(url)) { // check if it's a simple image [jpeg or png] \r\n        //const file = \"file:///C:/GARBAGE/_DCM/\"+localfile.name\r\n        //console.log('image: ', file)\r\n        cornerstone.loadImage(url).then(image => {\r\n          console.log('loadImage, image: ', image)\r\n\r\n          this.hideOpenUrlDlg()\r\n\r\n          this.image = image\r\n\r\n          this.props.isOpenStore(true)\r\n\r\n          this.setState({isDicom: false})\r\n\r\n          cornerstone.displayImage(element, image)\r\n          \r\n          this.enableTool()\r\n\r\n        }, (e) => {\r\n          console.log('error', e)\r\n          this.setState({errorOnOpenImage: \"This is not a valid JPG or PNG file.\"})\r\n        })\r\n\r\n      } else if (localfile !== undefined && isFileImage(localfile)) { // otherwise try to open as local image file (JPEG, PNG) \r\n        imageId = cornerstoneFileImageLoader.fileManager.add(localfile)\r\n        cornerstone.loadImage(imageId).then(image => {\r\n          console.log('loadImage, image: ', image)\r\n\r\n          this.image = image\r\n\r\n          this.props.isOpenStore(true)\r\n\r\n          this.setState({isDicom: false})\r\n\r\n          cornerstone.displayImage(element, image)\r\n          \r\n          this.enableTool()\r\n\r\n        }, (e) => {\r\n          console.log('error', e)\r\n          this.setState({errorOnOpenImage: \"This is not a valid JPG or PNG file.\"})\r\n        })\r\n\r\n      } else { // otherwise try to open as Dicom file\r\n\r\n        if (localfile !== undefined) {\r\n          imageId = cornerstoneWADOImageLoader.wadouri.fileManager.add(localfile)\r\n        } else { // it's a web dicom image\r\n          imageId = \"wadouri:\"+url\r\n        }\r\n  \r\n        console.log('loadImage, imageId: ', imageId)\r\n\r\n        cornerstone.loadAndCacheImage(imageId).then(image => {\r\n          console.log('loadImage, image: ', image)\r\n\r\n          this.hideOpenUrlDlg()\r\n\r\n          this.image = image\r\n          //this.imageWidth = image.width\r\n          //this.imageHeight = image.height\r\n\r\n          //console.log('this.state.imageWidth: ', this.state.imageWidth)\r\n          //console.log('this.state.imageHeight: ', this.state.imageHeight)\r\n\r\n          this.setState({\r\n            imageWidth: window.innerWidth,\r\n            imageHeight: window.innerHeight-hAppBar\r\n          })\r\n\r\n          //console.log('this.state.imageWidth: ', this.state.imageWidth)\r\n          //console.log('this.state.imageHeight: ', this.state.imageHeight)\r\n\r\n          this.props.isOpenStore(true)\r\n\r\n          //console.log('loadImage, x00280010: ', image.width)\r\n          //console.log('loadImage, x00280011: ', image.height)\r\n          //console.log('loadImage, image.getPixelData(): ', image.getPixelData())\r\n          //console.log('loadImage, image.getImageData: ', image.getImageData)\r\n          //console.log('loadImage, image.data.byteArray: ', image.data.byteArray)\r\n          //console.log('loadImage, image.data.byteArray.length: ', image.data.byteArray.length)\r\n\r\n          this.props.dataStore(['Transfer Syntax', this.getTransferSyntax(image)])\r\n          this.props.dataStore(['SOP Class', this.getSopClass(image)])\r\n          this.props.dataStore(['SOP Instance UID', this.getSopInstanceUID(image)])\r\n          this.props.dataStore(['Frame Rate', image.data.string('x00082144')])\r\n          this.props.dataStore(['Samples per Pixel', image.data.uint16('x00280002')])\r\n          this.props.dataStore(['Photometric Interpretation', image.data.string('x00280004')])\r\n          this.props.dataStore(['Number of Frames', image.data.string('x00280008')])\r\n          this.props.dataStore(['Planar Configuration', this.getPlanarConfiguration(image)])\r\n          this.props.dataStore(['Rows', image.data.uint16('x00280010')])\r\n          this.props.dataStore(['Columns', image.data.uint16('x00280011')])\r\n          this.props.dataStore(['Pixel Spacing', image.data.string('x00280030')])\r\n          this.props.dataStore(['Bits Allocated', image.data.uint16('x00280100')])\r\n          this.props.dataStore(['Bits Stored', image.data.uint16('x00280101')])\r\n          this.props.dataStore(['High Bit', image.data.uint16('x00280102')])\r\n          this.props.dataStore(['Pixel Representation', this.getPixelRepresentation(image)])\r\n          this.props.dataStore(['Window Center', image.data.string('x00281050')])\r\n          this.props.dataStore(['Window Width', image.data.string('x00281051')])\r\n          this.props.dataStore(['Rescale Intercept', image.data.string('x00281052')])\r\n          this.props.dataStore(['Rescale Slope', image.data.string('x00281053')])\r\n          this.props.dataStore(['Min Stored Pixel Value', image.minPixelValue])\r\n          this.props.dataStore(['Max Stored Pixel Value', image.maxPixelValue])\r\n          \r\n          \r\n          this.dataHeader = {\r\n            transferSyntax: this.getTransferSyntax(image),\r\n            sopClass: this.getSopClass(image),\r\n            sopInstanceUid: this.getSopInstanceUID(image),\r\n            PatientsName: image.data.string('x00100010'),\r\n            samplesPerPixel: image.data.uint16('x00280002'), \r\n            photometricInterpretation: image.data.string('x00280004'),\r\n            numberOfFrames: image.data.string('x00280008'),\r\n            planarConfiguration: this.getPlanarConfiguration(image),\r\n            rows: image.data.uint16('x00280010'),\r\n            columns: image.data.uint16('x00280011'),\r\n            pixelSpacing: image.data.string('x00280030'),\r\n            bitsAllocated:  image.data.uint16('x00280100'),\r\n            bitsStored: image.data.uint16('x00280101'),\r\n            highBit: image.data.uint16('x00280102'),\r\n            pixelRepresentation: this.getPixelRepresentation(image),\r\n            windowCenter: image.data.string('x00281050'),\r\n            windowWidth: image.data.string('x00281051'),\r\n            rescaleIntercept: image.data.string('x00281052'),\r\n            rescaleSlope: image.data.string('x00281053'),\r\n            basicOffsetTable: image.data.elements.x7fe00010 && image.data.elements.x7fe00010.basicOffsetTable ? image.data.elements.x7fe00010.basicOffsetTable.length : '',\r\n            fragments: image.data.elements.x7fe00010 && image.data.elements.x7fe00010.fragments ? image.data.elements.x7fe00010.fragments.length : '',\r\n            minStoredPixelValue: image.minPixelValue,\r\n            maxStoredPixelValue: image.maxPixelValue,\r\n          }\r\n          console.log('this.dataHeader: ', this.dataHeader)\r\n\r\n          let stack = { currentImageIdIndex: 0, imageIds: \"\" }\r\n          let nFrames = image.data.intString('x00280008')\r\n          if (nFrames > 0) {\r\n            //console.log('nFrames: ', nFrames)\r\n            this.props.numberOfFramesStore(nFrames)\r\n            let imageIds = []\t\r\n            for(var i=0; i < nFrames; ++i) {\r\n              imageIds.push(imageId + \"?frame=\"+i)\r\n            }\t\r\n            stack.imageIds = imageIds;\r\n            //console.log(stack.imageIds)\r\n          }\r\n\r\n          console.log('displayImage: ')\r\n          cornerstone.displayImage(element, image)\r\n          //cornerstoneTools.mouseInput.enable(element);\r\n          //cornerstoneTools.mouseWheelInput.enable(element);\r\n\r\n          this.enableTool()\r\n\r\n          if (nFrames > 1) {\r\n            cornerstoneTools.addStackStateManager(element, ['stack', 'playClip']);    \r\n            cornerstoneTools.addToolState(element, 'stack', stack)\r\n            //cornerstoneTools.setToolActive('StackScrollMouseWheel', { })\r\n          }\r\n  \r\n          // Load the possible measurements from DB and save in the store \r\n          db.measurement.where('sopinstanceuid').equals(this.dataHeader.sopInstanceUid).each(measure => {\r\n            console.log('load measure from db: ', measure)\r\n            this.props.measurementStore(measure)\r\n            cornerstoneTools.addToolState(element, measure.tool, measure.data)\r\n            this.runTool(measure.tool)\r\n            cornerstone.updateImage(element)\r\n            cornerstoneTools.setToolEnabled(measure.tool)\r\n          })       \r\n          \r\n        }, (e) => {\r\n          console.log('error', e)\r\n          let pos = e.error.indexOf(\":\")\r\n          this.setState({errorOnOpenImage: pos < 0 ? e.error : e.error.substring(pos+1)})\r\n        })\r\n\r\n      }\r\n\r\n    }\r\n  \r\n    enableTool = (toolName, mouseButtonNumber) => {\r\n      // Enable all tools we want to use with this element\r\n      const WwwcTool = cornerstoneTools.WwwcTool;\r\n      const LengthTool = cornerstoneTools['LengthTool']\r\n      const PanTool = cornerstoneTools.PanTool\r\n      const ZoomTouchPinchTool = cornerstoneTools.ZoomTouchPinchTool\r\n      const ZoomTool = cornerstoneTools.ZoomTool\r\n      const ProbeTool = cornerstoneTools.ProbeTool\r\n      const EllipticalRoiTool = cornerstoneTools.EllipticalRoiTool\r\n      const RectangleRoiTool = cornerstoneTools.RectangleRoiTool\r\n      const FreehandRoiTool = cornerstoneTools.FreehandRoiTool\r\n      const AngleTool = cornerstoneTools.AngleTool\r\n      const MagnifyTool = cornerstoneTools.MagnifyTool\r\n      const StackScrollMouseWheelTool = cornerstoneTools.StackScrollMouseWheelTool\r\n\r\n      cornerstoneTools.addTool(MagnifyTool)\r\n      cornerstoneTools.addTool(AngleTool)    \r\n      cornerstoneTools.addTool(WwwcTool)\r\n      cornerstoneTools.addTool(LengthTool)\r\n      cornerstoneTools.addTool(PanTool)\r\n      cornerstoneTools.addTool(ZoomTouchPinchTool)\r\n      cornerstoneTools.addTool(ZoomTool)\r\n      cornerstoneTools.addTool(ProbeTool)\r\n      cornerstoneTools.addTool(EllipticalRoiTool)\r\n      cornerstoneTools.addTool(RectangleRoiTool)\r\n      cornerstoneTools.addTool(FreehandRoiTool)\r\n      cornerstoneTools.addTool(StackScrollMouseWheelTool)      \r\n    }\r\n  \r\n    // helper function used by the tool button handlers to disable the active tool\r\n    // before making a new tool active\r\n    disableAllTools = () => {\r\n      cornerstoneTools.setToolEnabled('Length')\r\n      cornerstoneTools.setToolEnabled('Pan')\r\n      cornerstoneTools.setToolEnabled('Magnify')\r\n      cornerstoneTools.setToolEnabled('Angle')\r\n      cornerstoneTools.setToolEnabled('RectangleRoi')\r\n      cornerstoneTools.setToolEnabled('Wwwc')\r\n      cornerstoneTools.setToolEnabled('ZoomTouchPinch')\r\n      cornerstoneTools.setToolEnabled('Probe')\r\n      cornerstoneTools.setToolEnabled('EllipticalRoi')\r\n      cornerstoneTools.setToolEnabled('StackScrollMouseWheel')\r\n    }\r\n  \r\n    runTool = (toolName, opt) => {\r\n      console.log('run tool: ', toolName)\r\n      \r\n//      this.disableAllTools()\r\n      switch (toolName) {\r\n        case 'openfile': {\r\n          cornerstone.disable(this.dicomImage)\r\n          this.setState({ file: opt })\r\n          this.loadImage(opt)\r\n          break   \r\n        } \r\n        case 'openurl': {\r\n          console.log('run tool opt: ', opt)  \r\n          this.showOpenUrlDlg(opt)\r\n          break                 \r\n        }\r\n        case 'clear': {\r\n          if (this.state.visibleHistogram) this.runTool('Histogram')\r\n          this.props.clearingStore()\r\n          cornerstone.disable(this.dicomImage)\r\n          break\r\n        }  \r\n        case 'notool': {\r\n          this.disableAllTools()\r\n\r\n          //const element = this.dicomImage\r\n\r\n          //cornerstoneTools.clearToolState(element, 'Length')\r\n          \r\n          //const toolStateManager = cornerstoneTools.getElementToolStateManager(element)\r\n          //console.log('toolStateManager.toolState: ', toolStateManager.toolState)\r\n          /*\r\n          const toolState = toolStateManager.toolState\r\n          // const allTools = Object.keys(toolState).map(key => toolState[key])\r\n          let key = Object.keys(toolState)[0]\r\n          let allTools = toolState[key]\r\n          //console.log('allTools: ', allTools)\r\n\r\n          for (let [tool, data] of Object.entries(allTools)) {\r\n            //console.log(`${tool}: `, data)\r\n            let key = Object.keys(data)[0]\r\n            let tools = data[key]\r\n            //console.log('tools: ', tools)\r\n            tools.forEach(item => {\r\n              //console.log('tool: ', tool)\r\n              //console.log(item)\r\n              const measure = {\r\n                tool: tool,\r\n                note: '',\r\n                data: item\r\n              }\r\n              console.log('measure: ', measure)\r\n              this.props.measurementStore(measure)\r\n            })\r\n          }\r\n          */\r\n          //const toolState = toolStateManager.get(element, 'Length')\r\n          //console.log('toolState: ', toolState)\r\n\r\n          /*\r\n          const measurementData = {\r\n            visible: true,\r\n            active: true,\r\n            invalidated: true,\r\n            handles: {\r\n                start: {\r\n                    x: 100,\r\n                    y: 100,\r\n                    highlight: true,\r\n                    active: false\r\n                },\r\n                end: {\r\n                    x: 200,\r\n                    y: 200,\r\n                    highlight: true,\r\n                    active: true\r\n                },\r\n                textBox: {\r\n                    active: false,\r\n                    hasMoved: false,\r\n                    movesIndependently: false,\r\n                    drawnIndependently: true,\r\n                    allowedOutsideImage: true,\r\n                    hasBoundingBox: true\r\n                }\r\n              }\r\n          }\r\n          cornerstoneTools.addToolState(element, 'RectangleRoi', measurementData)    \r\n          cornerstoneTools.setToolActive('RectangleRoi', { mouseButtonMask: 1 })\r\n          */  \r\n          //cornerstone.updateImage(element)   \r\n          break\r\n        }\r\n        case 'Wwwc': {\r\n          cornerstoneTools.setToolActive('Wwwc', { mouseButtonMask: 1 })\r\n          break\r\n        }  \r\n        case 'Pan': {\r\n          cornerstoneTools.setToolActive('Pan', { mouseButtonMask: 1 })\r\n          break   \r\n        }  \r\n        case 'Zoom': {\r\n          cornerstoneTools.setToolActive(isMobile ? 'ZoomTouchPinch' : 'Zoom', { mouseButtonMask: 1 })\r\n          break\r\n         }\r\n        case 'Length': {\r\n          cornerstoneTools.setToolActive('Length', isMobile ? { isTouchActive: true } : { mouseButtonMask: 1 })\r\n          break  \r\n        }\r\n        case 'Probe': {\r\n            cornerstoneTools.setToolActive('Probe', { mouseButtonMask: 1 })\r\n          break\r\n        }\r\n        case 'EllipticalRoi': {\r\n          cornerstoneTools.setToolActive('EllipticalRoi', { mouseButtonMask: 1 })\r\n          break   \r\n        }\r\n        case 'RectangleRoi': {\r\n          cornerstoneTools.setToolActive('RectangleRoi', { mouseButtonMask: 1 })\r\n          break  \r\n        }\r\n        case 'Angle': {\r\n          cornerstoneTools.setToolActive('Angle', { mouseButtonMask: 1 })\r\n          break \r\n        }\r\n        case 'Magnify': {\r\n          cornerstoneTools.setToolActive('Magnify', { mouseButtonMask: 1 })\r\n          break  \r\n        }\r\n        case 'FreehandRoi': {\r\n          cornerstoneTools.setToolActive('FreehandRoi', { mouseButtonMask: 1 })\r\n          break \r\n        }\r\n        case 'Histogram': {\r\n          this.setState({ visibleHistogram: !this.state.visibleHistogram })\r\n          break \r\n        }        \r\n        case 'saveas': {\r\n            let type = localStorage.getItem(SETTINGS_SAVEAS)\r\n            cornerstoneTools.SaveAs(this.dicomImage, `${this.state.file.name}.${type}`, `image/${type}`)      \r\n          break\r\n        }\r\n        case 'cine': {\r\n          this.setState({ visibleCinePlayer: !this.state.visibleCinePlayer })\r\n          break\r\n        }\r\n        case 'reset': {\r\n          this.reset()\r\n          break\r\n        }\r\n        case 'removetool': {\r\n          //console.log('opt: ', opt)\r\n          const element = this.dicomImage\r\n          cornerstoneTools.removeToolState(element, this.props.measure[opt].tool, this.props.measure[opt].data)\r\n          cornerstone.updateImage(element)\r\n          this.props.measurementRemoveStore(opt)\r\n          break\r\n        }  \r\n        case 'removetools': {   \r\n          const element = this.dicomImage\r\n          // for each measurement remove it \r\n          this.props.measure.forEach(measure => {\r\n            cornerstoneTools.clearToolState(element, measure.tool)         \r\n          })\r\n          cornerstone.updateImage(element)\r\n          this.props.measurementClearStore()\r\n          // also remove all measurements from db\r\n          db.measurement.where('sopinstanceuid').equals(this.dataHeader.sopInstanceUid).delete()\r\n          break\r\n        }  \r\n        case 'savetools': {\r\n          // first, remove eventually previous measurements from db\r\n          db.measurement.where('sopinstanceuid').equals(this.dataHeader.sopInstanceUid).delete()\r\n          // then save all the current measurements\r\n          this.props.measure.forEach(measure => {\r\n            try {\r\n              db.measurement.add({\r\n                sopinstanceuid: this.dataHeader.sopInstanceUid, \r\n                tool: measure.tool,\r\n                note: measure.note,\r\n                data: measure.data\r\n              })\r\n            } catch(error) {\r\n              console.error(error)\r\n            }                       \r\n          })\r\n          break\r\n        }\r\n        default: {\r\n          break\r\n        }\r\n      }\r\n    } \r\n\r\n    changeTool = (toolName, value) => {\r\n      console.log('change tool, value: ', toolName, value)\r\n\r\n      switch (toolName) {\r\n        case 'Wwwc':\r\n          if (value === 1) {\r\n            cornerstoneTools.setToolActive('Wwwc', { mouseButtonMask: 1 })\r\n          } else if (value === 0) {\r\n            cornerstoneTools.setToolPassive('Wwwc')\r\n          }\r\n          break  \r\n        case 'Pan':\r\n          if (value === 1) {\r\n            cornerstoneTools.setToolActive('Pan', { mouseButtonMask: 1 })\r\n          } else if (value === 0) {\r\n            cornerstoneTools.setToolPassive('Pan')\r\n          }\r\n          break    \r\n        case 'Zoom':\r\n          if (value === 1) {\r\n            cornerstoneTools.setToolActive(isMobile ? 'ZoomTouchPinch' : 'Zoom', { mouseButtonMask: 1 })\r\n          } else if (value === 0) {\r\n            cornerstoneTools.setToolPassive(isMobile ? 'ZoomTouchPinch' : 'Zoom')\r\n          }\r\n          break                             \r\n        case 'Length':\r\n          if (value === 1) {\r\n            cornerstoneTools.setToolActive('Length', isMobile ? { isTouchActive: true } : { mouseButtonMask: 1 })\r\n          } else if (value === 0) {\r\n            cornerstoneTools.setToolPassive('Length')\r\n          }\r\n          break   \r\n        case 'Probe':\r\n          if (value === 1) {\r\n            cornerstoneTools.setToolActive('Probe', { mouseButtonMask: 1 })\r\n          } else if (value === 0) {\r\n            cornerstoneTools.setToolPassive('Probe')\r\n          }\r\n          break        \r\n        case 'Angle':\r\n          if (value === 1) {\r\n            cornerstoneTools.setToolActive('Angle', { mouseButtonMask: 1 })\r\n          } else if (value === 0) {\r\n            cornerstoneTools.setToolPassive('Angle')\r\n          }          \r\n          break   \r\n        case 'Magnify':\r\n          if (value === 1) {\r\n            cornerstoneTools.setToolActive('Magnify', { mouseButtonMask: 1 })\r\n          } else if (value === 0) {\r\n            cornerstoneTools.setToolPassive('Magnify')\r\n          }          \r\n          break        \r\n        case 'EllipticalRoi':\r\n          if (value === 1) {\r\n            cornerstoneTools.setToolActive('EllipticalRoi', { mouseButtonMask: 1 })\r\n          } else if (value === 0) {\r\n            cornerstoneTools.setToolPassive('EllipticalRoi')\r\n          }\r\n          break   \r\n        case 'RectangleRoi':\r\n          if (value === 1) {\r\n            cornerstoneTools.setToolActive('RectangleRoi', { mouseButtonMask: 1 })\r\n          } else if (value === 0) {\r\n            cornerstoneTools.setToolPassive('RectangleRoi')\r\n          }\r\n          break\r\n        case 'FreehandRoi':\r\n          if (value === 1) {\r\n            cornerstoneTools.setToolActive('FreehandRoi', { mouseButtonMask: 1 })\r\n          } else if (value === 0) {\r\n            cornerstoneTools.setToolPassive('FreehandRoi')\r\n          }\r\n          break     \r\n        default:\r\n            break\r\n        }  \r\n      }\r\n\r\n    runCinePlayer = (cmdName) => {\r\n      //console.log('this.state.frame: ', this.state.frame)\r\n      const element = this.dicomImage\r\n      switch (cmdName) {\r\n        case 'firstframe': {\r\n          let frame = 1\r\n          this.setState({frame: frame})\r\n          scrollToIndex(element, 0)\r\n          break\r\n        }\r\n        case 'previousframe': {\r\n          if (this.state.frame > 1) {\r\n            let frame = this.state.frame-1\r\n            this.setState({frame: frame})     \r\n            scrollToIndex(element, frame-1)       \r\n          }\r\n          break\r\n        }\r\n        case 'play': {\r\n          cornerstoneTools.playClip(element, 30)\r\n          this.setState({inPlay: true})\r\n          break\r\n        }\r\n        case 'pause': {\r\n            cornerstoneTools.stopClip(element)\r\n            this.setState({inPlay: false})\r\n          break\r\n        }\r\n        case 'nextframe': {\r\n          if (this.state.frame < this.props.numberOfFrames) {\r\n            let frame = this.state.frame+1\r\n            this.setState({frame: frame})            \r\n            scrollToIndex(element, frame-1)\r\n          }\r\n          break  \r\n        }\r\n        case 'lastframe': {\r\n          let frame = this.props.numberOfFrames\r\n          this.setState({frame: frame})   \r\n          scrollToIndex(element, frame-1)      \r\n          break    \r\n        }                       \r\n        default:\r\n          break\r\n      }\r\n    }\r\n\r\n    reset = () => {\r\n      const element = this.dicomImage\r\n      const defaultViewport = cornerstone.getDefaultViewportForImage(element, this.image)\r\n      let viewport = cornerstone.getViewport(element)\r\n      viewport.voi.windowWidth = defaultViewport.voi.windowWidth\r\n      viewport.voi.windowCenter = defaultViewport.voi.windowCenter\r\n      cornerstone.setViewport(element, viewport)\r\n    }\r\n\r\n    dicomImageRef = el => {\r\n      this.dicomImage = el\r\n    };\r\n    \r\n    render() {\r\n\r\n      //this.props.visible ? document.body.style = 'background: #000000;' : document.body.style = 'background: $md-grey-700;'\r\n\r\n      const visibleHistogram = this.state.visibleHistogram\r\n      const visibleOpenUrlDlg = this.state.visibleOpenUrlDlg\r\n      const errorOnOpenImage = this.state.errorOnOpenImage\r\n      const progress = this.state.progress\r\n\r\n      const styleContainer = {\r\n        width: window.innerWidth,\r\n        height: window.innerHeight, \r\n        display: this.props.visible ? 'block' : 'none',\r\n      }\r\n\r\n      const styleDicomImage = {\r\n        width: (this.state.imageWidth)*1, \r\n        height: (this.state.imageHeight)*1, \r\n        marginTop: 20,\r\n        position: \"absolute\",\r\n      }\r\n\r\n      const overlay = getSettingsOverlay() \r\n\r\n      return ( \r\n        <div className=\"container\" style={styleContainer} >\r\n          {visibleOpenUrlDlg ? <OpenUrlDlg progress={progress} onClose={this.hideOpenUrlDlg} /> : null}\r\n          <Dialog\r\n            open={errorOnOpenImage !== null}\r\n            onClose={this.onErrorOpenImageClose}\r\n            aria-labelledby=\"alert-dialog-title\"\r\n            aria-describedby=\"alert-dialog-description\"\r\n          >\r\n            <DialogTitle id=\"alert-dialog-title\">{\"Error on opening image\"}</DialogTitle>\r\n            <DialogContent>\r\n              <DialogContentText id=\"alert-dialog-description\">\r\n                {this.state.errorOnOpenImage}\r\n              </DialogContentText>\r\n            </DialogContent>\r\n            <DialogActions>\r\n              <Button onClick={this.onErrorOpenImageClose} autoFocus>\r\n                Ok\r\n              </Button>\r\n            </DialogActions>\r\n          </Dialog>\r\n\r\n          <div className=\"col-9\">\r\n              <div\r\n                role=\"button\"\r\n                tabIndex=\"0\"\r\n                style={{\r\n                  width: this.state.imageWidth,\r\n                  height: this.state.imageHeight, \r\n                  position: \"relative\",\r\n                  display: \"inline-block\",\r\n                  color: \"white\"\r\n                }}\r\n                onContextMenu={() => false}\r\n                className=\"cornerstone-enabled-image\"\r\n                unselectable=\"on\"\r\n                onMouseDown={() => false}\r\n              >\r\n                <div\r\n                  ref={this.dicomImageRef}\r\n                  style={styleDicomImage}\r\n                />\r\n                <div\r\n                  id=\"mrtopleft\"\r\n                  style={{ position: \"absolute\", top: 0, left: 3, display: this.props.isOpen && overlay ? \"block\" : \"none\" }}\r\n                >\r\n                  Patient Name\r\n                </div>\r\n                <div\r\n                  id=\"mrtopright\"\r\n                  style={{ position: \"absolute\", top: 0, right: 3, display: this.props.isOpen && overlay ? \"block\" : \"none\" }}\r\n                >\r\n                  Size\r\n                </div>\r\n                <div\r\n                  id=\"mrbottomright\"\r\n                  style={{ position: \"absolute\", bottom: -30, right: 3, display: this.props.isOpen && overlay ? \"block\" : \"none\" }}\r\n                >\r\n                  Zoom:\r\n                </div>\r\n                <div\r\n                  id=\"mrbottomleft\"\r\n                  style={{ position: \"absolute\", bottom: -30, left: 3, display: this.props.isOpen && overlay ? \"block\" : \"none\" }}\r\n                >\r\n                  WW/WC:\r\n                </div>    \r\n                { this.state.visibleCinePlayer && this.props.numberOfFrames > 1 ? (\r\n                  <div style={{position: \"fixed\", bottom:4, width:'100%'}}>\r\n                    <CinePlayer runCinePlayer={this.runCinePlayer} inPlay={this.state.inPlay} />  \r\n                    <div id=\"frameLabel\" style={{ width:230, margin:'0 auto', marginTop:-10, textAlign:\"center\" }}>{this.state.frame} / {this.props.numberOfFrames}</div>                \r\n                  </div> \r\n                  ) : null\r\n                }  \r\n                { visibleHistogram ? \r\n                  <Histogram \r\n                    onClose={this.hideHistogram} \r\n                    image={this.image} \r\n                    element={this.dicomImage}\r\n                    isDicom={this.state.isDicom}\r\n                  /> \r\n                  : null\r\n                }\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )\r\n    }\r\n  }\r\n  \r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    localfile: state.loadLocalfile,\r\n    url: state.url,\r\n    isOpen: state.isOpen,\r\n    numberOfFrames: state.numberOfFrames,\r\n    tool: state.tool,\r\n    header: state.header,\r\n    measure: state.measure\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n  return {\r\n    clearingStore: () => dispatch(clearStore()),\r\n    localfileStore: (file) => dispatch(loadLocalfile(file)),\r\n    isOpenStore: (value) => dispatch(dcmIsOpen(value)),\r\n    numberOfFramesStore: (value) => dispatch(dcmNumberOfFrames(value)),\r\n    toolStore: (tool) => dispatch(dcmTool(tool)),\r\n    urlStore: (url) => dispatch(loadUrl(url)),\r\n    dataStore: (data) => dispatch(dcmDataStore(data)),\r\n    measurementStore: (measure) => dispatch(measureStore(measure)),\r\n    measurementRemoveStore: (index) => dispatch(measureRemove(index)),\r\n    measurementClearStore: () => dispatch(measureClear()),\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(DicomViewer)\r\n","import React from 'react'\r\nimport ListItem from '@material-ui/core/ListItem'\r\nimport ListItemText from '@material-ui/core/ListItemText'\r\n\r\nconst HeaderItem = ({name, value}) => {\r\n    return (\r\n        <ListItem dense={true}>\r\n            <ListItemText primary={name} secondary={value} />\r\n        </ListItem>  \r\n    )\r\n}\r\n  \r\nexport default HeaderItem\r\n","import React, { PureComponent } from 'react'\r\nimport Button from '@material-ui/core/Button'\r\nimport CreateIcon from '@material-ui/icons/Create'\r\nimport DeleteIcon from '@material-ui/icons/Delete'\r\nimport Dialog from '@material-ui/core/Dialog'\r\nimport DialogActions from '@material-ui/core/DialogActions'\r\nimport DialogContent from '@material-ui/core/DialogContent'\r\nimport DialogTitle from '@material-ui/core/DialogTitle'\r\nimport IconButton from '@material-ui/core/IconButton'\r\nimport ListItem from '@material-ui/core/ListItem'\r\nimport ListItemText from '@material-ui/core/ListItemText'\r\nimport TextField from '@material-ui/core/TextField'\r\nimport Toolbar from '@material-ui/core/Toolbar'\r\nimport {connect} from 'react-redux'\r\n\r\nclass MeasureItem extends PureComponent {\r\n\r\n    constructor(props) {\r\n        super(props)\r\n        this.noteField = React.createRef()\r\n    \r\n      }\r\n\r\n    state = { \r\n        visibleDlgNote: false,\r\n        visibleDlgDelete: false,\r\n    }\r\n\r\n    showDlgNote = () => {\r\n        this.setState({ visibleDlgNote: true })\r\n    }\r\n    \r\n    hideDlgNote = () => {\r\n        this.setState({ visibleDlgNote: false })\r\n    }\r\n\r\n    showDlgDelete = () => {\r\n        this.setState({ visibleDlgDelete: true })\r\n    }\r\n    \r\n    hideDlgDelete = () => {\r\n        this.setState({ visibleDlgDelete: false })\r\n    }\r\n\r\n    handleOnChangeNote = event => {\r\n        this.setState({ note: event.target.value })\r\n    }\r\n\r\n    confirmNote = (index) => {\r\n        this.hideDlgNote()\r\n        this.props.measure[index].note = this.noteField.value\r\n    }   \r\n\r\n    confirmDelete = (index) => {\r\n        this.hideDlgDelete()\r\n        this.props.toolRemove(index)\r\n    }\r\n\r\n    onEdit = () => {\r\n        this.showDlgNote()\r\n    }\r\n    \r\n    onDelete = () => {\r\n        this.showDlgDelete()\r\n    }\r\n    \r\n    render() {    \r\n        let item = this.props.item\r\n        let index = this.props.index\r\n        let pText = ''\r\n        let sText = ''\r\n        \r\n        switch (item.tool) {\r\n            case 'Length':\r\n                pText = `${item.data.length.toFixed(2)} ${item.data.unit}`\r\n                sText = item.note\r\n                break\r\n            case 'Angle':\r\n                pText = `${item.data.rAngle} °`\r\n                sText = item.note\r\n                break\r\n            case 'EllipticalRoi':\r\n                pText = <div>\r\n                            <div> A: {item.data.cachedStats.area.toFixed(2)} mm² </div>\r\n                            <div> M: {item.data.cachedStats.mean.toFixed(2)} {item.data.unit} </div>\r\n                            <div> SD: {item.data.cachedStats.stdDev.toFixed(2)} {item.data.unit} </div>\r\n                        </div>\r\n                sText = item.note            \r\n                break    \r\n            case 'RectangleRoi':\r\n                pText = <div>\r\n                            <div> A: {item.data.cachedStats.area.toFixed(2)} mm² </div>\r\n                            <div> M: {item.data.cachedStats.mean.toFixed(2)} {item.data.unit} </div>\r\n                    <       div> SD: {item.data.cachedStats.stdDev.toFixed(2)} {item.data.unit} </div>\r\n                        </div>\r\n                sText = item.note\r\n                break          \r\n            case 'FreehandRoi':\r\n                pText = <div>\r\n                            <div> A: {item.data.area.toFixed(2)} mm² </div>\r\n                            <div> M: {item.data.meanStdDev.mean.toFixed(2)} {item.data.unit} </div>\r\n                    <       div> SD: {item.data.meanStdDev.stdDev.toFixed(2)} {item.data.unit} </div>\r\n                        </div>\r\n                sText = item.note\r\n                break                                  \r\n            default:\r\n                break    \r\n        }\r\n\r\n        return (\r\n            <div>\r\n                <ListItem>\r\n                    <ListItemText primary={pText} secondary={sText} />\r\n                    <Toolbar>\r\n                        <IconButton edge=\"end\" onClick={() => this.onEdit(index)}>\r\n                            <CreateIcon />\r\n                        </IconButton>\r\n                        <IconButton edge=\"end\" onClick={() => this.onDelete(index)}>\r\n                            <DeleteIcon />\r\n                        </IconButton>\r\n                    </Toolbar>\r\n                </ListItem>\r\n\r\n                <Dialog\r\n                    open={this.state.visibleDlgNote}\r\n                    onClose={this.hideDlgNote}\r\n                    aria-labelledby=\"form-dialog-title\"\r\n                >\r\n                    <DialogTitle id=\"form-dialog-title\">{\"Note for measurement:\"}</DialogTitle>\r\n                    <DialogContent>\r\n                        <TextField\r\n                            ref=\"noteField\"\r\n                            autoFocus\r\n                            margin=\"dense\"\r\n                            id=\"note\"\r\n                            fullWidth\r\n                            defaultValue={this.props.measure[index].note}\r\n                            inputRef={input => (this.noteField = input)}\r\n                        />\r\n                    </DialogContent>\r\n                    <DialogActions>\r\n                        <Button onClick={this.hideDlgNote} >\r\n                            Cancel\r\n                        </Button>\r\n                        <Button onClick={() => this.confirmNote(index)} autoFocus>\r\n                            Ok\r\n                        </Button>\r\n                    </DialogActions>\r\n                </Dialog>\r\n\r\n                <Dialog\r\n                    open={this.state.visibleDlgDelete}\r\n                    onClose={this.hideDlgNote}\r\n                    aria-labelledby=\"alert-dialog-title\"\r\n                >\r\n                    <DialogTitle id=\"alert-dialog-title\">{\"Are you sure to delete the measurement?\"}</DialogTitle>\r\n                    <DialogActions>\r\n                        <Button onClick={this.hideDlgDelete}>\r\n                            Cancel\r\n                        </Button>\r\n                        <Button onClick={() => this.confirmDelete(index)} autoFocus>\r\n                            Ok\r\n                        </Button>\r\n                    </DialogActions>\r\n                </Dialog>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n  \r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        measure: state.measure\r\n    }\r\n}\r\n\r\nexport default connect(mapStateToProps, )(MeasureItem)\r\n","import React from 'react'\r\n//import { Button, Card, CardText, Checkbox, SelectionControlGroup, Toolbar } from 'react-md'\r\nimport { getSettingsSaveAs, setSettingsSaveAs, \r\n         getSettingsDcmHeader, setSettingsDcmHeader, \r\n         getSettingsOverlay, setSettingsOverlay } from '../functions'\r\n\r\nimport { makeStyles } from '@material-ui/core/styles'\r\nimport AppBar from '@material-ui/core/AppBar'\r\n//import Button from '@material-ui/core/Button'\r\nimport Checkbox from '@material-ui/core/Checkbox'\r\nimport CloseIcon from '@material-ui/icons/Close'\r\nimport Dialog from '@material-ui/core/Dialog'\r\nimport Divider from '@material-ui/core/Divider'\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel'\r\nimport FormControl from '@material-ui/core/FormControl'\r\nimport FormLabel from '@material-ui/core/FormLabel'\r\nimport IconButton from '@material-ui/core/IconButton'\r\nimport Radio from '@material-ui/core/Radio'\r\nimport RadioGroup from '@material-ui/core/RadioGroup'\r\nimport Slide from '@material-ui/core/Slide'\r\nimport Toolbar from '@material-ui/core/Toolbar'\r\nimport Typography from '@material-ui/core/Typography'\r\n\r\n//const style = { maxWidth: window.innerWidth-40 }\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  appBar: {\r\n    position: 'relative',\r\n  },\r\n  formControl: {\r\n    margin: theme.spacing(3),\r\n  },\r\n  title: {\r\n    marginLeft: theme.spacing(2),\r\n    flex: 1,\r\n  },\r\n}))\r\n\r\nconst Transition = React.forwardRef(function Transition(props, ref) {\r\n  return <Slide direction=\"up\" ref={ref} {...props} />;\r\n})\r\n\r\nconst Settings = ({ onClose }) => {\r\n  \r\n  let saveAs = getSettingsSaveAs()\r\n  let exportAs = getSettingsDcmHeader()\r\n  let overlay = getSettingsOverlay()\r\n\r\n  //const isIndexedDB = false // 'indexedDB' in window\r\n  \r\n  const handleChangeSaveAs = event => {\r\n    setState({ ...state, 'saveAs': event.target.value })\r\n    setSettingsSaveAs(event.target.value)\r\n  }\r\n\r\n  const handleChangeExportAs = event => {\r\n    setState({ ...state, 'exportAs': event.target.value })\r\n    setSettingsDcmHeader(event.target.value)\r\n  }\r\n\r\n  const handleChangeOverlay = event => {\r\n    setState({ ...state, 'overlay': event.target.checked })\r\n    setSettingsOverlay(event.target.checked)\r\n  }\r\n\r\n  const classes = useStyles()\r\n\r\n  const [state, setState] = React.useState({\r\n    saveAs: saveAs,\r\n    exportAs: exportAs,\r\n    overlay: overlay,\r\n  })\r\n\r\n  return (\r\n    <div>\r\n      <Dialog fullScreen open={true} onClose={onClose} TransitionComponent={Transition}>\r\n        <AppBar className={classes.appBar}>\r\n          <Toolbar variant=\"dense\">\r\n            <IconButton edge=\"start\" color=\"inherit\" onClick={onClose} aria-label=\"close\">\r\n              <CloseIcon />\r\n            </IconButton>\r\n            <Typography variant=\"h6\" className={classes.title}>\r\n              Settings\r\n            </Typography>\r\n          </Toolbar>\r\n        </AppBar>\r\n        <div>\r\n        <FormControl component=\"fieldset\" className={classes.formControl}>\r\n            <FormControlLabel\r\n              control={\r\n                <Checkbox \r\n                  checked={state.overlay} \r\n                  onChange={handleChangeOverlay}\r\n                  value=\"overlay\" \r\n                />\r\n              }\r\n              label=\"Show overlay Information\"\r\n            />\r\n          </FormControl>\r\n          <Divider />\r\n          <FormControl component=\"fieldset\" className={classes.formControl}>\r\n            <FormLabel component=\"legend\">Save screenshot as:</FormLabel>\r\n            <RadioGroup aria-label=\"saveas\" name=\"saveas\" value={state.saveAs} onChange={handleChangeSaveAs}>\r\n              <FormControlLabel value=\"jpeg\" control={<Radio />} label=\"JPEG\" />\r\n              <FormControlLabel value=\"png\" control={<Radio />} label=\"PNG\" />\r\n            </RadioGroup>\r\n          </FormControl>\r\n          <Divider />\r\n          <FormControl component=\"fieldset\" className={classes.formControl}>\r\n            <FormLabel component=\"legend\">Export Dicom header as:</FormLabel>\r\n            <RadioGroup aria-label=\"exportas\" name=\"exportas\" value={exportAs} onChange={handleChangeExportAs}>\r\n              <FormControlLabel value=\"json\" control={<Radio />} label=\"JSON\" />\r\n              <FormControlLabel value=\"csv\" control={<Radio />} label=\"CSV\" />\r\n            </RadioGroup>\r\n          </FormControl>   \r\n        </div>\r\n      </Dialog>\r\n    </div>\r\n  )\r\n\r\n}\r\n\r\nexport default Settings\r\n","import React from 'react'\r\nimport Button from '@material-ui/core/Button'\r\nimport Dialog from '@material-ui/core/Dialog'\r\nimport DialogActions from '@material-ui/core/DialogActions'\r\nimport DialogContent from '@material-ui/core/DialogContent'\r\nimport DialogTitle from '@material-ui/core/DialogTitle'\r\nimport Link from '@material-ui/core/Link'\r\nimport List from '@material-ui/core/List'\r\nimport ListItem from '@material-ui/core/ListItem'\r\nimport ListItemText from '@material-ui/core/ListItemText'\r\nimport Table from '@material-ui/core/Table'\r\nimport TableBody from '@material-ui/core/TableBody'\r\nimport TableCell from '@material-ui/core/TableCell'\r\nimport TableRow from '@material-ui/core/TableRow'\r\nimport Typography from '@material-ui/core/Typography'\r\n\r\nconst AboutDlg = ({ onClose }) => {\r\n\r\n    const urlRepository = \"https://github.com/webnamics/u-dicom-viewer/\"\r\n\r\n    const linkRepository = (\r\n        <Typography variant='body2'>\r\n            <Link \r\n                href={urlRepository} \r\n                target='_blank'\r\n                style={{ color: '#999999' }}\r\n            >\r\n                https://github.com/webnamics/u-dicom-viewer\r\n            </Link>\r\n        </Typography>\r\n    )\r\n\r\n    const version = (\r\n        <Typography variant='body2' style={{ color: '#999999' }}>\r\n            0.3.0\r\n        </Typography>        \r\n    )\r\n\r\n    return (\r\n      <div>\r\n        <Dialog onClose={onClose} open={true}>\r\n            <DialogTitle onClose={onClose} disableTypography={true}>\r\n                <Typography variant='h6'>\r\n                    About <strong>U</strong>niversal <strong>D</strong>icom <strong>V</strong>iewer\r\n                </Typography>\r\n            </DialogTitle>\r\n            <DialogContent>\r\n                <List>\r\n                    <ListItem>\r\n                        <ListItemText \r\n                            primary='Repository URL:' \r\n                            secondary={linkRepository} \r\n                        />\r\n                    </ListItem>    \r\n                    <ListItem>\r\n                        <ListItemText \r\n                            primary='Version Number:' \r\n                            secondary={version} \r\n                        />\r\n                    </ListItem>                        \r\n                </List>        \r\n            </DialogContent>\r\n            <DialogActions>\r\n                <Button autoFocus onClick={onClose}>\r\n                    Close\r\n                </Button>\r\n            </DialogActions>\r\n        </Dialog>\r\n      </div>\r\n    )\r\n}\r\n\r\nexport default AboutDlg\r\n","import React, { PureComponent } from 'react'\nimport {connect} from 'react-redux'\nimport DicomViewer from './components/dicomviewer'\nimport HeaderItem from './components/HeaderItem'\nimport MeasureItem from './components/MeasureItem'\nimport Settings from './components/Settings'\nimport AboutDlg from './components/AboutDlg'\nimport { SETTINGS_DCMHEADER } from './constants/settings'\nimport { toCsv } from './functions'\nimport {deviceDetect} from 'react-device-detect'\nimport {dcmTool} from './actions/index'\nimport Icon from '@mdi/react'\n\n//import { isBrowser, isMobile } from 'react-device-detect'\n\n//import clsx from 'clsx'\n//import { makeStyles } from '@material-ui/core/styles'\nimport { withStyles } from '@material-ui/core/styles'\nimport AppBar from '@material-ui/core/AppBar'\nimport ClearIcon from '@material-ui/icons/Clear'\nimport Button from '@material-ui/core/Button'\nimport Dialog from '@material-ui/core/Dialog'\nimport DialogActions from '@material-ui/core/DialogActions'\nimport DialogContent from '@material-ui/core/DialogContent'\nimport DialogContentText from '@material-ui/core/DialogContentText'\nimport DialogTitle from '@material-ui/core/DialogTitle'\nimport Divider from '@material-ui/core/Divider'\nimport Drawer from '@material-ui/core/Drawer'\nimport IconButton from '@material-ui/core/IconButton'\nimport List from '@material-ui/core/List'\nimport ListItem from '@material-ui/core/ListItem'\nimport ListItemIcon from '@material-ui/core/ListItemIcon'\nimport ListItemText from '@material-ui/core/ListItemText'\nimport MenuIcon from '@material-ui/icons/Menu'\nimport PhotoCameraIcon from '@material-ui/icons/PhotoCamera'\nimport SaveIcon from '@material-ui/icons/Save'\nimport TextField from '@material-ui/core/TextField'\nimport Toolbar from '@material-ui/core/Toolbar'\nimport Typography from '@material-ui/core/Typography'\n\nimport { \n  mdiAngleAcute,\n  mdiArrowAll,\n  mdiChartHistogram,\n  mdiCheckboxIntermediate,\n  mdiContentSaveOutline,   \n  mdiCursorDefault, \n  mdiCursorPointer,\n  mdiDelete,\n  mdiEllipse,\n  mdiEyedropper,\n  mdiFileDocument, \n  mdiFileCad, \n  mdiFolder,\n  mdiGesture,\n  mdiInformationOutline,\n  mdiMagnify,\n  mdiRefresh,\n  mdiRectangle,\n  mdiRuler,\n  mdiSettings,\n  mdiTrashCanOutline, \n  mdiVideo,\n  mdiWeb,\n} from '@mdi/js'\n\nimport './App.css'\n\nconst iconColor = '#FFFFFF'\nlet iconTool = null\n\nconst drawerWidth = 240\n\nconst styles = theme => ({\n  '@global': {\n    body: {\n        backgroundColor: theme.palette.common.black,\n    },\n  },\n  grow: {\n    flexGrow: 1,\n  },\n  root: {\n    //flexGrow: 1,\n    display: 'flex',\n  },\n  menuButton: {\n    marginRight: theme.spacing(2),\n  },\n  title: {\n    flexGrow: 1,\n  },\n  appBar: {\n    position: 'relative',\n    zIndex: theme.zIndex.drawer + 1,\n    transition: theme.transitions.create(['width', 'margin'], {\n      easing: theme.transitions.easing.sharp,\n      duration: theme.transitions.duration.leavingScreen,\n    }),\n  },\n  appBarShift: {\n    marginLeft: drawerWidth,\n    width: `calc(100% - ${drawerWidth}px)`,\n    transition: theme.transitions.create(['width', 'margin'], {\n      easing: theme.transitions.easing.sharp,\n      duration: theme.transitions.duration.enteringScreen,\n    }),\n  },\n\n  hide: {\n    display: 'none',\n  },\n  drawer: {\n    width: drawerWidth,\n    flexShrink: 0,\n    whiteSpace: 'nowrap',\n  },\n  drawerOpen: {\n    width: drawerWidth,\n    transition: theme.transitions.create('width', {\n      easing: theme.transitions.easing.sharp,\n      duration: theme.transitions.duration.enteringScreen,\n    }),\n  },\n  drawerClose: {\n    transition: theme.transitions.create('width', {\n      easing: theme.transitions.easing.sharp,\n      duration: theme.transitions.duration.leavingScreen,\n    }),\n    overflowX: 'hidden',\n    width: theme.spacing(7) + 1,\n    [theme.breakpoints.up('sm')]: {\n      width: theme.spacing(9) + 1,\n    },\n  },\n\n  // Loads information about the app bar, including app bar height\n  toolbar: theme.mixins.toolbar,\n\n  content: {\n    flexGrow: 1,\n    padding: theme.spacing(3),\n  },\n\n})\n\n\nclass App extends PureComponent {\n\n  constructor(props) {\n    super(props)\n    this.file = null\n    this.fileOpen = React.createRef()\n    this.showFileOpen = this.showFileOpen.bind(this)\n    this.openUrlField = React.createRef()\n\n  }\n\n  menuListSetting = [\n    {\n      key: 'overlay',\n      primaryText: 'Overlay information',\n      onClick: () => {\n        console.log('menu setting overlay ')\n      },\n    }, {\n      key: 'saveas',\n      primaryText: 'Save screenshot as ...',\n      onClick: () => {\n        console.log('menu setting saveas ')\n      },\n    },\n  ]\n\n  state = { \n    visibleDcm: true,\n    visibleMainMenu: true,\n    visibleHeader: false,\n    visibleSettings: false,\n    visibleToolbar: true,\n    visibleOpenUrl: false,\n    visibleMeasure: false,\n    visibleClearMeasureDlg: false,\n    visibleAbout: false,\n    toolState: 1,\n  }\n\n  showFileOpen() {\n    this.fileOpen.current.click()\n  }\n\n  handleChange = (filesSelected) => {\n    console.log('load file: ', filesSelected)\n    this.hideMainMenu()\n    const file = filesSelected[0]\n    this.runTool.runTool('openfile', file)\n  }\n\n  componentDidMount() {\n    // Need to set the renderNode since the drawer uses an overlay\n    this.dialog = document.getElementById('drawer-routing-example-dialog')\n    console.log('deviceDetect: ', deviceDetect())\n  }\n\n\n  toggleMainMenu = () => {\n    this.setState({ visibleMainMenu: !this.state.visibleMainMenu })\n  }\n  \n  showMainMenu = () => {\n    this.setState({ visibleMainMenu: true })\n  }\n\n  hideMainMenu = () => {\n    this.setState({ visibleMainMenu: false })\n  }\n\n  handleVisibility = (visibleMainMenu) => {\n    this.setState({ visibleMainMenu })\n  }\n\n\n  toggleHeader = () => {\n    this.setState({ visibleHeader: !this.state.visibleHeader })\n  }\n\n  saveHeader = () => {\n    let exportAs = localStorage.getItem(SETTINGS_DCMHEADER)\n    if (exportAs === null) {\n      exportAs = \"json\"\n      localStorage.setItem(SETTINGS_DCMHEADER, exportAs)\n    }  \n\n    let fileData = ''\n    \n    if (exportAs === 'csv') {\n      fileData = toCsv(this.props.header)\n    } else {\n      const obj = this.props.header.reduce((o, item) => ({ ...o, [item.name]: item.value}), {})\n      fileData = JSON.stringify(obj)\n    }\n    \n    const element = document.createElement(\"a\")\n    const file = new Blob([fileData], {type: 'text/plain'})\n    element.href = URL.createObjectURL(file)\n    element.download = `${this.props.localfile.name}.${exportAs}`\n    document.body.appendChild(element) // Required for this to work in FireFox\n    element.click()\n  }\n\n\n  saveMeasure = () => {\n    this.runTool.runTool('savetools')\n  }\n  \n  toggleMeasure = () => {\n    this.setState({ visibleMeasure: !this.state.visibleMeasure })\n  }\n\n  hideMeasure = () => {\n    this.setState({ visibleMeasure: false })\n  }\n\n  handleVisibilityMeasure = (visibleMeasure) => {\n    this.setState({ visibleMeasure })\n  }\n\n  clearMeasure = () => {\n    this.showClearMeasureDlg()\n  }\n\n  showClearMeasureDlg = () => {\n    this.setState({ visibleClearMeasureDlg: true })\n  }\n\n  hideClearMeasureDlg = () => {\n      this.setState({ visibleClearMeasureDlg: false })\n  }\n\n  confirmClearMeasureDlg = () => {\n    this.hideClearMeasureDlg()\n    this.runTool.runTool('removetools')\n  }\n\n\n  showAbout = () => {\n    this.setState({ visibleAbout: !this.state.visibleAbout })\n  }\n\n  \n  showSettings = () => {\n    this.setState({ visibleDcm: false, visibleMainMenu: false, visibleSettings: true, visibleToolbar: false, position: 'right' });\n  }\n\n  hideSettings = () => {\n    this.setState({ visibleDcm: true, visibleMainMenu: true, visibleSettings: false, visibleToolbar: true })\n  }\n\n  handleVisibilitySettings = (visibleSettings) => {\n    this.setState({ visibleSettings });\n  }\n\n\n  showOpenUrl = () => {\n    this.setState({ visibleOpenUrl: true })\n  }\n\n  hideOpenUrl = (openDlg) => {\n    this.setState({ visibleOpenUrl: false },\n      () => {\n        if (openDlg) {\n          this.hideMainMenu()\n          return(this.runTool.runTool('openurl', this.openUrlField.value))\n        } \n    })\n  }\n\n  downloadOpenUrl = () => {\n    this.setState({ visibleDcm: true, visibleOpenUrl: false, visibleToolbar: true })\n  }\n  \n  resetImage = () => {\n    console.log('resetImage: ')\n    this.runTool.runTool('reset')\n  }\n  \n  saveShot = () => {\n    console.log('saveShot: ')\n    this.runTool.runTool('saveas')\n  }\n\n  cinePlayer = () => {\n    console.log('cinePlayer: ')\n    this.runTool.runTool('cine')\n  }\n\n  toolExecute = (tool) => {\n    this.hideMainMenu()\n    switch (tool) {\n      case 'notool': \n        iconTool = null\n        this.setState({toolState: null})\n        break\n      case 'Wwwc':\n        iconTool = mdiArrowAll\n        break\n      case 'Pan':\n        iconTool = mdiCursorPointer\n        break        \n      case 'Zoom':\n        iconTool = mdiMagnify\n        break        \n      case 'Length':\n        iconTool = mdiRuler\n        break       \n      case 'Probe':\n        iconTool = mdiEyedropper\n        break    \n      case 'Angle':\n        iconTool = mdiAngleAcute\n        break   \n      case 'EllipticalRoi':\n        iconTool = mdiEllipse\n        break     \n      case 'RectangleRoi':\n        iconTool = mdiRectangle\n        break\n      case 'FreehandRoi':\n        iconTool = mdiGesture\n        break       \n\n      default:\n          break     \n    }\n    this.props.toolStore(tool)\n    this.runTool.runTool(tool)\n  }\n\n  toolChange = () => {\n    console.log('toolChange: ')\n    const toolState = 1-this.state.toolState\n    this.setState({toolState: toolState}, () => {\n      this.changeTool.changeTool(this.props.tool, toolState)\n    })\n  }\n\n  toolRemove = (index) => {\n    this.runTool.runTool('removetool', index)\n  }\n\n  render() {\n    const { classes } = this.props\n\n    const isOpen = this.props.isOpen\n\n    const visibleDcm = this.state.visibleDcm\n    const visibleMainMenu = this.state.visibleMainMenu\n    const visibleHeader = this.state.visibleHeader\n    const visibleSettings = this.state.visibleSettings\n    const visibleAbout = this.state.visibleAbout\n    //const visibleToolbar = this.state.visibleToolbar\n    //const visibleOpenUrl = this.state.visibleOpenUrl\n    const visibleMeasure = this.state.visibleMeasure\n    \n    let iconToolColor = this.state.toolState === 1 ? '#FFFFFF' : '#999999'\n\n    return (\n      <div>\n        <div>\n          <input\n            type=\"file\"\n            id=\"my_file\"\n            style={{ display: \"none\" }}\n            ref={this.fileOpen}\n            onChange={e => this.handleChange(e.target.files)}\n          />\n        </div>\n\n        <AppBar className={classes.appBar}>\n          <Toolbar variant=\"dense\">\n            <IconButton edge=\"start\" className={classes.menuButton} color=\"inherit\" aria-label=\"menu\" onClick={this.toggleMainMenu}>\n              <MenuIcon />\n            </IconButton>\n            { !isOpen ? (\n              <Typography variant=\"overline\" className={classes.title}>\n                <strong>U</strong>niversal <strong>D</strong>icom <strong>V</strong>iewer\n              </Typography>\n             ) : null\n            }\n            <div className={classes.grow} />\n            { !isOpen ? (\n              <IconButton onClick={this.showAbout}>\n                <Icon path={mdiInformationOutline} size={'1.5rem'} color={iconColor} />\n              </IconButton> \n             ) : null\n            }            \n            { iconTool !== null && this.props.tool !== null &&  isOpen ? (\n                <IconButton onClick={this.toolChange}>\n                  <Icon path={iconTool} size={'1.5rem'} color={iconToolColor} />\n                </IconButton>\n              ) : null\n            }\n            { this.props.numberOfFrames > 1 &&  isOpen ? (\n                <IconButton onClick={this.cinePlayer}>\n                  <Icon path={mdiVideo} size={'1.5rem'} color={iconColor} />\n                </IconButton> \n              ): null\n            }\n            { isOpen ? (\n              <IconButton onClick={this.resetImage}>\n                <Icon path={mdiRefresh} size={'1.5rem'} color={iconColor} />\n              </IconButton>\n             ) : null\n            }\n            { isOpen ? (\n              <IconButton color=\"inherit\" onClick={this.saveShot}>\n                <PhotoCameraIcon />\n              </IconButton>\n             ) : null\n            }\n            { isOpen > 0 ? (\n              <IconButton color=\"inherit\" onClick={this.toggleMeasure}>\n                <Icon path={mdiFileCad} size={'1.5rem'} color={iconColor} />\n              </IconButton>\n              ) : null\n            }  \n            { this.props.header.length > 0 ? (\n              <IconButton color=\"inherit\" onClick={this.toggleHeader}>\n                <Icon path={mdiFileDocument} size={'1.5rem'} color={iconColor} />\n              </IconButton>\n              ) : null\n            }  \n          </Toolbar>\n        </AppBar>\n\n        <Drawer \n          open={visibleMainMenu} \n          style={{position:'relative', zIndex: 1}}\n          onClose={this.toggleMainMenu}\n        >\n          <div className={classes.toolbar}>\n            <List dense={true}>\n              <ListItem button onClick={() => this.showSettings()}>\n                <ListItemIcon><Icon path={mdiSettings} size={'1.5rem'} color={iconColor} /></ListItemIcon>\n                <ListItemText primary='Settings' />\n              </ListItem>              \n              <ListItem button onClick={() => this.showFileOpen()}>\n                <ListItemIcon><Icon path={mdiFolder} size={'1.5rem'} color={iconColor} /></ListItemIcon>\n                <ListItemText primary='Open File ...' />\n              </ListItem>\n              <ListItem button onClick={() => this.showOpenUrl()}>\n                <ListItemIcon><Icon path={mdiWeb} size={'1.5rem'} color={iconColor} /></ListItemIcon>\n                <ListItemText primary='Open URL ...' />\n              </ListItem>\n              <ListItem button onClick={() => this.runTool.runTool('clear')}>\n                <ListItemIcon><Icon path={mdiDelete} size={'1.5rem'} color={iconColor} /></ListItemIcon>\n                <ListItemText primary='Clear' />\n              </ListItem>  \n              <ListItem button onClick={() => this.showSettings()}>\n                <ListItemIcon><Icon path={mdiSettings} size={'1.5rem'} color={iconColor} /></ListItemIcon>\n                <ListItemText primary='Settings' />\n              </ListItem>                \n              <Divider />\n              <ListItem button onClick={() => this.toolExecute('notool')} disabled={!isOpen}>\n                <ListItemIcon><Icon path={mdiCursorDefault} size={'1.5rem'} color={iconColor} /></ListItemIcon>\n                <ListItemText primary='No tool' />\n              </ListItem>         \n              <ListItem button onClick={() => this.toolExecute('Wwwc')} disabled={!isOpen}>\n                <ListItemIcon><Icon path={mdiArrowAll} size={'1.5rem'} color={iconColor} /></ListItemIcon>\n                <ListItemText primary='WW/WC' />\n              </ListItem>  \n              <ListItem button onClick={() => this.toolExecute('Pan')} disabled={!isOpen}>\n                <ListItemIcon><Icon path={mdiCursorPointer} size={'1.5rem'} color={iconColor} /></ListItemIcon>\n                <ListItemText primary='Pan' />\n              </ListItem>  \n              <ListItem button onClick={() => this.toolExecute('Zoom')} disabled={!isOpen}>\n                <ListItemIcon><Icon path={mdiMagnify} size={'1.5rem'} color={iconColor} /></ListItemIcon>\n                <ListItemText primary='Zoom' />\n              </ListItem>      \n              <ListItem button onClick={() => this.toolExecute('Magnify')} disabled={!isOpen}>\n                <ListItemIcon><Icon path={mdiCheckboxIntermediate} size={'1.5rem'} color={iconColor} /></ListItemIcon>\n                <ListItemText primary='Magnify' />\n              </ListItem>       \n              <ListItem button onClick={() => this.toolExecute('Length')} disabled={!isOpen}>\n                <ListItemIcon><Icon path={mdiRuler} size={'1.5rem'} color={iconColor} /></ListItemIcon>\n                <ListItemText primary='Length' />\n              </ListItem>        \n              <ListItem button onClick={() => this.toolExecute('Probe')} disabled={!isOpen}>\n                <ListItemIcon><Icon path={mdiEyedropper} size={'1.5rem'} color={iconColor} /></ListItemIcon>\n                <ListItemText primary='Probe' />\n              </ListItem> \n              <ListItem button onClick={() => this.toolExecute('Angle')} disabled={!isOpen}>\n                <ListItemIcon><Icon path={mdiAngleAcute} size={'1.5rem'} color={iconColor} /></ListItemIcon>\n                <ListItemText primary='Angle' />\n              </ListItem>  \n              <ListItem button onClick={() => this.toolExecute('EllipticalRoi')} disabled={!isOpen}>\n                <ListItemIcon><Icon path={mdiEllipse} size={'1.5rem'} color={iconColor} /></ListItemIcon>\n                <ListItemText primary='Elliptical Roi' />\n              </ListItem>     \n              <ListItem button onClick={() => this.toolExecute('RectangleRoi')} disabled={!isOpen}>\n                <ListItemIcon><Icon path={mdiRectangle} size={'1.5rem'} color={iconColor} /></ListItemIcon>\n                <ListItemText primary='Rectangle Roi' />\n              </ListItem> \n              <ListItem button onClick={() => this.toolExecute('FreehandRoi')} disabled={!isOpen}>\n                <ListItemIcon><Icon path={mdiGesture} size={'1.5rem'} color={iconColor} /></ListItemIcon>\n                <ListItemText primary='Freehand Roi' />\n              </ListItem> \n              <ListItem button onClick={() => this.toolExecute('Histogram')} disabled={!isOpen}>\n                <ListItemIcon><Icon path={mdiChartHistogram} size={'1.5rem'} color={iconColor} /></ListItemIcon>\n                <ListItemText primary='Histogram' />\n              </ListItem>                                                                                                                                                      \n            </List>\n          </div>\n        </Drawer>       \n\n        <Drawer\n          anchor='right'\n          open={visibleHeader}\n          onClose={this.toggleHeader}\n        >\n          <Toolbar variant=\"dense\">\n            <IconButton color=\"inherit\" onClick={this.toggleHeader}>\n              <ClearIcon />\n            </IconButton>\n            <Typography variant=\"h6\" className={classes.title}>\n              Dicom Header\n            </Typography>\n              <div className={classes.grow} />\n            <IconButton color=\"inherit\" onClick={this.saveHeader}>\n              <SaveIcon />\n            </IconButton>\n          </Toolbar>\n          {this.props.header.map((item, index) => <HeaderItem name={item.name} value={item.value} key={index} />)} \n        </Drawer>  \n\n        <Drawer\n          anchor='right'\n          open={visibleMeasure}\n          onClose={this.toggleMeasure}\n        >\n          <Toolbar variant=\"dense\">\n            <IconButton color=\"inherit\" onClick={this.toggleMeasure}>\n              <ClearIcon />\n            </IconButton>\n            <Typography variant=\"h6\" className={classes.title}>\n              Measurements&nbsp;&nbsp;\n            </Typography>\n              <div className={classes.grow} />\n            <IconButton color=\"inherit\" onClick={this.saveMeasure} edge=\"end\">\n              <Icon path={mdiContentSaveOutline} size={'1.5rem'} color={iconColor} />\n            </IconButton>\n            <IconButton color=\"inherit\" onClick={this.clearMeasure} edge=\"end\">\n              <Icon path={mdiTrashCanOutline} size={'1.5rem'} color={iconColor} />\n            </IconButton>\n          </Toolbar>\n          {this.props.measure.map((item, index) => <MeasureItem item={item} index={index} toolRemove={this.toolRemove} key={index} classes={classes} />)} \n        </Drawer>  \n\n        {visibleSettings ? <Settings onClose={this.hideSettings}/>: null}\n\n        {visibleAbout ? <AboutDlg onClose={this.showAbout}/>: null}\n\n        <Dialog\n            open={this.state.visibleClearMeasureDlg}\n            onClose={this.hideClearMeasureDlg}\n            aria-labelledby=\"alert-dialog-title\"\n        >\n            <DialogTitle id=\"alert-dialog-title\">{\"Are you sure to remove all the measurements?\"}</DialogTitle>\n            <DialogActions>\n                <Button onClick={this.hideClearMeasureDlg}>\n                    Cancel\n                </Button>\n                <Button onClick={this.confirmClearMeasureDlg} autoFocus>\n                    Ok\n                </Button>\n            </DialogActions>\n        </Dialog>\n\n        <Dialog\n            open={this.state.visibleOpenUrl}\n            aria-labelledby=\"form-dialog-title\"\n        >\n            <DialogTitle id=\"form-dialog-title\">{\"Open URL\"}</DialogTitle>\n              <DialogContent>\n                <DialogContentText id=\"alert-dialog-description\">\n                  Insert an URL to download a DICOM or image file:\n                </DialogContentText>\n                <TextField\n                    autoFocus\n                    margin=\"dense\"\n                    id=\"id-open-url\"\n                    inputRef={input => (this.openUrlField = input)}\n                    fullWidth\n                />\n              </DialogContent>\n            <DialogActions>\n                <Button onClick={() => this.hideOpenUrl(false)} >\n                    Cancel\n                </Button>\n                <Button onClick={() => this.hideOpenUrl(true)} autoFocus>\n                    Ok\n                </Button>\n            </DialogActions>\n        </Dialog>\n\n        <DicomViewer \n          runTool={ref => (this.runTool = ref)} \n          changeTool={ref => (this.changeTool = ref)} \n          visible={visibleDcm} \n        />\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    localfile: state.localfile,\n    isOpen: state.isOpen,\n    numberOfFrames: state.numberOfFrames,\n    tool: state.tool,\n    header: state.header,\n    measure: state.measure\n  }\n}\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    toolStore: (tool) => dispatch(dcmTool(tool)),\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(withStyles(styles)(App))\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import {createStore} from 'redux'\r\nimport storeReducer from '../reducers/index'\r\n\r\nlet initialState = {\r\n    localfile: null,\r\n    url: null,\r\n    isOpen: false,\r\n    numberOfFrames: 1,\r\n    tool: null,\r\n    images: [],\r\n    header: [],\r\n    measure: []\r\n}\r\n\r\nconst store = createStore(storeReducer, initialState,\r\n    window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__())\r\n\r\nexport default store\r\n","import {\r\n  CLEAR_STORE, \r\n  LOAD_LOCALFILE, \r\n  LOAD_URL, \r\n  DCM_IS_OPEN, \r\n  DCM_NUMBER_OF_FRAMES, \r\n  DCM_TOOL, \r\n  DCM_IMAGE,\r\n  MEASURE_STORE, \r\n  MEASURE_CLEAR, \r\n  MEASURE_REMOVE, \r\n  DCMDATA_STORE\r\n} from '../actions'\r\n\r\nexport default function storeReducer(state={}, action) {\r\n    switch(action.type) {\r\n      \r\n      case CLEAR_STORE:\r\n        return {\r\n          localfile: null,\r\n          url: null,\r\n          isOpen: false,\r\n          numberOfFrames: 1,\r\n          tool: null,\r\n          images: [],\r\n          header: [],\r\n          measure: []\r\n        }    \r\n\r\n      case LOAD_LOCALFILE:\r\n        return {\r\n          localfile: action.localfile,\r\n          url: null,\r\n          isOpen: false,\r\n          numberOfFrames: 1,\r\n          tool: null,\r\n          images: [],\r\n          header: [],\r\n          measure: []\r\n        }    \r\n\r\n      case LOAD_URL:\r\n          return {\r\n            localfile: null,\r\n            url: action.url,\r\n            isOpen: false,\r\n            numberOfFrames: 1,\r\n            tool: null,\r\n            images: [],\r\n            header: [],\r\n            measure: []\r\n          }    \r\n\r\n      case DCM_IS_OPEN:\r\n          return {\r\n            ...state,\r\n            isOpen: action.value,\r\n            images: [\r\n              ...state.images\r\n            ],            \r\n            header: [\r\n              ...state.header\r\n            ],\r\n            measure: [\r\n              ...state.measure\r\n            ]            \r\n          }    \r\n\r\n      case DCM_NUMBER_OF_FRAMES:\r\n          return {\r\n            ...state,\r\n            numberOfFrames: action.value,\r\n            images: [\r\n              ...state.images\r\n            ],  \r\n            header: [\r\n              ...state.header\r\n            ],\r\n            measure: [\r\n              ...state.measure\r\n            ]\r\n          }    \r\n\r\n      case DCM_TOOL:\r\n          return {\r\n              ...state,\r\n              tool: action.tool,\r\n              images: [\r\n                ...state.images\r\n              ],  \r\n              header: [\r\n                ...state.header\r\n              ],\r\n              measure: [\r\n                ...state.measure\r\n              ]  \r\n          }  \r\n\r\n      case DCM_IMAGE:\r\n          return {\r\n              ...state,\r\n              images: [\r\n                ...state.images,\r\n                action.images,\r\n              ],  \r\n              header: [\r\n                ...state.header\r\n              ],\r\n              measure: [\r\n                ...state.measure\r\n              ]  \r\n          } \r\n\r\n      case DCMDATA_STORE:\r\n        const [name, value] = action.data\r\n        if (value === undefined) {\r\n          return state\r\n        }\r\n        return {\r\n          ...state,\r\n          header: [\r\n            ...state.header,\r\n            { 'name': name, 'value': value },\r\n          ],\r\n        }   \r\n\r\n      case MEASURE_STORE:\r\n        return {\r\n          ...state,\r\n          images: [\r\n            ...state.images\r\n          ],\r\n          header: [\r\n            ...state.header\r\n          ],          \r\n          measure: [\r\n            ...state.measure,\r\n            action.measure,\r\n          ],\r\n        }   \r\n\r\n      case MEASURE_REMOVE:\r\n        let measure = [...state.measure]\r\n        measure.splice(action.index, 1)\r\n        return {\r\n          ...state,\r\n          images: [\r\n            ...state.images\r\n          ],\r\n          header: [\r\n            ...state.header\r\n          ],          \r\n          measure: [\r\n            ...measure,\r\n          ],\r\n        }   \r\n\r\n      case MEASURE_CLEAR:\r\n            return {\r\n              ...state,\r\n              images: [\r\n                ...state.images\r\n              ],\r\n              header: [\r\n                ...state.header\r\n              ],          \r\n              measure: [],\r\n            }  \r\n\r\n      default:\r\n          return state\r\n    }\r\n  }\r\n  ","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport WebFontLoader from 'webfontloader';\nimport {Provider} from 'react-redux'\nimport store from './store'\nimport { MuiThemeProvider, createMuiTheme } from '@material-ui/core/styles'\n\nWebFontLoader.load({\n    google: {\n        families: ['Roboto:300,400,500,700', 'Material Icons'],\n    },\n});\n\nstore.subscribe(() => console.log('store updated:', store.getState()));\n\nconst theme = createMuiTheme({\n    palette: {\n        primary: {\n            main: '#004d40',\n        },\n        secondary: {\n            main: '#888888',\n        },\n        type: 'dark',\n    },\n  })\n\n  \nReactDOM.render(\n    <Provider store={store}>\n        <MuiThemeProvider theme = { theme }>\n            <App />\n        </MuiThemeProvider>\n    </Provider>, \n    document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n "],"sourceRoot":""}